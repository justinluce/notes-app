var bO=Object.defineProperty;var SO=(n,e,t)=>e in n?bO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var pa=(n,e,t)=>SO(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Z_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sy={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function TO(){if(US)return Iu;US=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:l,ref:i!==void 0?i:null,props:o}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var BS;function wO(){return BS||(BS=1,sy.exports=TO()),sy.exports}var ee=wO(),oy={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function CO(){if(zS)return Ne;zS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function v(L){return L===null||typeof L!="object"?null:(L=_&&L[_]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function A(L,le,ve){this.props=L,this.context=le,this.refs=C,this.updater=ve||S}A.prototype.isReactComponent={},A.prototype.setState=function(L,le){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,le,"setState")},A.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function O(){}O.prototype=A.prototype;function z(L,le,ve){this.props=L,this.context=le,this.refs=C,this.updater=ve||S}var Q=z.prototype=new O;Q.constructor=z,b(Q,A.prototype),Q.isPureReactComponent=!0;var F=Array.isArray,W={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function N(L,le,ve,de,he,Re){return ve=Re.ref,{$$typeof:n,type:L,key:le,ref:ve!==void 0?ve:null,props:Re}}function x(L,le){return N(L.type,le,void 0,void 0,void 0,L.props)}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function D(L){var le={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ve){return le[ve]})}var V=/\/+/g;function H(L,le){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):le.toString(36)}function P(){}function ot(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(P,P):(L.status="pending",L.then(function(le){L.status==="pending"&&(L.status="fulfilled",L.value=le)},function(le){L.status==="pending"&&(L.status="rejected",L.reason=le)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function at(L,le,ve,de,he){var Re=typeof L;(Re==="undefined"||Re==="boolean")&&(L=null);var Me=!1;if(L===null)Me=!0;else switch(Re){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(L.$$typeof){case n:case e:Me=!0;break;case g:return Me=L._init,at(Me(L._payload),le,ve,de,he)}}if(Me)return he=he(L),Me=de===""?"."+H(L,0):de,F(he)?(ve="",Me!=null&&(ve=Me.replace(V,"$&/")+"/"),at(he,le,ve,"",function(_t){return _t})):he!=null&&(k(he)&&(he=x(he,ve+(he.key==null||L&&L.key===he.key?"":(""+he.key).replace(V,"$&/")+"/")+Me)),le.push(he)),1;Me=0;var Rt=de===""?".":de+":";if(F(L))for(var Qe=0;Qe<L.length;Qe++)de=L[Qe],Re=Rt+H(de,Qe),Me+=at(de,le,ve,Re,he);else if(Qe=v(L),typeof Qe=="function")for(L=Qe.call(L),Qe=0;!(de=L.next()).done;)de=de.value,Re=Rt+H(de,Qe++),Me+=at(de,le,ve,Re,he);else if(Re==="object"){if(typeof L.then=="function")return at(ot(L),le,ve,de,he);throw le=String(L),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ne(L,le,ve){if(L==null)return L;var de=[],he=0;return at(L,de,"","",function(Re){return le.call(ve,Re,he++)}),de}function pe(L){if(L._status===-1){var le=L._result;le=le(),le.then(function(ve){(L._status===0||L._status===-1)&&(L._status=1,L._result=ve)},function(ve){(L._status===0||L._status===-1)&&(L._status=2,L._result=ve)}),L._status===-1&&(L._status=0,L._result=le)}if(L._status===1)return L._result.default;throw L._result}var ue=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function He(){}return Ne.Children={map:ne,forEach:function(L,le,ve){ne(L,function(){le.apply(this,arguments)},ve)},count:function(L){var le=0;return ne(L,function(){le++}),le},toArray:function(L){return ne(L,function(le){return le})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ne.Component=A,Ne.Fragment=t,Ne.Profiler=i,Ne.PureComponent=z,Ne.StrictMode=r,Ne.Suspense=h,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ne.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ne.cache=function(L){return function(){return L.apply(null,arguments)}},Ne.cloneElement=function(L,le,ve){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=b({},L.props),he=L.key,Re=void 0;if(le!=null)for(Me in le.ref!==void 0&&(Re=void 0),le.key!==void 0&&(he=""+le.key),le)!X.call(le,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&le.ref===void 0||(de[Me]=le[Me]);var Me=arguments.length-2;if(Me===1)de.children=ve;else if(1<Me){for(var Rt=Array(Me),Qe=0;Qe<Me;Qe++)Rt[Qe]=arguments[Qe+2];de.children=Rt}return N(L.type,he,void 0,void 0,Re,de)},Ne.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Ne.createElement=function(L,le,ve){var de,he={},Re=null;if(le!=null)for(de in le.key!==void 0&&(Re=""+le.key),le)X.call(le,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(he[de]=le[de]);var Me=arguments.length-2;if(Me===1)he.children=ve;else if(1<Me){for(var Rt=Array(Me),Qe=0;Qe<Me;Qe++)Rt[Qe]=arguments[Qe+2];he.children=Rt}if(L&&L.defaultProps)for(de in Me=L.defaultProps,Me)he[de]===void 0&&(he[de]=Me[de]);return N(L,Re,void 0,void 0,null,he)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(L){return{$$typeof:u,render:L}},Ne.isValidElement=k,Ne.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:pe}},Ne.memo=function(L,le){return{$$typeof:d,type:L,compare:le===void 0?null:le}},Ne.startTransition=function(L){var le=W.T,ve={};W.T=ve;try{var de=L(),he=W.S;he!==null&&he(ve,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(He,ue)}catch(Re){ue(Re)}finally{W.T=le}},Ne.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ne.use=function(L){return W.H.use(L)},Ne.useActionState=function(L,le,ve){return W.H.useActionState(L,le,ve)},Ne.useCallback=function(L,le){return W.H.useCallback(L,le)},Ne.useContext=function(L){return W.H.useContext(L)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(L,le){return W.H.useDeferredValue(L,le)},Ne.useEffect=function(L,le){return W.H.useEffect(L,le)},Ne.useId=function(){return W.H.useId()},Ne.useImperativeHandle=function(L,le,ve){return W.H.useImperativeHandle(L,le,ve)},Ne.useInsertionEffect=function(L,le){return W.H.useInsertionEffect(L,le)},Ne.useLayoutEffect=function(L,le){return W.H.useLayoutEffect(L,le)},Ne.useMemo=function(L,le){return W.H.useMemo(L,le)},Ne.useOptimistic=function(L,le){return W.H.useOptimistic(L,le)},Ne.useReducer=function(L,le,ve){return W.H.useReducer(L,le,ve)},Ne.useRef=function(L){return W.H.useRef(L)},Ne.useState=function(L){return W.H.useState(L)},Ne.useSyncExternalStore=function(L,le,ve){return W.H.useSyncExternalStore(L,le,ve)},Ne.useTransition=function(){return W.H.useTransition()},Ne.version="19.0.0",Ne}var HS;function vh(){return HS||(HS=1,oy.exports=CO()),oy.exports}var G=vh();const Nn=Z_(G);var ay={exports:{}},xu={},ly={exports:{}},cy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function AO(){return jS||(jS=1,function(n){function e(ne,pe){var ue=ne.length;ne.push(pe);e:for(;0<ue;){var He=ue-1>>>1,L=ne[He];if(0<i(L,pe))ne[He]=pe,ne[ue]=L,ue=He;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var pe=ne[0],ue=ne.pop();if(ue!==pe){ne[0]=ue;e:for(var He=0,L=ne.length,le=L>>>1;He<le;){var ve=2*(He+1)-1,de=ne[ve],he=ve+1,Re=ne[he];if(0>i(de,ue))he<L&&0>i(Re,de)?(ne[He]=Re,ne[he]=ue,He=he):(ne[He]=de,ne[ve]=ue,He=ve);else if(he<L&&0>i(Re,ue))ne[He]=Re,ne[he]=ue,He=he;else break e}}return pe}function i(ne,pe){var ue=ne.sortIndex-pe.sortIndex;return ue!==0?ue:ne.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],g=1,_=null,v=3,S=!1,b=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function Q(ne){for(var pe=t(d);pe!==null;){if(pe.callback===null)r(d);else if(pe.startTime<=ne)r(d),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=t(d)}}function F(ne){if(C=!1,Q(ne),!b)if(t(h)!==null)b=!0,ot();else{var pe=t(d);pe!==null&&at(F,pe.startTime-ne)}}var W=!1,X=-1,N=5,x=-1;function k(){return!(n.unstable_now()-x<N)}function D(){if(W){var ne=n.unstable_now();x=ne;var pe=!0;try{e:{b=!1,C&&(C=!1,O(X),X=-1),S=!0;var ue=v;try{t:{for(Q(ne),_=t(h);_!==null&&!(_.expirationTime>ne&&k());){var He=_.callback;if(typeof He=="function"){_.callback=null,v=_.priorityLevel;var L=He(_.expirationTime<=ne);if(ne=n.unstable_now(),typeof L=="function"){_.callback=L,Q(ne),pe=!0;break t}_===t(h)&&r(h),Q(ne)}else r(h);_=t(h)}if(_!==null)pe=!0;else{var le=t(d);le!==null&&at(F,le.startTime-ne),pe=!1}}break e}finally{_=null,v=ue,S=!1}pe=void 0}}finally{pe?V():W=!1}}}var V;if(typeof z=="function")V=function(){z(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,P=H.port2;H.port1.onmessage=D,V=function(){P.postMessage(null)}}else V=function(){A(D,0)};function ot(){W||(W=!0,V())}function at(ne,pe){X=A(function(){ne(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){b||S||(b=!0,ot())},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ne){switch(v){case 1:case 2:case 3:var pe=3;break;default:pe=v}var ue=v;v=pe;try{return ne()}finally{v=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ue=v;v=ne;try{return pe()}finally{v=ue}},n.unstable_scheduleCallback=function(ne,pe,ue){var He=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?He+ue:He):ue=He,ne){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ue+L,ne={id:g++,callback:pe,priorityLevel:ne,startTime:ue,expirationTime:L,sortIndex:-1},ue>He?(ne.sortIndex=ue,e(d,ne),t(h)===null&&ne===t(d)&&(C?(O(X),X=-1):C=!0,at(F,ue-He))):(ne.sortIndex=L,e(h,ne),b||S||(b=!0,ot())),ne},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(ne){var pe=v;return function(){var ue=v;v=pe;try{return ne.apply(this,arguments)}finally{v=ue}}}}(cy)),cy}var FS;function RO(){return FS||(FS=1,ly.exports=AO()),ly.exports}var uy={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qS;function kO(){if(qS)return yn;qS=1;var n=vh();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,d,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:h,containerInfo:d,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(h,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(h,d,null,g)},yn.flushSync=function(h){var d=l.T,g=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=d,r.p=g,r.d.f()}},yn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(h,d))},yn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},yn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var g=d.as,_=u(g,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,S=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?r.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:v,fetchPriority:S}):g==="script"&&r.d.X(h,{crossOrigin:_,integrity:v,fetchPriority:S,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},yn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=u(d.as,d.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(h)},yn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,_=u(g,d.crossOrigin);r.d.L(h,g,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},yn.preloadModule=function(h,d){if(typeof h=="string")if(d){var g=u(d.as,d.crossOrigin);r.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(h)},yn.requestFormReset=function(h){r.d.r(h)},yn.unstable_batchedUpdates=function(h,d){return h(d)},yn.useFormState=function(h,d,g){return l.H.useFormState(h,d,g)},yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},yn.version="19.0.0",yn}var $S;function iC(){if($S)return uy.exports;$S=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uy.exports=kO(),uy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS;function IO(){if(GS)return xu;GS=1;var n=RO(),e=vh(),t=iC();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var o=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),S=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),F=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function X(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function x(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case h:return"Fragment";case u:return"Portal";case g:return"Profiler";case d:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case S:return(s.displayName||"Context")+".Provider";case v:return(s._context.displayName||"Context")+".Consumer";case b:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return a=s.displayName||null,a!==null?a:x(s.type)||"Memo";case z:a=s._payload,s=s._init;try{return x(s(a))}catch{}}return null}var k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,V,H;function P(s){if(V===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);V=a&&a[1]||"",H=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+V+s+H}var ot=!1;function at(s,a){if(!s||ot)return"";ot=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var K=J}Reflect.construct(s,[],oe)}else{try{oe.call()}catch(J){K=J}s.call(oe.prototype)}}else{try{throw Error()}catch(J){K=J}(oe=s())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),w=y[0],R=y[1];if(w&&R){var M=w.split(`
`),B=R.split(`
`);for(m=f=0;f<M.length&&!M[f].includes("DetermineComponentFrameRoot");)f++;for(;m<B.length&&!B[m].includes("DetermineComponentFrameRoot");)m++;if(f===M.length||m===B.length)for(f=M.length-1,m=B.length-1;1<=f&&0<=m&&M[f]!==B[m];)m--;for(;1<=f&&0<=m;f--,m--)if(M[f]!==B[m]){if(f!==1||m!==1)do if(f--,m--,0>m||M[f]!==B[m]){var Z=`
`+M[f].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=f&&0<=m);break}}}finally{ot=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?P(c):""}function ne(s){switch(s.tag){case 26:case 27:case 5:return P(s.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return s=at(s.type,!1),s;case 11:return s=at(s.type.render,!1),s;case 1:return s=at(s.type,!0),s;default:return""}}function pe(s){try{var a="";do a+=ne(s),s=s.return;while(s);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ue(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,a.flags&4098&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function He(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function L(s){if(ue(s)!==s)throw Error(r(188))}function le(s){var a=s.alternate;if(!a){if(a=ue(s),a===null)throw Error(r(188));return a!==s?null:s}for(var c=s,f=a;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return L(m),s;if(y===f)return L(m),a;y=y.sibling}throw Error(r(188))}if(c.return!==f.return)c=m,f=y;else{for(var w=!1,R=m.child;R;){if(R===c){w=!0,c=m,f=y;break}if(R===f){w=!0,f=m,c=y;break}R=R.sibling}if(!w){for(R=y.child;R;){if(R===c){w=!0,c=y,f=m;break}if(R===f){w=!0,f=y,c=m;break}R=R.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:a}function ve(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=ve(s),a!==null)return a;s=s.sibling}return null}var de=Array.isArray,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},Me=[],Rt=-1;function Qe(s){return{current:s}}function _t(s){0>Rt||(s.current=Me[Rt],Me[Rt]=null,Rt--)}function tt(s,a){Rt++,Me[Rt]=s.current,s.current=a}var kn=Qe(null),Ei=Qe(null),ar=Qe(null),hs=Qe(null);function fs(s,a){switch(tt(ar,a),tt(Ei,s),tt(kn,null),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?dS(a):0;break;default:if(s=s===8?a.parentNode:a,a=s.tagName,s=s.namespaceURI)s=dS(s),a=pS(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}_t(kn),tt(kn,a)}function bi(){_t(kn),_t(Ei),_t(ar)}function wc(s){s.memoizedState!==null&&tt(hs,s);var a=kn.current,c=pS(a,s.type);a!==c&&(tt(Ei,s),tt(kn,c))}function $a(s){Ei.current===s&&(_t(kn),_t(Ei)),hs.current===s&&(_t(hs),wu._currentValue=Re)}var Ga=Object.prototype.hasOwnProperty,Vo=n.unstable_scheduleCallback,Ka=n.unstable_cancelCallback,am=n.unstable_shouldYield,Cc=n.unstable_requestPaint,zn=n.unstable_now,Uh=n.unstable_getCurrentPriorityLevel,Pt=n.unstable_ImmediatePriority,$t=n.unstable_UserBlockingPriority,Si=n.unstable_NormalPriority,Bh=n.unstable_LowPriority,Ac=n.unstable_IdlePriority,lm=n.log,Lo=n.unstable_setDisableYieldValue,ds=null,mn=null;function Rc(s){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(ds,s,void 0,(s.current.flags&128)===128)}catch{}}function Gr(s){if(typeof lm=="function"&&Lo(s),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(ds,s)}catch{}}var In=Math.clz32?Math.clz32:Hh,kc=Math.log,zh=Math.LN2;function Hh(s){return s>>>=0,s===0?32:31-(kc(s)/zh|0)|0}var Kr=128,ps=4194304;function xr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function lr(s,a){var c=s.pendingLanes;if(c===0)return 0;var f=0,m=s.suspendedLanes,y=s.pingedLanes,w=s.warmLanes;s=s.finishedLanes!==0;var R=c&134217727;return R!==0?(c=R&~m,c!==0?f=xr(c):(y&=R,y!==0?f=xr(y):s||(w=R&~w,w!==0&&(f=xr(w))))):(R=c&~m,R!==0?f=xr(R):y!==0?f=xr(y):s||(w=c&~w,w!==0&&(f=xr(w)))),f===0?0:a!==0&&a!==f&&!(a&m)&&(m=f&-f,w=a&-a,m>=w||m===32&&(w&4194176)!==0)?a:f}function ms(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Wa(s,a){switch(s){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ic(){var s=Kr;return Kr<<=1,!(Kr&4194176)&&(Kr=128),s}function gs(){var s=ps;return ps<<=1,!(ps&62914560)&&(ps=4194304),s}function Qa(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function wt(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function jh(s,a,c,f,m,y){var w=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var R=s.entanglements,M=s.expirationTimes,B=s.hiddenUpdates;for(c=w&~c;0<c;){var Z=31-In(c),oe=1<<Z;R[Z]=0,M[Z]=-1;var K=B[Z];if(K!==null)for(B[Z]=null,Z=0;Z<K.length;Z++){var J=K[Z];J!==null&&(J.lane&=-536870913)}c&=~oe}f!==0&&ys(s,f,0),y!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=y&~(w&~a))}function ys(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var f=31-In(a);s.entangledLanes|=a,s.entanglements[f]=s.entanglements[f]|1073741824|c&4194218}function _s(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var f=31-In(c),m=1<<f;m&a|s[f]&a&&(s[f]|=a),c&=~m}}function Fh(s){return s&=-s,2<s?8<s?s&134217727?32:268435456:8:2}function qh(){var s=he.p;return s!==0?s:(s=window.event,s===void 0?32:DS(s.type))}function vs(s,a){var c=he.p;try{return he.p=s,a()}finally{he.p=c}}var Wr=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Wr,Vt="__reactProps$"+Wr,Ti="__reactContainer$"+Wr,Uo="__reactEvents$"+Wr,Ya="__reactListeners$"+Wr,Qr="__reactHandles$"+Wr,xc="__reactResources$"+Wr,Es="__reactMarker$"+Wr;function Bo(s){delete s[Gt],delete s[Vt],delete s[Uo],delete s[Ya],delete s[Qr]}function Or(s){var a=s[Gt];if(a)return a;for(var c=s.parentNode;c;){if(a=c[Ti]||c[Gt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=yS(s);s!==null;){if(c=s[Gt])return c;s=yS(s)}return a}s=c,c=s.parentNode}return null}function wi(s){if(s=s[Gt]||s[Ti]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function bs(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Ss(s){var a=s[xc];return a||(a=s[xc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ft(s){s[Es]=!0}var Oc=new Set,Xa={};function Qn(s,a){Hn(s,a),Hn(s+"Capture",a)}function Hn(s,a){for(Xa[s]=a,s=0;s<a.length;s++)Oc.add(a[s])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dc={},Mc={};function $h(s){return Ga.call(Mc,s)?!0:Ga.call(Dc,s)?!1:cm.test(s)?Mc[s]=!0:(Dc[s]=!0,!1)}function Ts(s,a,c){if($h(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function ws(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function cr(s,a,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+f)}}function xn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Gh(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function um(s){var a=Gh(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(w){f=""+w,y.call(this,w)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function zo(s){s._valueTracker||(s._valueTracker=um(s))}function Nc(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return s&&(f=Gh(s)?s.checked?"true":"false":s.value),s=f,s!==c?(a.setValue(s),!0):!1}function Ja(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ci=/[\n"\\]/g;function vt(s){return s.replace(Ci,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Cs(s,a,c,f,m,y,w,R){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),a!=null?w==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+xn(a)):s.value!==""+xn(a)&&(s.value=""+xn(a)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),a!=null?Za(s,w,xn(a)):c!=null?Za(s,w,xn(c)):f!=null&&s.removeAttribute("value"),m==null&&y!=null&&(s.defaultChecked=!!y),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+xn(R):s.removeAttribute("name")}function Ho(s,a,c,f,m,y,w,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;c=c!=null?""+xn(c):"",a=a!=null?""+xn(a):c,R||a===s.value||(s.value=a),s.defaultValue=a}f=f??m,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=R?s.checked:!!f,s.defaultChecked=!!f,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w)}function Za(s,a,c){a==="number"&&Ja(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ye(s,a,c,f){if(s=s.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=a.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&f&&(s[c].defaultSelected=!0)}else{for(c=""+xn(c),a=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function jo(s,a,c){if(a!=null&&(a=""+xn(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+xn(c):""}function As(s,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(r(92));if(de(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=xn(a),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f)}function ur(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var hm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pc(s,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":f?s.setProperty(a,c):typeof c!="number"||c===0||hm.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function Kh(s,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var m in a)f=a[m],a.hasOwnProperty(m)&&c[m]!==f&&Pc(s,m,f)}else for(var y in a)a.hasOwnProperty(y)&&Pc(s,y,a[y])}function Vc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yr(s){return dm.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var hr=null;function el(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ai=null,Ri=null;function ki(s){var a=wi(s);if(a&&(s=a.stateNode)){var c=s[Vt]||null;e:switch(s=a.stateNode,a.type){case"input":if(Cs(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vt(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==s&&f.form===s.form){var m=f[Vt]||null;if(!m)throw Error(r(90));Cs(f,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===s.form&&Nc(f)}break e;case"textarea":jo(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Ye(s,!!c.multiple,a,!1)}}}var Lc=!1;function Wh(s,a,c){if(Lc)return s(a,c);Lc=!0;try{var f=s(a);return f}finally{if(Lc=!1,(Ai!==null||Ri!==null)&&(zf(),Ai&&(a=Ai,s=Ri,Ri=Ai=null,ki(a),s)))for(a=0;a<s.length;a++)ki(s[a])}}function Fo(s,a){var c=s.stateNode;if(c===null)return null;var f=c[Vt]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var fr=!1;if(Yn)try{var qo={};Object.defineProperty(qo,"passive",{get:function(){fr=!0}}),window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{fr=!1}var Xr=null,Rs=null,Ii=null;function Uc(){if(Ii)return Ii;var s,a=Rs,c=a.length,f,m="value"in Xr?Xr.value:Xr.textContent,y=m.length;for(s=0;s<c&&a[s]===m[s];s++);var w=c-s;for(f=1;f<=w&&a[c-f]===m[y-f];f++);return Ii=m.slice(s,1<f?1-f:void 0)}function Jr(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Zr(){return!0}function Bc(){return!1}function Kt(s){function a(c,f,m,y,w){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(c=s[R],this[R]=c?c(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Zr:Bc,this.isPropagationStopped=Bc,this}return D(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),a}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Kt(Ze),$o=D({},Ze,{view:0,detail:0}),Qh=Kt($o),nl,rl,ei,Go=D({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ei&&(ei&&s.type==="mousemove"?(nl=s.screenX-ei.screenX,rl=s.screenY-ei.screenY):rl=nl=0,ei=s),nl)},movementY:function(s){return"movementY"in s?s.movementY:rl}}),dr=Kt(Go),Yh=D({},Go,{dataTransfer:0}),pm=Kt(Yh),Ko=D({},$o,{relatedTarget:0}),il=Kt(Ko),zc=D({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),sl=Kt(zc),Xh=D({},Ze,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ol=Kt(Xh),mm=D({},Ze,{data:0}),Hc=Kt(mm),Wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jc(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Zh[s])?!!a[s]:!1}function Qo(){return jc}var ef=D({},$o,{key:function(s){if(s.key){var a=Wo[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Jr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Jh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(s){return s.type==="keypress"?Jr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Jr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),al=Kt(ef),tf=D({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fc=Kt(tf),xi=D({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),nf=Kt(xi),rf=D({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),sf=Kt(rf),of=D({},Go,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ll=Kt(of),On=D({},Ze,{newState:0,oldState:0}),af=Kt(On),lf=[9,13,27,32],ti=Yn&&"CompositionEvent"in window,p=null;Yn&&"documentMode"in document&&(p=document.documentMode);var E=Yn&&"TextEvent"in window&&!p,T=Yn&&(!ti||p&&8<p&&11>=p),I=" ",q=!1;function Y(s,a){switch(s){case"keyup":return lf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var $e=!1;function Lt(s,a){switch(s){case"compositionend":return ce(a);case"keypress":return a.which!==32?null:(q=!0,I);case"textInput":return s=a.data,s===I&&q?null:s;default:return null}}function Ge(s,a){if($e)return s==="compositionend"||!ti&&Y(s,a)?(s=Uc(),Ii=Rs=Xr=null,$e=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return T&&a.locale!=="ko"?null:a.data;default:return null}}var Wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Wt[s.type]:a==="textarea"}function Oi(s,a,c,f){Ai?Ri?Ri.push(f):Ri=[f]:Ai=f,a=$f(a,"onChange"),0<a.length&&(c=new tl("onChange","change",null,c,f),s.push({event:c,listeners:a}))}var rn=null,ni=null;function qc(s){lS(s,0)}function cf(s){var a=bs(s);if(Nc(a))return s}function L0(s,a){if(s==="change")return a}var U0=!1;if(Yn){var gm;if(Yn){var ym="oninput"in document;if(!ym){var B0=document.createElement("div");B0.setAttribute("oninput","return;"),ym=typeof B0.oninput=="function"}gm=ym}else gm=!1;U0=gm&&(!document.documentMode||9<document.documentMode)}function z0(){rn&&(rn.detachEvent("onpropertychange",H0),ni=rn=null)}function H0(s){if(s.propertyName==="value"&&cf(ni)){var a=[];Oi(a,ni,s,el(s)),Wh(qc,a)}}function XI(s,a,c){s==="focusin"?(z0(),rn=a,ni=c,rn.attachEvent("onpropertychange",H0)):s==="focusout"&&z0()}function JI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return cf(ni)}function ZI(s,a){if(s==="click")return cf(a)}function ex(s,a){if(s==="input"||s==="change")return cf(a)}function tx(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Xn=typeof Object.is=="function"?Object.is:tx;function $c(s,a){if(Xn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!Ga.call(a,m)||!Xn(s[m],a[m]))return!1}return!0}function j0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function F0(s,a){var c=j0(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=a&&f>=a)return{node:c,offset:a-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=j0(c)}}function q0(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?q0(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function $0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Ja(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=Ja(s.document)}return a}function _m(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function nx(s,a){var c=$0(a);a=s.focusedElem;var f=s.selectionRange;if(c!==a&&a&&a.ownerDocument&&q0(a.ownerDocument.documentElement,a)){if(f!==null&&_m(a)){if(s=f.start,c=f.end,c===void 0&&(c=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(c,a.value.length);else if(c=(s=a.ownerDocument||document)&&s.defaultView||window,c.getSelection){c=c.getSelection();var m=a.textContent.length,y=Math.min(f.start,m);f=f.end===void 0?y:Math.min(f.end,m),!c.extend&&y>f&&(m=f,f=y,y=m),m=F0(a,y);var w=F0(a,f);m&&w&&(c.rangeCount!==1||c.anchorNode!==m.node||c.anchorOffset!==m.offset||c.focusNode!==w.node||c.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),c.removeAllRanges(),y>f?(c.addRange(s),c.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),c.addRange(s)))}}for(s=[],c=a;c=c.parentNode;)c.nodeType===1&&s.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)c=s[a],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var rx=Yn&&"documentMode"in document&&11>=document.documentMode,cl=null,vm=null,Gc=null,Em=!1;function G0(s,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Em||cl==null||cl!==Ja(f)||(f=cl,"selectionStart"in f&&_m(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Gc&&$c(Gc,f)||(Gc=f,f=$f(vm,"onSelect"),0<f.length&&(a=new tl("onSelect","select",null,a,c),s.push({event:a,listeners:f}),a.target=cl)))}function Yo(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var ul={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionrun:Yo("Transition","TransitionRun"),transitionstart:Yo("Transition","TransitionStart"),transitioncancel:Yo("Transition","TransitionCancel"),transitionend:Yo("Transition","TransitionEnd")},bm={},K0={};Yn&&(K0=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function Xo(s){if(bm[s])return bm[s];if(!ul[s])return s;var a=ul[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in K0)return bm[s]=a[c];return s}var W0=Xo("animationend"),Q0=Xo("animationiteration"),Y0=Xo("animationstart"),ix=Xo("transitionrun"),sx=Xo("transitionstart"),ox=Xo("transitioncancel"),X0=Xo("transitionend"),J0=new Map,Z0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Dr(s,a){J0.set(s,a),Qn(a,[s])}var pr=[],hl=0,Sm=0;function uf(){for(var s=hl,a=Sm=hl=0;a<s;){var c=pr[a];pr[a++]=null;var f=pr[a];pr[a++]=null;var m=pr[a];pr[a++]=null;var y=pr[a];if(pr[a++]=null,f!==null&&m!==null){var w=f.pending;w===null?m.next=m:(m.next=w.next,w.next=m),f.pending=m}y!==0&&eE(c,m,y)}}function hf(s,a,c,f){pr[hl++]=s,pr[hl++]=a,pr[hl++]=c,pr[hl++]=f,Sm|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function Tm(s,a,c,f){return hf(s,a,c,f),ff(s)}function ks(s,a){return hf(s,null,null,a),ff(s)}function eE(s,a,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var m=!1,y=s.return;y!==null;)y.childLanes|=c,f=y.alternate,f!==null&&(f.childLanes|=c),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(m=!0)),s=y,y=y.return;m&&a!==null&&s.tag===3&&(y=s.stateNode,m=31-In(c),y=y.hiddenUpdates,s=y[m],s===null?y[m]=[a]:s.push(a),a.lane=c|536870912)}function ff(s){if(50<yu)throw yu=0,Ig=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var fl={},tE=new WeakMap;function mr(s,a){if(typeof s=="object"&&s!==null){var c=tE.get(s);return c!==void 0?c:(a={value:s,source:a,stack:pe(a)},tE.set(s,a),a)}return{value:s,source:a,stack:pe(a)}}var dl=[],pl=0,df=null,pf=0,gr=[],yr=0,Jo=null,Di=1,Mi="";function Zo(s,a){dl[pl++]=pf,dl[pl++]=df,df=s,pf=a}function nE(s,a,c){gr[yr++]=Di,gr[yr++]=Mi,gr[yr++]=Jo,Jo=s;var f=Di;s=Mi;var m=32-In(f)-1;f&=~(1<<m),c+=1;var y=32-In(a)+m;if(30<y){var w=m-m%5;y=(f&(1<<w)-1).toString(32),f>>=w,m-=w,Di=1<<32-In(a)+m|c<<m|f,Mi=y+s}else Di=1<<y|c<<m|f,Mi=s}function wm(s){s.return!==null&&(Zo(s,1),nE(s,1,0))}function Cm(s){for(;s===df;)df=dl[--pl],dl[pl]=null,pf=dl[--pl],dl[pl]=null;for(;s===Jo;)Jo=gr[--yr],gr[yr]=null,Mi=gr[--yr],gr[yr]=null,Di=gr[--yr],gr[yr]=null}var Dn=null,sn=null,Xe=!1,Mr=null,ri=!1,Am=Error(r(519));function ea(s){var a=Error(r(418,""));throw Qc(mr(a,s)),Am}function rE(s){var a=s.stateNode,c=s.type,f=s.memoizedProps;switch(a[Gt]=s,a[Vt]=f,c){case"dialog":qe("cancel",a),qe("close",a);break;case"iframe":case"object":case"embed":qe("load",a);break;case"video":case"audio":for(c=0;c<vu.length;c++)qe(vu[c],a);break;case"source":qe("error",a);break;case"img":case"image":case"link":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"input":qe("invalid",a),Ho(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),zo(a);break;case"select":qe("invalid",a);break;case"textarea":qe("invalid",a),As(a,f.value,f.defaultValue,f.children),zo(a)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||fS(a.textContent,c)?(f.popover!=null&&(qe("beforetoggle",a),qe("toggle",a)),f.onScroll!=null&&qe("scroll",a),f.onScrollEnd!=null&&qe("scrollend",a),f.onClick!=null&&(a.onclick=Gf),a=!0):a=!1,a||ea(s)}function iE(s){for(Dn=s.return;Dn;)switch(Dn.tag){case 3:case 27:ri=!0;return;case 5:case 13:ri=!1;return;default:Dn=Dn.return}}function Kc(s){if(s!==Dn)return!1;if(!Xe)return iE(s),Xe=!0,!1;var a=!1,c;if((c=s.tag!==3&&s.tag!==27)&&((c=s.tag===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Gg(s.type,s.memoizedProps)),c=!c),c&&(a=!0),a&&sn&&ea(s),iE(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(a===0){sn=Pr(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;s=s.nextSibling}sn=null}}else sn=Dn?Pr(s.stateNode.nextSibling):null;return!0}function Wc(){sn=Dn=null,Xe=!1}function Qc(s){Mr===null?Mr=[s]:Mr.push(s)}var Yc=Error(r(460)),sE=Error(r(474)),Rm={then:function(){}};function oE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function mf(){}function aE(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(mf,mf),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,s===Yc?Error(r(483)):s;default:if(typeof a.status=="string")a.then(mf,mf);else{if(s=lt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(f){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=f}},function(f){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,s===Yc?Error(r(483)):s}throw Xc=a,Yc}}var Xc=null;function lE(){if(Xc===null)throw Error(r(459));var s=Xc;return Xc=null,s}var ml=null,Jc=0;function gf(s){var a=Jc;return Jc+=1,ml===null&&(ml=[]),aE(ml,s,a)}function Zc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function yf(s,a){throw a.$$typeof===o?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function cE(s){var a=s._init;return a(s._payload)}function uE(s){function a(j,U){if(s){var $=j.deletions;$===null?(j.deletions=[U],j.flags|=16):$.push(U)}}function c(j,U){if(!s)return null;for(;U!==null;)a(j,U),U=U.sibling;return null}function f(j){for(var U=new Map;j!==null;)j.key!==null?U.set(j.key,j):U.set(j.index,j),j=j.sibling;return U}function m(j,U){return j=zs(j,U),j.index=0,j.sibling=null,j}function y(j,U,$){return j.index=$,s?($=j.alternate,$!==null?($=$.index,$<U?(j.flags|=33554434,U):$):(j.flags|=33554434,U)):(j.flags|=1048576,U)}function w(j){return s&&j.alternate===null&&(j.flags|=33554434),j}function R(j,U,$,re){return U===null||U.tag!==6?(U=bg($,j.mode,re),U.return=j,U):(U=m(U,$),U.return=j,U)}function M(j,U,$,re){var ye=$.type;return ye===h?Z(j,U,$.props.children,re,$.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===z&&cE(ye)===U.type)?(U=m(U,$.props),Zc(U,$),U.return=j,U):(U=Pf($.type,$.key,$.props,null,j.mode,re),Zc(U,$),U.return=j,U)}function B(j,U,$,re){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=Sg($,j.mode,re),U.return=j,U):(U=m(U,$.children||[]),U.return=j,U)}function Z(j,U,$,re,ye){return U===null||U.tag!==7?(U=ua($,j.mode,re,ye),U.return=j,U):(U=m(U,$),U.return=j,U)}function oe(j,U,$){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=bg(""+U,j.mode,$),U.return=j,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case l:return $=Pf(U.type,U.key,U.props,null,j.mode,$),Zc($,U),$.return=j,$;case u:return U=Sg(U,j.mode,$),U.return=j,U;case z:var re=U._init;return U=re(U._payload),oe(j,U,$)}if(de(U)||X(U))return U=ua(U,j.mode,$,null),U.return=j,U;if(typeof U.then=="function")return oe(j,gf(U),$);if(U.$$typeof===S)return oe(j,Df(j,U),$);yf(j,U)}return null}function K(j,U,$,re){var ye=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ye!==null?null:R(j,U,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case l:return $.key===ye?M(j,U,$,re):null;case u:return $.key===ye?B(j,U,$,re):null;case z:return ye=$._init,$=ye($._payload),K(j,U,$,re)}if(de($)||X($))return ye!==null?null:Z(j,U,$,re,null);if(typeof $.then=="function")return K(j,U,gf($),re);if($.$$typeof===S)return K(j,U,Df(j,$),re);yf(j,$)}return null}function J(j,U,$,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return j=j.get($)||null,R(U,j,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case l:return j=j.get(re.key===null?$:re.key)||null,M(U,j,re,ye);case u:return j=j.get(re.key===null?$:re.key)||null,B(U,j,re,ye);case z:var Be=re._init;return re=Be(re._payload),J(j,U,$,re,ye)}if(de(re)||X(re))return j=j.get($)||null,Z(U,j,re,ye,null);if(typeof re.then=="function")return J(j,U,$,gf(re),ye);if(re.$$typeof===S)return J(j,U,$,Df(U,re),ye);yf(U,re)}return null}function Ee(j,U,$,re){for(var ye=null,Be=null,be=U,we=U=0,Xt=null;be!==null&&we<$.length;we++){be.index>we?(Xt=be,be=null):Xt=be.sibling;var Je=K(j,be,$[we],re);if(Je===null){be===null&&(be=Xt);break}s&&be&&Je.alternate===null&&a(j,be),U=y(Je,U,we),Be===null?ye=Je:Be.sibling=Je,Be=Je,be=Xt}if(we===$.length)return c(j,be),Xe&&Zo(j,we),ye;if(be===null){for(;we<$.length;we++)be=oe(j,$[we],re),be!==null&&(U=y(be,U,we),Be===null?ye=be:Be.sibling=be,Be=be);return Xe&&Zo(j,we),ye}for(be=f(be);we<$.length;we++)Xt=J(be,j,we,$[we],re),Xt!==null&&(s&&Xt.alternate!==null&&be.delete(Xt.key===null?we:Xt.key),U=y(Xt,U,we),Be===null?ye=Xt:Be.sibling=Xt,Be=Xt);return s&&be.forEach(function(Ks){return a(j,Ks)}),Xe&&Zo(j,we),ye}function xe(j,U,$,re){if($==null)throw Error(r(151));for(var ye=null,Be=null,be=U,we=U=0,Xt=null,Je=$.next();be!==null&&!Je.done;we++,Je=$.next()){be.index>we?(Xt=be,be=null):Xt=be.sibling;var Ks=K(j,be,Je.value,re);if(Ks===null){be===null&&(be=Xt);break}s&&be&&Ks.alternate===null&&a(j,be),U=y(Ks,U,we),Be===null?ye=Ks:Be.sibling=Ks,Be=Ks,be=Xt}if(Je.done)return c(j,be),Xe&&Zo(j,we),ye;if(be===null){for(;!Je.done;we++,Je=$.next())Je=oe(j,Je.value,re),Je!==null&&(U=y(Je,U,we),Be===null?ye=Je:Be.sibling=Je,Be=Je);return Xe&&Zo(j,we),ye}for(be=f(be);!Je.done;we++,Je=$.next())Je=J(be,j,we,Je.value,re),Je!==null&&(s&&Je.alternate!==null&&be.delete(Je.key===null?we:Je.key),U=y(Je,U,we),Be===null?ye=Je:Be.sibling=Je,Be=Je);return s&&be.forEach(function(EO){return a(j,EO)}),Xe&&Zo(j,we),ye}function St(j,U,$,re){if(typeof $=="object"&&$!==null&&$.type===h&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case l:e:{for(var ye=$.key;U!==null;){if(U.key===ye){if(ye=$.type,ye===h){if(U.tag===7){c(j,U.sibling),re=m(U,$.props.children),re.return=j,j=re;break e}}else if(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===z&&cE(ye)===U.type){c(j,U.sibling),re=m(U,$.props),Zc(re,$),re.return=j,j=re;break e}c(j,U);break}else a(j,U);U=U.sibling}$.type===h?(re=ua($.props.children,j.mode,re,$.key),re.return=j,j=re):(re=Pf($.type,$.key,$.props,null,j.mode,re),Zc(re,$),re.return=j,j=re)}return w(j);case u:e:{for(ye=$.key;U!==null;){if(U.key===ye)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){c(j,U.sibling),re=m(U,$.children||[]),re.return=j,j=re;break e}else{c(j,U);break}else a(j,U);U=U.sibling}re=Sg($,j.mode,re),re.return=j,j=re}return w(j);case z:return ye=$._init,$=ye($._payload),St(j,U,$,re)}if(de($))return Ee(j,U,$,re);if(X($)){if(ye=X($),typeof ye!="function")throw Error(r(150));return $=ye.call($),xe(j,U,$,re)}if(typeof $.then=="function")return St(j,U,gf($),re);if($.$$typeof===S)return St(j,U,Df(j,$),re);yf(j,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,U!==null&&U.tag===6?(c(j,U.sibling),re=m(U,$),re.return=j,j=re):(c(j,U),re=bg($,j.mode,re),re.return=j,j=re),w(j)):c(j,U)}return function(j,U,$,re){try{Jc=0;var ye=St(j,U,$,re);return ml=null,ye}catch(be){if(be===Yc)throw be;var Be=br(29,be,null,j.mode);return Be.lanes=re,Be.return=j,Be}finally{}}}var ta=uE(!0),hE=uE(!1),gl=Qe(null),_f=Qe(0);function fE(s,a){s=qi,tt(_f,s),tt(gl,a),qi=s|a.baseLanes}function km(){tt(_f,qi),tt(gl,gl.current)}function Im(){qi=_f.current,_t(gl),_t(_f)}var _r=Qe(null),ii=null;function Is(s){var a=s.alternate;tt(Bt,Bt.current&1),tt(_r,s),ii===null&&(a===null||gl.current!==null||a.memoizedState!==null)&&(ii=s)}function dE(s){if(s.tag===22){if(tt(Bt,Bt.current),tt(_r,s),ii===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(ii=s)}}else xs()}function xs(){tt(Bt,Bt.current),tt(_r,_r.current)}function Ni(s){_t(_r),ii===s&&(ii=null),_t(Bt)}var Bt=Qe(0);function vf(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ax=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},lx=n.unstable_scheduleCallback,cx=n.unstable_NormalPriority,zt={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xm(){return{controller:new ax,data:new Map,refCount:0}}function eu(s){s.refCount--,s.refCount===0&&lx(cx,function(){s.controller.abort()})}var tu=null,Om=0,yl=0,_l=null;function ux(s,a){if(tu===null){var c=tu=[];Om=0,yl=Lg(),_l={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Om++,a.then(pE,pE),a}function pE(){if(--Om===0&&tu!==null){_l!==null&&(_l.status="fulfilled");var s=tu;tu=null,yl=0,_l=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function hx(s,a){var c=[],f={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return s.then(function(){f.status="fulfilled",f.value=a;for(var m=0;m<c.length;m++)(0,c[m])(a)},function(m){for(f.status="rejected",f.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),f}var mE=k.S;k.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&ux(s,a),mE!==null&&mE(s,a)};var na=Qe(null);function Dm(){var s=na.current;return s!==null?s:lt.pooledCache}function Ef(s,a){a===null?tt(na,na.current):tt(na,a.pool)}function gE(){var s=Dm();return s===null?null:{parent:zt._currentValue,pool:s}}var Os=0,Ve=null,nt=null,kt=null,bf=!1,vl=!1,ra=!1,Sf=0,nu=0,El=null,fx=0;function Ct(){throw Error(r(321))}function Mm(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Xn(s[c],a[c]))return!1;return!0}function Nm(s,a,c,f,m,y){return Os=y,Ve=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,k.H=s===null||s.memoizedState===null?ia:Ds,ra=!1,y=c(f,m),ra=!1,vl&&(y=_E(a,c,f,m)),yE(s),y}function yE(s){k.H=si;var a=nt!==null&&nt.next!==null;if(Os=0,kt=nt=Ve=null,bf=!1,nu=0,El=null,a)throw Error(r(300));s===null||Qt||(s=s.dependencies,s!==null&&Of(s)&&(Qt=!0))}function _E(s,a,c,f){Ve=s;var m=0;do{if(vl&&(El=null),nu=0,vl=!1,25<=m)throw Error(r(301));if(m+=1,kt=nt=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}k.H=sa,y=a(c,f)}while(vl);return y}function dx(){var s=k.H,a=s.useState()[0];return a=typeof a.then=="function"?ru(a):a,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(Ve.flags|=1024),a}function Pm(){var s=Sf!==0;return Sf=0,s}function Vm(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function Lm(s){if(bf){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}bf=!1}Os=0,kt=nt=Ve=null,vl=!1,nu=Sf=0,El=null}function jn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ve.memoizedState=kt=s:kt=kt.next=s,kt}function It(){if(nt===null){var s=Ve.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var a=kt===null?Ve.memoizedState:kt.next;if(a!==null)kt=a,nt=s;else{if(s===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},kt===null?Ve.memoizedState=kt=s:kt=kt.next=s}return kt}var Tf;Tf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ru(s){var a=nu;return nu+=1,El===null&&(El=[]),s=aE(El,s,a),a=Ve,(kt===null?a.memoizedState:kt.next)===null&&(a=a.alternate,k.H=a===null||a.memoizedState===null?ia:Ds),s}function wf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ru(s);if(s.$$typeof===S)return gn(s)}throw Error(r(438,String(s)))}function Um(s){var a=null,c=Ve.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=Ve.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Tf(),Ve.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),f=0;f<s;f++)c[f]=F;return a.index++,c}function Pi(s,a){return typeof a=="function"?a(s):a}function Cf(s){var a=It();return Bm(a,nt,s)}function Bm(s,a,c){var f=s.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var m=s.baseQueue,y=f.pending;if(y!==null){if(m!==null){var w=m.next;m.next=y.next,y.next=w}a.baseQueue=m=y,f.pending=null}if(y=s.baseState,m===null)s.memoizedState=y;else{a=m.next;var R=w=null,M=null,B=a,Z=!1;do{var oe=B.lane&-536870913;if(oe!==B.lane?(Ke&oe)===oe:(Os&oe)===oe){var K=B.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),oe===yl&&(Z=!0);else if((Os&K)===K){B=B.next,K===yl&&(Z=!0);continue}else oe={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},M===null?(R=M=oe,w=y):M=M.next=oe,Ve.lanes|=K,Hs|=K;oe=B.action,ra&&c(y,oe),y=B.hasEagerState?B.eagerState:c(y,oe)}else K={lane:oe,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},M===null?(R=M=K,w=y):M=M.next=K,Ve.lanes|=oe,Hs|=oe;B=B.next}while(B!==null&&B!==a);if(M===null?w=y:M.next=R,!Xn(y,s.memoizedState)&&(Qt=!0,Z&&(c=_l,c!==null)))throw c;s.memoizedState=y,s.baseState=w,s.baseQueue=M,f.lastRenderedState=y}return m===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function zm(s){var a=It(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var f=c.dispatch,m=c.pending,y=a.memoizedState;if(m!==null){c.pending=null;var w=m=m.next;do y=s(y,w.action),w=w.next;while(w!==m);Xn(y,a.memoizedState)||(Qt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,f]}function vE(s,a,c){var f=Ve,m=It(),y=Xe;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=a();var w=!Xn((nt||m).memoizedState,c);if(w&&(m.memoizedState=c,Qt=!0),m=m.queue,Fm(SE.bind(null,f,m,s),[s]),m.getSnapshot!==a||w||kt!==null&&kt.memoizedState.tag&1){if(f.flags|=2048,bl(9,bE.bind(null,f,m,c,a),{destroy:void 0},null),lt===null)throw Error(r(349));y||Os&60||EE(f,a,c)}return c}function EE(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Ve.updateQueue,a===null?(a=Tf(),Ve.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function bE(s,a,c,f){a.value=c,a.getSnapshot=f,TE(a)&&wE(s)}function SE(s,a,c){return c(function(){TE(a)&&wE(s)})}function TE(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Xn(s,c)}catch{return!0}}function wE(s){var a=ks(s,2);a!==null&&Mn(a,s,2)}function Hm(s){var a=jn();if(typeof s=="function"){var c=s;if(s=c(),ra){Gr(!0);try{c()}finally{Gr(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:s},a}function CE(s,a,c,f){return s.baseState=c,Bm(s,nt,typeof f=="function"?f:Pi)}function px(s,a,c,f,m){if(kf(s))throw Error(r(485));if(s=a.action,s!==null){var y={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};k.T!==null?c(!0):y.isTransition=!1,f(y),c=a.pending,c===null?(y.next=a.pending=y,AE(a,y)):(y.next=c.next,a.pending=c.next=y)}}function AE(s,a){var c=a.action,f=a.payload,m=s.state;if(a.isTransition){var y=k.T,w={};k.T=w;try{var R=c(m,f),M=k.S;M!==null&&M(w,R),RE(s,a,R)}catch(B){jm(s,a,B)}finally{k.T=y}}else try{y=c(m,f),RE(s,a,y)}catch(B){jm(s,a,B)}}function RE(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){kE(s,a,f)},function(f){return jm(s,a,f)}):kE(s,a,c)}function kE(s,a,c){a.status="fulfilled",a.value=c,IE(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,AE(s,c)))}function jm(s,a,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,IE(a),a=a.next;while(a!==f)}s.action=null}function IE(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function xE(s,a){return a}function OE(s,a){if(Xe){var c=lt.formState;if(c!==null){e:{var f=Ve;if(Xe){if(sn){t:{for(var m=sn,y=ri;m.nodeType!==8;){if(!y){m=null;break t}if(m=Pr(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){sn=Pr(m.nextSibling),f=m.data==="F!";break e}}ea(f)}f=!1}f&&(a=c[0])}}return c=jn(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xE,lastRenderedState:a},c.queue=f,c=QE.bind(null,Ve,f),f.dispatch=c,f=Hm(!1),y=Wm.bind(null,Ve,!1,f.queue),f=jn(),m={state:a,dispatch:null,action:s,pending:null},f.queue=m,c=px.bind(null,Ve,m,y,c),m.dispatch=c,f.memoizedState=s,[a,c,!1]}function DE(s){var a=It();return ME(a,nt,s)}function ME(s,a,c){a=Bm(s,a,xE)[0],s=Cf(Pi)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?ru(a):a;var f=It(),m=f.queue,y=m.dispatch;return c!==f.memoizedState&&(Ve.flags|=2048,bl(9,mx.bind(null,m,c),{destroy:void 0},null)),[a,y,s]}function mx(s,a){s.action=a}function NE(s){var a=It(),c=nt;if(c!==null)return ME(a,c,s);It(),a=a.memoizedState,c=It();var f=c.queue.dispatch;return c.memoizedState=s,[a,f,!1]}function bl(s,a,c,f){return s={tag:s,create:a,inst:c,deps:f,next:null},a=Ve.updateQueue,a===null&&(a=Tf(),Ve.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,a.lastEffect=s),s}function PE(){return It().memoizedState}function Af(s,a,c,f){var m=jn();Ve.flags|=s,m.memoizedState=bl(1|a,c,{destroy:void 0},f===void 0?null:f)}function Rf(s,a,c,f){var m=It();f=f===void 0?null:f;var y=m.memoizedState.inst;nt!==null&&f!==null&&Mm(f,nt.memoizedState.deps)?m.memoizedState=bl(a,c,y,f):(Ve.flags|=s,m.memoizedState=bl(1|a,c,y,f))}function VE(s,a){Af(8390656,8,s,a)}function Fm(s,a){Rf(2048,8,s,a)}function LE(s,a){return Rf(4,2,s,a)}function UE(s,a){return Rf(4,4,s,a)}function BE(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function zE(s,a,c){c=c!=null?c.concat([s]):null,Rf(4,4,BE.bind(null,a,s),c)}function qm(){}function HE(s,a){var c=It();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&Mm(a,f[1])?f[0]:(c.memoizedState=[s,a],s)}function jE(s,a){var c=It();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&Mm(a,f[1]))return f[0];if(f=s(),ra){Gr(!0);try{s()}finally{Gr(!1)}}return c.memoizedState=[f,a],f}function $m(s,a,c){return c===void 0||Os&1073741824?s.memoizedState=a:(s.memoizedState=c,s=qb(),Ve.lanes|=s,Hs|=s,c)}function FE(s,a,c,f){return Xn(c,a)?c:gl.current!==null?(s=$m(s,c,f),Xn(s,a)||(Qt=!0),s):Os&42?(s=qb(),Ve.lanes|=s,Hs|=s,a):(Qt=!0,s.memoizedState=c)}function qE(s,a,c,f,m){var y=he.p;he.p=y!==0&&8>y?y:8;var w=k.T,R={};k.T=R,Wm(s,!1,a,c);try{var M=m(),B=k.S;if(B!==null&&B(R,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Z=hx(M,f);iu(s,a,Z,tr(s))}else iu(s,a,f,tr(s))}catch(oe){iu(s,a,{then:function(){},status:"rejected",reason:oe},tr())}finally{he.p=y,k.T=w}}function gx(){}function Gm(s,a,c,f){if(s.tag!==5)throw Error(r(476));var m=$E(s).queue;qE(s,m,a,Re,c===null?gx:function(){return GE(s),c(f)})}function $E(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:Re},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function GE(s){var a=$E(s).next.queue;iu(s,a,{},tr())}function Km(){return gn(wu)}function KE(){return It().memoizedState}function WE(){return It().memoizedState}function yx(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=tr();s=Ps(c);var f=Vs(a,s,c);f!==null&&(Mn(f,a,c),au(f,a,c)),a={cache:xm()},s.payload=a;return}a=a.return}}function _x(s,a,c){var f=tr();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},kf(s)?YE(a,c):(c=Tm(s,a,c,f),c!==null&&(Mn(c,s,f),XE(c,a,f)))}function QE(s,a,c){var f=tr();iu(s,a,c,f)}function iu(s,a,c,f){var m={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(kf(s))YE(a,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var w=a.lastRenderedState,R=y(w,c);if(m.hasEagerState=!0,m.eagerState=R,Xn(R,w))return hf(s,a,m,0),lt===null&&uf(),!1}catch{}finally{}if(c=Tm(s,a,m,f),c!==null)return Mn(c,s,f),XE(c,a,f),!0}return!1}function Wm(s,a,c,f){if(f={lane:2,revertLane:Lg(),action:f,hasEagerState:!1,eagerState:null,next:null},kf(s)){if(a)throw Error(r(479))}else a=Tm(s,c,f,2),a!==null&&Mn(a,s,2)}function kf(s){var a=s.alternate;return s===Ve||a!==null&&a===Ve}function YE(s,a){vl=bf=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function XE(s,a,c){if(c&4194176){var f=a.lanes;f&=s.pendingLanes,c|=f,a.lanes=c,_s(s,c)}}var si={readContext:gn,use:wf,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct};si.useCacheRefresh=Ct,si.useMemoCache=Ct,si.useHostTransitionStatus=Ct,si.useFormState=Ct,si.useActionState=Ct,si.useOptimistic=Ct;var ia={readContext:gn,use:wf,useCallback:function(s,a){return jn().memoizedState=[s,a===void 0?null:a],s},useContext:gn,useEffect:VE,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Af(4194308,4,BE.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Af(4194308,4,s,a)},useInsertionEffect:function(s,a){Af(4,2,s,a)},useMemo:function(s,a){var c=jn();a=a===void 0?null:a;var f=s();if(ra){Gr(!0);try{s()}finally{Gr(!1)}}return c.memoizedState=[f,a],f},useReducer:function(s,a,c){var f=jn();if(c!==void 0){var m=c(a);if(ra){Gr(!0);try{c(a)}finally{Gr(!1)}}}else m=a;return f.memoizedState=f.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},f.queue=s,s=s.dispatch=_x.bind(null,Ve,s),[f.memoizedState,s]},useRef:function(s){var a=jn();return s={current:s},a.memoizedState=s},useState:function(s){s=Hm(s);var a=s.queue,c=QE.bind(null,Ve,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:qm,useDeferredValue:function(s,a){var c=jn();return $m(c,s,a)},useTransition:function(){var s=Hm(!1);return s=qE.bind(null,Ve,s.queue,!0,!1),jn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var f=Ve,m=jn();if(Xe){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),lt===null)throw Error(r(349));Ke&60||EE(f,a,c)}m.memoizedState=c;var y={value:c,getSnapshot:a};return m.queue=y,VE(SE.bind(null,f,y,s),[s]),f.flags|=2048,bl(9,bE.bind(null,f,y,c,a),{destroy:void 0},null),c},useId:function(){var s=jn(),a=lt.identifierPrefix;if(Xe){var c=Mi,f=Di;c=(f&~(1<<32-In(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=Sf++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=fx++,a=":"+a+"r"+c.toString(32)+":";return s.memoizedState=a},useCacheRefresh:function(){return jn().memoizedState=yx.bind(null,Ve)}};ia.useMemoCache=Um,ia.useHostTransitionStatus=Km,ia.useFormState=OE,ia.useActionState=OE,ia.useOptimistic=function(s){var a=jn();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Wm.bind(null,Ve,!0,c),c.dispatch=a,[s,a]};var Ds={readContext:gn,use:wf,useCallback:HE,useContext:gn,useEffect:Fm,useImperativeHandle:zE,useInsertionEffect:LE,useLayoutEffect:UE,useMemo:jE,useReducer:Cf,useRef:PE,useState:function(){return Cf(Pi)},useDebugValue:qm,useDeferredValue:function(s,a){var c=It();return FE(c,nt.memoizedState,s,a)},useTransition:function(){var s=Cf(Pi)[0],a=It().memoizedState;return[typeof s=="boolean"?s:ru(s),a]},useSyncExternalStore:vE,useId:KE};Ds.useCacheRefresh=WE,Ds.useMemoCache=Um,Ds.useHostTransitionStatus=Km,Ds.useFormState=DE,Ds.useActionState=DE,Ds.useOptimistic=function(s,a){var c=It();return CE(c,nt,s,a)};var sa={readContext:gn,use:wf,useCallback:HE,useContext:gn,useEffect:Fm,useImperativeHandle:zE,useInsertionEffect:LE,useLayoutEffect:UE,useMemo:jE,useReducer:zm,useRef:PE,useState:function(){return zm(Pi)},useDebugValue:qm,useDeferredValue:function(s,a){var c=It();return nt===null?$m(c,s,a):FE(c,nt.memoizedState,s,a)},useTransition:function(){var s=zm(Pi)[0],a=It().memoizedState;return[typeof s=="boolean"?s:ru(s),a]},useSyncExternalStore:vE,useId:KE};sa.useCacheRefresh=WE,sa.useMemoCache=Um,sa.useHostTransitionStatus=Km,sa.useFormState=NE,sa.useActionState=NE,sa.useOptimistic=function(s,a){var c=It();return nt!==null?CE(c,nt,s,a):(c.baseState=s,[s,c.queue.dispatch])};function Qm(s,a,c,f){a=s.memoizedState,c=c(f,a),c=c==null?a:D({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Ym={isMounted:function(s){return(s=s._reactInternals)?ue(s)===s:!1},enqueueSetState:function(s,a,c){s=s._reactInternals;var f=tr(),m=Ps(f);m.payload=a,c!=null&&(m.callback=c),a=Vs(s,m,f),a!==null&&(Mn(a,s,f),au(a,s,f))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var f=tr(),m=Ps(f);m.tag=1,m.payload=a,c!=null&&(m.callback=c),a=Vs(s,m,f),a!==null&&(Mn(a,s,f),au(a,s,f))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=tr(),f=Ps(c);f.tag=2,a!=null&&(f.callback=a),a=Vs(s,f,c),a!==null&&(Mn(a,s,c),au(a,s,c))}};function JE(s,a,c,f,m,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,y,w):a.prototype&&a.prototype.isPureReactComponent?!$c(c,f)||!$c(m,y):!0}function ZE(s,a,c,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==s&&Ym.enqueueReplaceState(a,a.state,null)}function oa(s,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(s=s.defaultProps){c===a&&(c=D({},c));for(var m in s)c[m]===void 0&&(c[m]=s[m])}return c}var If=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function eb(s){If(s)}function tb(s){console.error(s)}function nb(s){If(s)}function xf(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function rb(s,a,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Xm(s,a,c){return c=Ps(c),c.tag=3,c.payload={element:null},c.callback=function(){xf(s,a)},c}function ib(s){return s=Ps(s),s.tag=3,s}function sb(s,a,c,f){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=f.value;s.payload=function(){return m(y)},s.callback=function(){rb(a,c,f)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){rb(a,c,f),typeof m!="function"&&(js===null?js=new Set([this]):js.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function vx(s,a,c,f,m){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&ou(a,c,m,!0),c=_r.current,c!==null){switch(c.tag){case 13:return ii===null?Dg():c.alternate===null&&bt===0&&(bt=3),c.flags&=-257,c.flags|=65536,c.lanes=m,f===Rm?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),Ng(s,f,m)),!1;case 22:return c.flags|=65536,f===Rm?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),Ng(s,f,m)),!1}throw Error(r(435,c.tag))}return Ng(s,f,m),Dg(),!1}if(Xe)return a=_r.current,a!==null?(!(a.flags&65536)&&(a.flags|=256),a.flags|=65536,a.lanes=m,f!==Am&&(s=Error(r(422),{cause:f}),Qc(mr(s,c)))):(f!==Am&&(a=Error(r(423),{cause:f}),Qc(mr(a,c))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,f=mr(f,c),m=Xm(s.stateNode,f,m),fg(s,m),bt!==4&&(bt=2)),!1;var y=Error(r(520),{cause:f});if(y=mr(y,c),mu===null?mu=[y]:mu.push(y),bt!==4&&(bt=2),a===null)return!0;f=mr(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=m&-m,c.lanes|=s,s=Xm(c.stateNode,f,s),fg(c,s),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(js===null||!js.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=ib(m),sb(m,s,c,f),fg(c,m),!1}c=c.return}while(c!==null);return!1}var ob=Error(r(461)),Qt=!1;function on(s,a,c,f){a.child=s===null?hE(a,null,c,f):ta(a,s.child,c,f)}function ab(s,a,c,f,m){c=c.render;var y=a.ref;if("ref"in f){var w={};for(var R in f)R!=="ref"&&(w[R]=f[R])}else w=f;return la(a),f=Nm(s,a,c,w,y,m),R=Pm(),s!==null&&!Qt?(Vm(s,a,m),Vi(s,a,m)):(Xe&&R&&wm(a),a.flags|=1,on(s,a,f,m),a.child)}function lb(s,a,c,f,m){if(s===null){var y=c.type;return typeof y=="function"&&!Eg(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,cb(s,a,y,f,m)):(s=Pf(c.type,null,f,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!og(s,m)){var w=y.memoizedProps;if(c=c.compare,c=c!==null?c:$c,c(w,f)&&s.ref===a.ref)return Vi(s,a,m)}return a.flags|=1,s=zs(y,f),s.ref=a.ref,s.return=a,a.child=s}function cb(s,a,c,f,m){if(s!==null){var y=s.memoizedProps;if($c(y,f)&&s.ref===a.ref)if(Qt=!1,a.pendingProps=f=y,og(s,m))s.flags&131072&&(Qt=!0);else return a.lanes=s.lanes,Vi(s,a,m)}return Jm(s,a,c,f,m)}function ub(s,a,c){var f=a.pendingProps,m=f.children,y=(a.stateNode._pendingVisibility&2)!==0,w=s!==null?s.memoizedState:null;if(su(s,a),f.mode==="hidden"||y){if(a.flags&128){if(f=w!==null?w.baseLanes|c:c,s!==null){for(m=a.child=s.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;a.childLanes=y&~f}else a.childLanes=0,a.child=null;return hb(s,a,f,c)}if(c&536870912)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ef(a,w!==null?w.cachePool:null),w!==null?fE(a,w):km(),dE(a);else return a.lanes=a.childLanes=536870912,hb(s,a,w!==null?w.baseLanes|c:c,c)}else w!==null?(Ef(a,w.cachePool),fE(a,w),xs(),a.memoizedState=null):(s!==null&&Ef(a,null),km(),xs());return on(s,a,m,c),a.child}function hb(s,a,c,f){var m=Dm();return m=m===null?null:{parent:zt._currentValue,pool:m},a.memoizedState={baseLanes:c,cachePool:m},s!==null&&Ef(a,null),km(),dE(a),s!==null&&ou(s,a,f,!0),null}function su(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(a.flags|=2097664)}}function Jm(s,a,c,f,m){return la(a),c=Nm(s,a,c,f,void 0,m),f=Pm(),s!==null&&!Qt?(Vm(s,a,m),Vi(s,a,m)):(Xe&&f&&wm(a),a.flags|=1,on(s,a,c,m),a.child)}function fb(s,a,c,f,m,y){return la(a),a.updateQueue=null,c=_E(a,f,c,m),yE(s),f=Pm(),s!==null&&!Qt?(Vm(s,a,y),Vi(s,a,y)):(Xe&&f&&wm(a),a.flags|=1,on(s,a,c,y),a.child)}function db(s,a,c,f,m){if(la(a),a.stateNode===null){var y=fl,w=c.contextType;typeof w=="object"&&w!==null&&(y=gn(w)),y=new c(f,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ym,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=f,y.state=a.memoizedState,y.refs={},ug(a),w=c.contextType,y.context=typeof w=="object"&&w!==null?gn(w):fl,y.state=a.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Qm(a,c,w,f),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Ym.enqueueReplaceState(y,y.state,null),cu(a,f,y,m),lu(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(s===null){y=a.stateNode;var R=a.memoizedProps,M=oa(c,R);y.props=M;var B=y.context,Z=c.contextType;w=fl,typeof Z=="object"&&Z!==null&&(w=gn(Z));var oe=c.getDerivedStateFromProps;Z=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,Z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||B!==w)&&ZE(a,y,f,w),Ns=!1;var K=a.memoizedState;y.state=K,cu(a,f,y,m),lu(),B=a.memoizedState,R||K!==B||Ns?(typeof oe=="function"&&(Qm(a,c,oe,f),B=a.memoizedState),(M=Ns||JE(a,c,M,f,K,B,w))?(Z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=B),y.props=f,y.state=B,y.context=w,f=M):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{y=a.stateNode,hg(s,a),w=a.memoizedProps,Z=oa(c,w),y.props=Z,oe=a.pendingProps,K=y.context,B=c.contextType,M=fl,typeof B=="object"&&B!==null&&(M=gn(B)),R=c.getDerivedStateFromProps,(B=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==oe||K!==M)&&ZE(a,y,f,M),Ns=!1,K=a.memoizedState,y.state=K,cu(a,f,y,m),lu();var J=a.memoizedState;w!==oe||K!==J||Ns||s!==null&&s.dependencies!==null&&Of(s.dependencies)?(typeof R=="function"&&(Qm(a,c,R,f),J=a.memoizedState),(Z=Ns||JE(a,c,Z,f,K,J,M)||s!==null&&s.dependencies!==null&&Of(s.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,J,M),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,J,M)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&K===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&K===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=J),y.props=f,y.state=J,y.context=M,f=Z):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&K===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&K===s.memoizedState||(a.flags|=1024),f=!1)}return y=f,su(s,a),f=(a.flags&128)!==0,y||f?(y=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&f?(a.child=ta(a,s.child,null,m),a.child=ta(a,null,c,m)):on(s,a,c,m),a.memoizedState=y.state,s=a.child):s=Vi(s,a,m),s}function pb(s,a,c,f){return Wc(),a.flags|=256,on(s,a,c,f),a.child}var Zm={dehydrated:null,treeContext:null,retryLane:0};function eg(s){return{baseLanes:s,cachePool:gE()}}function tg(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=Sr),s}function mb(s,a,c){var f=a.pendingProps,m=!1,y=(a.flags&128)!==0,w;if((w=y)||(w=s!==null&&s.memoizedState===null?!1:(Bt.current&2)!==0),w&&(m=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,s===null){if(Xe){if(m?Is(a):xs(),Xe){var R=sn,M;if(M=R){e:{for(M=R,R=ri;M.nodeType!==8;){if(!R){R=null;break e}if(M=Pr(M.nextSibling),M===null){R=null;break e}}R=M}R!==null?(a.memoizedState={dehydrated:R,treeContext:Jo!==null?{id:Di,overflow:Mi}:null,retryLane:536870912},M=br(18,null,null,0),M.stateNode=R,M.return=a,a.child=M,Dn=a,sn=null,M=!0):M=!1}M||ea(a)}if(R=a.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return R.data==="$!"?a.lanes=16:a.lanes=536870912,null;Ni(a)}return R=f.children,f=f.fallback,m?(xs(),m=a.mode,R=rg({mode:"hidden",children:R},m),f=ua(f,m,c,null),R.return=a,f.return=a,R.sibling=f,a.child=R,m=a.child,m.memoizedState=eg(c),m.childLanes=tg(s,w,c),a.memoizedState=Zm,f):(Is(a),ng(a,R))}if(M=s.memoizedState,M!==null&&(R=M.dehydrated,R!==null)){if(y)a.flags&256?(Is(a),a.flags&=-257,a=ig(s,a,c)):a.memoizedState!==null?(xs(),a.child=s.child,a.flags|=128,a=null):(xs(),m=f.fallback,R=a.mode,f=rg({mode:"visible",children:f.children},R),m=ua(m,R,c,null),m.flags|=2,f.return=a,m.return=a,f.sibling=m,a.child=f,ta(a,s.child,null,c),f=a.child,f.memoizedState=eg(c),f.childLanes=tg(s,w,c),a.memoizedState=Zm,a=m);else if(Is(a),R.data==="$!"){if(w=R.nextSibling&&R.nextSibling.dataset,w)var B=w.dgst;w=B,f=Error(r(419)),f.stack="",f.digest=w,Qc({value:f,source:null,stack:null}),a=ig(s,a,c)}else if(Qt||ou(s,a,c,!1),w=(c&s.childLanes)!==0,Qt||w){if(w=lt,w!==null){if(f=c&-c,f&42)f=1;else switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=64;break;case 268435456:f=134217728;break;default:f=0}if(f=f&(w.suspendedLanes|c)?0:f,f!==0&&f!==M.retryLane)throw M.retryLane=f,ks(s,f),Mn(w,s,f),ob}R.data==="$?"||Dg(),a=ig(s,a,c)}else R.data==="$?"?(a.flags|=128,a.child=s.child,a=Nx.bind(null,s),R._reactRetry=a,a=null):(s=M.treeContext,sn=Pr(R.nextSibling),Dn=a,Xe=!0,Mr=null,ri=!1,s!==null&&(gr[yr++]=Di,gr[yr++]=Mi,gr[yr++]=Jo,Di=s.id,Mi=s.overflow,Jo=a),a=ng(a,f.children),a.flags|=4096);return a}return m?(xs(),m=f.fallback,R=a.mode,M=s.child,B=M.sibling,f=zs(M,{mode:"hidden",children:f.children}),f.subtreeFlags=M.subtreeFlags&31457280,B!==null?m=zs(B,m):(m=ua(m,R,c,null),m.flags|=2),m.return=a,f.return=a,f.sibling=m,a.child=f,f=m,m=a.child,R=s.child.memoizedState,R===null?R=eg(c):(M=R.cachePool,M!==null?(B=zt._currentValue,M=M.parent!==B?{parent:B,pool:B}:M):M=gE(),R={baseLanes:R.baseLanes|c,cachePool:M}),m.memoizedState=R,m.childLanes=tg(s,w,c),a.memoizedState=Zm,f):(Is(a),c=s.child,s=c.sibling,c=zs(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,s!==null&&(w=a.deletions,w===null?(a.deletions=[s],a.flags|=16):w.push(s)),a.child=c,a.memoizedState=null,c)}function ng(s,a){return a=rg({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function rg(s,a){return Hb(s,a,0,null)}function ig(s,a,c){return ta(a,s.child,null,c),s=ng(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function gb(s,a,c){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),lg(s.return,a,c)}function sg(s,a,c,f,m){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=c,y.tailMode=m)}function yb(s,a,c){var f=a.pendingProps,m=f.revealOrder,y=f.tail;if(on(s,a,f.children,c),f=Bt.current,f&2)f=f&1|2,a.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&gb(s,c,a);else if(s.tag===19)gb(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(tt(Bt,f),m){case"forwards":for(c=a.child,m=null;c!==null;)s=c.alternate,s!==null&&vf(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),sg(a,!1,m,c,y);break;case"backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&vf(s)===null){a.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}sg(a,!0,c,null,y);break;case"together":sg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Vi(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Hs|=a.lanes,!(c&a.childLanes))if(s!==null){if(ou(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,c=zs(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=zs(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function og(s,a){return s.lanes&a?!0:(s=s.dependencies,!!(s!==null&&Of(s)))}function Ex(s,a,c){switch(a.tag){case 3:fs(a,a.stateNode.containerInfo),Ms(a,zt,s.memoizedState.cache),Wc();break;case 27:case 5:wc(a);break;case 4:fs(a,a.stateNode.containerInfo);break;case 10:Ms(a,a.type,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Is(a),a.flags|=128,null):c&a.child.childLanes?mb(s,a,c):(Is(a),s=Vi(s,a,c),s!==null?s.sibling:null);Is(a);break;case 19:var m=(s.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(ou(s,a,c,!1),f=(c&a.childLanes)!==0),m){if(f)return yb(s,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),tt(Bt,Bt.current),f)break;return null;case 22:case 23:return a.lanes=0,ub(s,a,c);case 24:Ms(a,zt,s.memoizedState.cache)}return Vi(s,a,c)}function _b(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)Qt=!0;else{if(!og(s,c)&&!(a.flags&128))return Qt=!1,Ex(s,a,c);Qt=!!(s.flags&131072)}else Qt=!1,Xe&&a.flags&1048576&&nE(a,pf,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var f=a.elementType,m=f._init;if(f=m(f._payload),a.type=f,typeof f=="function")Eg(f)?(s=oa(f,s),a.tag=1,a=db(null,a,f,s,c)):(a.tag=0,a=Jm(null,a,f,s,c));else{if(f!=null){if(m=f.$$typeof,m===b){a.tag=11,a=ab(null,a,f,s,c);break e}else if(m===O){a.tag=14,a=lb(null,a,f,s,c);break e}}throw a=x(f)||f,Error(r(306,a,""))}}return a;case 0:return Jm(s,a,a.type,a.pendingProps,c);case 1:return f=a.type,m=oa(f,a.pendingProps),db(s,a,f,m,c);case 3:e:{if(fs(a,a.stateNode.containerInfo),s===null)throw Error(r(387));var y=a.pendingProps;m=a.memoizedState,f=m.element,hg(s,a),cu(a,y,null,c);var w=a.memoizedState;if(y=w.cache,Ms(a,zt,y),y!==m.cache&&cg(a,[zt],c,!0),lu(),y=w.element,m.isDehydrated)if(m={element:y,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=pb(s,a,y,c);break e}else if(y!==f){f=mr(Error(r(424)),a),Qc(f),a=pb(s,a,y,c);break e}else for(sn=Pr(a.stateNode.containerInfo.firstChild),Dn=a,Xe=!0,Mr=null,ri=!0,c=hE(a,null,y,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Wc(),y===f){a=Vi(s,a,c);break e}on(s,a,y,c)}a=a.child}return a;case 26:return su(s,a),s===null?(c=bS(a.type,null,a.pendingProps,null))?a.memoizedState=c:Xe||(c=a.type,s=a.pendingProps,f=Kf(ar.current).createElement(c),f[Gt]=a,f[Vt]=s,an(f,c,s),ft(f),a.stateNode=f):a.memoizedState=bS(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return wc(a),s===null&&Xe&&(f=a.stateNode=_S(a.type,a.pendingProps,ar.current),Dn=a,ri=!0,sn=Pr(f.firstChild)),f=a.pendingProps.children,s!==null||Xe?on(s,a,f,c):a.child=ta(a,null,f,c),su(s,a),a.child;case 5:return s===null&&Xe&&((m=f=sn)&&(f=Yx(f,a.type,a.pendingProps,ri),f!==null?(a.stateNode=f,Dn=a,sn=Pr(f.firstChild),ri=!1,m=!0):m=!1),m||ea(a)),wc(a),m=a.type,y=a.pendingProps,w=s!==null?s.memoizedProps:null,f=y.children,Gg(m,y)?f=null:w!==null&&Gg(m,w)&&(a.flags|=32),a.memoizedState!==null&&(m=Nm(s,a,dx,null,null,c),wu._currentValue=m),su(s,a),on(s,a,f,c),a.child;case 6:return s===null&&Xe&&((s=c=sn)&&(c=Xx(c,a.pendingProps,ri),c!==null?(a.stateNode=c,Dn=a,sn=null,s=!0):s=!1),s||ea(a)),null;case 13:return mb(s,a,c);case 4:return fs(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=ta(a,null,f,c):on(s,a,f,c),a.child;case 11:return ab(s,a,a.type,a.pendingProps,c);case 7:return on(s,a,a.pendingProps,c),a.child;case 8:return on(s,a,a.pendingProps.children,c),a.child;case 12:return on(s,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,Ms(a,a.type,f.value),on(s,a,f.children,c),a.child;case 9:return m=a.type._context,f=a.pendingProps.children,la(a),m=gn(m),f=f(m),a.flags|=1,on(s,a,f,c),a.child;case 14:return lb(s,a,a.type,a.pendingProps,c);case 15:return cb(s,a,a.type,a.pendingProps,c);case 19:return yb(s,a,c);case 22:return ub(s,a,c);case 24:return la(a),f=gn(zt),s===null?(m=Dm(),m===null&&(m=lt,y=xm(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),a.memoizedState={parent:f,cache:m},ug(a),Ms(a,zt,m)):(s.lanes&c&&(hg(s,a),cu(a,null,null,c),lu()),m=s.memoizedState,y=a.memoizedState,m.parent!==f?(m={parent:f,cache:f},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ms(a,zt,f)):(f=y.cache,Ms(a,zt,f),f!==m.cache&&cg(a,[zt],c,!0))),on(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var ag=Qe(null),aa=null,Li=null;function Ms(s,a,c){tt(ag,a._currentValue),a._currentValue=c}function Ui(s){s._currentValue=ag.current,_t(ag)}function lg(s,a,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===c)break;s=s.return}}function cg(s,a,c,f){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var y=m.dependencies;if(y!==null){var w=m.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=m;for(var M=0;M<a.length;M++)if(R.context===a[M]){y.lanes|=c,R=y.alternate,R!==null&&(R.lanes|=c),lg(y.return,c,s),f||(w=null);break e}y=R.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(r(341));w.lanes|=c,y=w.alternate,y!==null&&(y.lanes|=c),lg(w,c,s),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function ou(s,a,c,f){s=null;for(var m=a,y=!1;m!==null;){if(!y){if(m.flags&524288)y=!0;else if(m.flags&262144)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var R=m.type;Xn(m.pendingProps.value,w.value)||(s!==null?s.push(R):s=[R])}}else if(m===hs.current){if(w=m.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(wu):s=[wu])}m=m.return}s!==null&&cg(a,s,c,f),a.flags|=262144}function Of(s){for(s=s.firstContext;s!==null;){if(!Xn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function la(s){aa=s,Li=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gn(s){return vb(aa,s)}function Df(s,a){return aa===null&&la(s),vb(s,a)}function vb(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Li===null){if(s===null)throw Error(r(308));Li=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Li=Li.next=a;return c}var Ns=!1;function ug(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ps(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Vs(s,a,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,pt&2){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,a=ff(s),eE(s,null,c),a}return hf(s,f,a,c),ff(s)}function au(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194176)!==0)){var f=a.lanes;f&=s.pendingLanes,c|=f,a.lanes=c,_s(s,c)}}function fg(s,a){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=w:y=y.next=w,c=c.next}while(c!==null);y===null?m=y=a:y=y.next=a}else m=y=a;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var dg=!1;function lu(){if(dg){var s=_l;if(s!==null)throw s}}function cu(s,a,c,f){dg=!1;var m=s.updateQueue;Ns=!1;var y=m.firstBaseUpdate,w=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var M=R,B=M.next;M.next=null,w===null?y=B:w.next=B,w=M;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==w&&(R===null?Z.firstBaseUpdate=B:R.next=B,Z.lastBaseUpdate=M))}if(y!==null){var oe=m.baseState;w=0,Z=B=M=null,R=y;do{var K=R.lane&-536870913,J=K!==R.lane;if(J?(Ke&K)===K:(f&K)===K){K!==0&&K===yl&&(dg=!0),Z!==null&&(Z=Z.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ee=s,xe=R;K=a;var St=c;switch(xe.tag){case 1:if(Ee=xe.payload,typeof Ee=="function"){oe=Ee.call(St,oe,K);break e}oe=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=xe.payload,K=typeof Ee=="function"?Ee.call(St,oe,K):Ee,K==null)break e;oe=D({},oe,K);break e;case 2:Ns=!0}}K=R.callback,K!==null&&(s.flags|=64,J&&(s.flags|=8192),J=m.callbacks,J===null?m.callbacks=[K]:J.push(K))}else J={lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(B=Z=J,M=oe):Z=Z.next=J,w|=K;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;J=R,R=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);Z===null&&(M=oe),m.baseState=M,m.firstBaseUpdate=B,m.lastBaseUpdate=Z,y===null&&(m.shared.lanes=0),Hs|=w,s.lanes=w,s.memoizedState=oe}}function Eb(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function bb(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Eb(c[s],a)}function uu(s,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&s)===s){f=void 0;var y=c.create,w=c.inst;f=y(),w.destroy=f}c=c.next}while(c!==m)}}catch(R){it(a,a.return,R)}}function Ls(s,a,c){try{var f=a.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var y=m.next;f=y;do{if((f.tag&s)===s){var w=f.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,m=a;var M=c;try{R()}catch(B){it(m,M,B)}}}f=f.next}while(f!==y)}}catch(B){it(a,a.return,B)}}function Sb(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{bb(a,c)}catch(f){it(s,s.return,f)}}}function Tb(s,a,c){c.props=oa(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){it(s,a,f)}}function ca(s,a){try{var c=s.ref;if(c!==null){var f=s.stateNode;switch(s.tag){case 26:case 27:case 5:var m=f;break;default:m=f}typeof c=="function"?s.refCleanup=c(m):c.current=m}}catch(y){it(s,a,y)}}function Jn(s,a){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(m){it(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){it(s,a,m)}else c.current=null}function wb(s){var a=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(m){it(s,s.return,m)}}function Cb(s,a,c){try{var f=s.stateNode;$x(f,s.type,c,a),f[Vt]=a}catch(m){it(s,s.return,m)}}function Ab(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function pg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ab(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function mg(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(s,c)):(a=c,a.appendChild(s)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Gf));else if(f!==4&&f!==27&&(s=s.child,s!==null))for(mg(s,a,c),s=s.sibling;s!==null;)mg(s,a,c),s=s.sibling}function Mf(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(f!==4&&f!==27&&(s=s.child,s!==null))for(Mf(s,a,c),s=s.sibling;s!==null;)Mf(s,a,c),s=s.sibling}var Bi=!1,Et=!1,gg=!1,Rb=typeof WeakSet=="function"?WeakSet:Set,Yt=null,kb=!1;function bx(s,a){if(s=s.containerInfo,qg=Zf,s=$0(s),_m(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var w=0,R=-1,M=-1,B=0,Z=0,oe=s,K=null;t:for(;;){for(var J;oe!==c||m!==0&&oe.nodeType!==3||(R=w+m),oe!==y||f!==0&&oe.nodeType!==3||(M=w+f),oe.nodeType===3&&(w+=oe.nodeValue.length),(J=oe.firstChild)!==null;)K=oe,oe=J;for(;;){if(oe===s)break t;if(K===c&&++B===m&&(R=w),K===y&&++Z===f&&(M=w),(J=oe.nextSibling)!==null)break;oe=K,K=oe.parentNode}oe=J}c=R===-1||M===-1?null:{start:R,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for($g={focusedElem:s,selectionRange:c},Zf=!1,Yt=a;Yt!==null;)if(a=Yt,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Yt=s;else for(;Yt!==null;){switch(a=Yt,y=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if(s&1024&&y!==null){s=void 0,c=a,m=y.memoizedProps,y=y.memoizedState,f=c.stateNode;try{var Ee=oa(c.type,m,c.elementType===c.type);s=f.getSnapshotBeforeUpdate(Ee,y),f.__reactInternalSnapshotBeforeUpdate=s}catch(xe){it(c,c.return,xe)}}break;case 3:if(s&1024){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)Qg(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Qg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(s&1024)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Yt=s;break}Yt=a.return}return Ee=kb,kb=!1,Ee}function Ib(s,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Hi(s,c),f&4&&uu(5,c);break;case 1:if(Hi(s,c),f&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(R){it(c,c.return,R)}else{var m=oa(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(R){it(c,c.return,R)}}f&64&&Sb(c),f&512&&ca(c,c.return);break;case 3:if(Hi(s,c),f&64&&(f=c.updateQueue,f!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{bb(f,s)}catch(R){it(c,c.return,R)}}break;case 26:Hi(s,c),f&512&&ca(c,c.return);break;case 27:case 5:Hi(s,c),a===null&&f&4&&wb(c),f&512&&ca(c,c.return);break;case 12:Hi(s,c);break;case 13:Hi(s,c),f&4&&Db(s,c);break;case 22:if(m=c.memoizedState!==null||Bi,!m){a=a!==null&&a.memoizedState!==null||Et;var y=Bi,w=Et;Bi=m,(Et=a)&&!w?Us(s,c,(c.subtreeFlags&8772)!==0):Hi(s,c),Bi=y,Et=w}f&512&&(c.memoizedProps.mode==="manual"?ca(c,c.return):Jn(c,c.return));break;default:Hi(s,c)}}function xb(s){var a=s.alternate;a!==null&&(s.alternate=null,xb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Bo(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var xt=null,Zn=!1;function zi(s,a,c){for(c=c.child;c!==null;)Ob(s,a,c),c=c.sibling}function Ob(s,a,c){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(ds,c)}catch{}switch(c.tag){case 26:Et||Jn(c,a),zi(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Et||Jn(c,a);var f=xt,m=Zn;for(xt=c.stateNode,zi(s,a,c),c=c.stateNode,a=c.attributes;a.length;)c.removeAttributeNode(a[0]);Bo(c),xt=f,Zn=m;break;case 5:Et||Jn(c,a);case 6:m=xt;var y=Zn;if(xt=null,zi(s,a,c),xt=m,Zn=y,xt!==null)if(Zn)try{s=xt,f=c.stateNode,s.nodeType===8?s.parentNode.removeChild(f):s.removeChild(f)}catch(w){it(c,a,w)}else try{xt.removeChild(c.stateNode)}catch(w){it(c,a,w)}break;case 18:xt!==null&&(Zn?(a=xt,c=c.stateNode,a.nodeType===8?Wg(a.parentNode,c):a.nodeType===1&&Wg(a,c),ku(a)):Wg(xt,c.stateNode));break;case 4:f=xt,m=Zn,xt=c.stateNode.containerInfo,Zn=!0,zi(s,a,c),xt=f,Zn=m;break;case 0:case 11:case 14:case 15:Et||Ls(2,c,a),Et||Ls(4,c,a),zi(s,a,c);break;case 1:Et||(Jn(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Tb(c,a,f)),zi(s,a,c);break;case 21:zi(s,a,c);break;case 22:Et||Jn(c,a),Et=(f=Et)||c.memoizedState!==null,zi(s,a,c),Et=f;break;default:zi(s,a,c)}}function Db(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ku(s)}catch(c){it(a,a.return,c)}}function Sx(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Rb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Rb),a;default:throw Error(r(435,s.tag))}}function yg(s,a){var c=Sx(s);a.forEach(function(f){var m=Px.bind(null,s,f);c.has(f)||(c.add(f),f.then(m,m))})}function vr(s,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f],y=s,w=a,R=w;e:for(;R!==null;){switch(R.tag){case 27:case 5:xt=R.stateNode,Zn=!1;break e;case 3:xt=R.stateNode.containerInfo,Zn=!0;break e;case 4:xt=R.stateNode.containerInfo,Zn=!0;break e}R=R.return}if(xt===null)throw Error(r(160));Ob(y,w,m),xt=null,Zn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Mb(a,s),a=a.sibling}var Nr=null;function Mb(s,a){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:vr(a,s),Er(s),f&4&&(Ls(3,s,s.return),uu(3,s),Ls(5,s,s.return));break;case 1:vr(a,s),Er(s),f&512&&(Et||c===null||Jn(c,c.return)),f&64&&Bi&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var m=Nr;if(vr(a,s),Er(s),f&512&&(Et||c===null||Jn(c,c.return)),f&4){var y=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,m=m.ownerDocument||m;t:switch(f){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Es]||y[Gt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(f),m.head.insertBefore(y,m.querySelector("head > title"))),an(y,f,c),y[Gt]=s,ft(y),f=y;break e;case"link":var w=wS("link","href",m).get(f+(c.href||""));if(w){for(var R=0;R<w.length;R++)if(y=w[R],y.getAttribute("href")===(c.href==null?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(R,1);break t}}y=m.createElement(f),an(y,f,c),m.head.appendChild(y);break;case"meta":if(w=wS("meta","content",m).get(f+(c.content||""))){for(R=0;R<w.length;R++)if(y=w[R],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(R,1);break t}}y=m.createElement(f),an(y,f,c),m.head.appendChild(y);break;default:throw Error(r(468,f))}y[Gt]=s,ft(y),f=y}s.stateNode=f}else CS(m,s.type,s.stateNode);else s.stateNode=TS(m,f,s.memoizedProps);else y!==f?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,f===null?CS(m,s.type,s.stateNode):TS(m,f,s.memoizedProps)):f===null&&s.stateNode!==null&&Cb(s,s.memoizedProps,c.memoizedProps)}break;case 27:if(f&4&&s.alternate===null){m=s.stateNode,y=s.memoizedProps;try{for(var M=m.firstChild;M;){var B=M.nextSibling,Z=M.nodeName;M[Es]||Z==="HEAD"||Z==="BODY"||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&M.rel.toLowerCase()==="stylesheet"||m.removeChild(M),M=B}for(var oe=s.type,K=m.attributes;K.length;)m.removeAttributeNode(K[0]);an(m,oe,y),m[Gt]=s,m[Vt]=y}catch(Ee){it(s,s.return,Ee)}}case 5:if(vr(a,s),Er(s),f&512&&(Et||c===null||Jn(c,c.return)),s.flags&32){m=s.stateNode;try{ur(m,"")}catch(Ee){it(s,s.return,Ee)}}f&4&&s.stateNode!=null&&(m=s.memoizedProps,Cb(s,m,c!==null?c.memoizedProps:m)),f&1024&&(gg=!0);break;case 6:if(vr(a,s),Er(s),f&4){if(s.stateNode===null)throw Error(r(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(Ee){it(s,s.return,Ee)}}break;case 3:if(Yf=null,m=Nr,Nr=Wf(a.containerInfo),vr(a,s),Nr=m,Er(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{ku(a.containerInfo)}catch(Ee){it(s,s.return,Ee)}gg&&(gg=!1,Nb(s));break;case 4:f=Nr,Nr=Wf(s.stateNode.containerInfo),vr(a,s),Er(s),Nr=f;break;case 12:vr(a,s),Er(s);break;case 13:vr(a,s),Er(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ag=zn()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,yg(s,f)));break;case 22:if(f&512&&(Et||c===null||Jn(c,c.return)),M=s.memoizedState!==null,B=c!==null&&c.memoizedState!==null,Z=Bi,oe=Et,Bi=Z||M,Et=oe||B,vr(a,s),Et=oe,Bi=Z,Er(s),a=s.stateNode,a._current=s,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,f&8192&&(a._visibility=M?a._visibility&-2:a._visibility|1,M&&(a=Bi||Et,c===null||B||a||Sl(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(c=null,a=s;;){if(a.tag===5||a.tag===26||a.tag===27){if(c===null){B=c=a;try{if(m=B.stateNode,M)y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{w=B.stateNode,R=B.memoizedProps.style;var J=R!=null&&R.hasOwnProperty("display")?R.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ee){it(B,B.return,Ee)}}}else if(a.tag===6){if(c===null){B=a;try{B.stateNode.nodeValue=M?"":B.memoizedProps}catch(Ee){it(B,B.return,Ee)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,yg(s,c))));break;case 19:vr(a,s),Er(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,yg(s,f)));break;case 21:break;default:vr(a,s),Er(s)}}function Er(s){var a=s.flags;if(a&2){try{if(s.tag!==27){e:{for(var c=s.return;c!==null;){if(Ab(c)){var f=c;break e}c=c.return}throw Error(r(160))}switch(f.tag){case 27:var m=f.stateNode,y=pg(s);Mf(s,y,m);break;case 5:var w=f.stateNode;f.flags&32&&(ur(w,""),f.flags&=-33);var R=pg(s);Mf(s,R,w);break;case 3:case 4:var M=f.stateNode.containerInfo,B=pg(s);mg(s,B,M);break;default:throw Error(r(161))}}}catch(Z){it(s,s.return,Z)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Nb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Nb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Hi(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ib(s,a.alternate,a),a=a.sibling}function Sl(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ls(4,a,a.return),Sl(a);break;case 1:Jn(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Tb(a,a.return,c),Sl(a);break;case 26:case 27:case 5:Jn(a,a.return),Sl(a);break;case 22:Jn(a,a.return),a.memoizedState===null&&Sl(a);break;default:Sl(a)}s=s.sibling}}function Us(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,m=s,y=a,w=y.flags;switch(y.tag){case 0:case 11:case 15:Us(m,y,c),uu(4,y);break;case 1:if(Us(m,y,c),f=y,m=f.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(B){it(f,f.return,B)}if(f=y,m=f.updateQueue,m!==null){var R=f.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)Eb(M[m],R)}catch(B){it(f,f.return,B)}}c&&w&64&&Sb(y),ca(y,y.return);break;case 26:case 27:case 5:Us(m,y,c),c&&f===null&&w&4&&wb(y),ca(y,y.return);break;case 12:Us(m,y,c);break;case 13:Us(m,y,c),c&&w&4&&Db(m,y);break;case 22:y.memoizedState===null&&Us(m,y,c),ca(y,y.return);break;default:Us(m,y,c)}a=a.sibling}}function _g(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&eu(c))}function vg(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&eu(s))}function Bs(s,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Pb(s,a,c,f),a=a.sibling}function Pb(s,a,c,f){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Bs(s,a,c,f),m&2048&&uu(9,a);break;case 3:Bs(s,a,c,f),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&eu(s)));break;case 12:if(m&2048){Bs(s,a,c,f),s=a.stateNode;try{var y=a.memoizedProps,w=y.id,R=y.onPostCommit;typeof R=="function"&&R(w,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(M){it(a,a.return,M)}}else Bs(s,a,c,f);break;case 23:break;case 22:y=a.stateNode,a.memoizedState!==null?y._visibility&4?Bs(s,a,c,f):hu(s,a):y._visibility&4?Bs(s,a,c,f):(y._visibility|=4,Tl(s,a,c,f,(a.subtreeFlags&10256)!==0)),m&2048&&_g(a.alternate,a);break;case 24:Bs(s,a,c,f),m&2048&&vg(a.alternate,a);break;default:Bs(s,a,c,f)}}function Tl(s,a,c,f,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=s,w=a,R=c,M=f,B=w.flags;switch(w.tag){case 0:case 11:case 15:Tl(y,w,R,M,m),uu(8,w);break;case 23:break;case 22:var Z=w.stateNode;w.memoizedState!==null?Z._visibility&4?Tl(y,w,R,M,m):hu(y,w):(Z._visibility|=4,Tl(y,w,R,M,m)),m&&B&2048&&_g(w.alternate,w);break;case 24:Tl(y,w,R,M,m),m&&B&2048&&vg(w.alternate,w);break;default:Tl(y,w,R,M,m)}a=a.sibling}}function hu(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,f=a,m=f.flags;switch(f.tag){case 22:hu(c,f),m&2048&&_g(f.alternate,f);break;case 24:hu(c,f),m&2048&&vg(f.alternate,f);break;default:hu(c,f)}a=a.sibling}}var fu=8192;function wl(s){if(s.subtreeFlags&fu)for(s=s.child;s!==null;)Vb(s),s=s.sibling}function Vb(s){switch(s.tag){case 26:wl(s),s.flags&fu&&s.memoizedState!==null&&uO(Nr,s.memoizedState,s.memoizedProps);break;case 5:wl(s);break;case 3:case 4:var a=Nr;Nr=Wf(s.stateNode.containerInfo),wl(s),Nr=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=fu,fu=16777216,wl(s),fu=a):wl(s));break;default:wl(s)}}function Lb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function du(s){var a=s.deletions;if(s.flags&16){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Yt=f,Bb(f,s)}Lb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ub(s),s=s.sibling}function Ub(s){switch(s.tag){case 0:case 11:case 15:du(s),s.flags&2048&&Ls(9,s,s.return);break;case 3:du(s);break;case 12:du(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&4&&(s.return===null||s.return.tag!==13)?(a._visibility&=-5,Nf(s)):du(s);break;default:du(s)}}function Nf(s){var a=s.deletions;if(s.flags&16){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Yt=f,Bb(f,s)}Lb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ls(8,a,a.return),Nf(a);break;case 22:c=a.stateNode,c._visibility&4&&(c._visibility&=-5,Nf(a));break;default:Nf(a)}s=s.sibling}}function Bb(s,a){for(;Yt!==null;){var c=Yt;switch(c.tag){case 0:case 11:case 15:Ls(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:eu(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Yt=f;else e:for(c=s;Yt!==null;){f=Yt;var m=f.sibling,y=f.return;if(xb(f),f===c){Yt=null;break e}if(m!==null){m.return=y,Yt=m;break e}Yt=y}}}function Tx(s,a,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(s,a,c,f){return new Tx(s,a,c,f)}function Eg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function zs(s,a){var c=s.alternate;return c===null?(c=br(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&31457280,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function zb(s,a){s.flags&=31457282;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Pf(s,a,c,f,m,y){var w=0;if(f=s,typeof s=="function")Eg(s)&&(w=1);else if(typeof s=="string")w=lO(s,c,kn.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case h:return ua(c.children,m,y,a);case d:w=8,m|=24;break;case g:return s=br(12,c,a,m|2),s.elementType=g,s.lanes=y,s;case C:return s=br(13,c,a,m),s.elementType=C,s.lanes=y,s;case A:return s=br(19,c,a,m),s.elementType=A,s.lanes=y,s;case Q:return Hb(c,m,y,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:case S:w=10;break e;case v:w=9;break e;case b:w=11;break e;case O:w=14;break e;case z:w=16,f=null;break e}w=29,c=Error(r(130,s===null?"null":typeof s,"")),f=null}return a=br(w,c,a,m),a.elementType=s,a.type=f,a.lanes=y,a}function ua(s,a,c,f){return s=br(7,s,f,a),s.lanes=c,s}function Hb(s,a,c,f){s=br(22,s,f,a),s.elementType=Q,s.lanes=c;var m={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=m._current;if(y===null)throw Error(r(456));if(!(m._pendingVisibility&2)){var w=ks(y,2);w!==null&&(m._pendingVisibility|=2,Mn(w,y,2))}},attach:function(){var y=m._current;if(y===null)throw Error(r(456));if(m._pendingVisibility&2){var w=ks(y,2);w!==null&&(m._pendingVisibility&=-3,Mn(w,y,2))}}};return s.stateNode=m,s}function bg(s,a,c){return s=br(6,s,null,a),s.lanes=c,s}function Sg(s,a,c){return a=br(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function ji(s){s.flags|=4}function jb(s,a){if(a.type!=="stylesheet"||a.state.loading&4)s.flags&=-16777217;else if(s.flags|=16777216,!AS(a)){if(a=_r.current,a!==null&&((Ke&4194176)===Ke?ii!==null:(Ke&62914560)!==Ke&&!(Ke&536870912)||a!==ii))throw Xc=Rm,sE;s.flags|=8192}}function Vf(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?gs():536870912,s.lanes|=a,Al|=a)}function pu(s,a){if(!Xe)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function dt(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(a)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&31457280,f|=m.flags&31457280,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=c,a}function wx(s,a,c){var f=a.pendingProps;switch(Cm(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(a),null;case 1:return dt(a),null;case 3:return c=a.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Ui(zt),bi(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Kc(a)?ji(a):s===null||s.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Mr!==null&&(xg(Mr),Mr=null))),dt(a),null;case 26:return c=a.memoizedState,s===null?(ji(a),c!==null?(dt(a),jb(a,c)):(dt(a),a.flags&=-16777217)):c?c!==s.memoizedState?(ji(a),dt(a),jb(a,c)):(dt(a),a.flags&=-16777217):(s.memoizedProps!==f&&ji(a),dt(a),a.flags&=-16777217),null;case 27:$a(a),c=ar.current;var m=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==f&&ji(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return dt(a),null}s=kn.current,Kc(a)?rE(a):(s=_S(m,f,c),a.stateNode=s,ji(a))}return dt(a),null;case 5:if($a(a),c=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==f&&ji(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return dt(a),null}if(s=kn.current,Kc(a))rE(a);else{switch(m=Kf(ar.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?m.createElement("select",{is:f.is}):m.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?m.createElement(c,{is:f.is}):m.createElement(c)}}s[Gt]=a,s[Vt]=f;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=s;e:switch(an(s,c,f),c){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ji(a)}}return dt(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==f&&ji(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(s=ar.current,Kc(a)){if(s=a.stateNode,c=a.memoizedProps,f=null,m=Dn,m!==null)switch(m.tag){case 27:case 5:f=m.memoizedProps}s[Gt]=a,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||fS(s.nodeValue,c)),s||ea(a)}else s=Kf(s).createTextNode(f),s[Gt]=a,a.stateNode=s}return dt(a),null;case 13:if(f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Kc(a),f!==null&&f.dehydrated!==null){if(s===null){if(!m)throw Error(r(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Gt]=a}else Wc(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;dt(a),m=!1}else Mr!==null&&(xg(Mr),Mr=null),m=!0;if(!m)return a.flags&256?(Ni(a),a):(Ni(a),null)}if(Ni(a),a.flags&128)return a.lanes=c,a;if(c=f!==null,s=s!==null&&s.memoizedState!==null,c){f=a.child,m=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(m=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==m&&(f.flags|=2048)}return c!==s&&c&&(a.child.flags|=8192),Vf(a,a.updateQueue),dt(a),null;case 4:return bi(),s===null&&Hg(a.stateNode.containerInfo),dt(a),null;case 10:return Ui(a.type),dt(a),null;case 19:if(_t(Bt),m=a.memoizedState,m===null)return dt(a),null;if(f=(a.flags&128)!==0,y=m.rendering,y===null)if(f)pu(m,!1);else{if(bt!==0||s!==null&&s.flags&128)for(s=a.child;s!==null;){if(y=vf(s),y!==null){for(a.flags|=128,pu(m,!1),s=y.updateQueue,a.updateQueue=s,Vf(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)zb(c,s),c=c.sibling;return tt(Bt,Bt.current&1|2),a.child}s=s.sibling}m.tail!==null&&zn()>Lf&&(a.flags|=128,f=!0,pu(m,!1),a.lanes=4194304)}else{if(!f)if(s=vf(y),s!==null){if(a.flags|=128,f=!0,s=s.updateQueue,a.updateQueue=s,Vf(a,s),pu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Xe)return dt(a),null}else 2*zn()-m.renderingStartTime>Lf&&c!==536870912&&(a.flags|=128,f=!0,pu(m,!1),a.lanes=4194304);m.isBackwards?(y.sibling=a.child,a.child=y):(s=m.last,s!==null?s.sibling=y:a.child=y,m.last=y)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=zn(),a.sibling=null,s=Bt.current,tt(Bt,f?s&1|2:s&1),a):(dt(a),null);case 22:case 23:return Ni(a),Im(),f=a.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?c&536870912&&!(a.flags&128)&&(dt(a),a.subtreeFlags&6&&(a.flags|=8192)):dt(a),c=a.updateQueue,c!==null&&Vf(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),s!==null&&_t(na),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ui(zt),dt(a),null;case 25:return null}throw Error(r(156,a.tag))}function Cx(s,a){switch(Cm(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ui(zt),bi(),s=a.flags,s&65536&&!(s&128)?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return $a(a),null;case 13:if(Ni(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Wc()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return _t(Bt),null;case 4:return bi(),null;case 10:return Ui(a.type),null;case 22:case 23:return Ni(a),Im(),s!==null&&_t(na),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Ui(zt),null;case 25:return null;default:return null}}function Fb(s,a){switch(Cm(a),a.tag){case 3:Ui(zt),bi();break;case 26:case 27:case 5:$a(a);break;case 4:bi();break;case 13:Ni(a);break;case 19:_t(Bt);break;case 10:Ui(a.type);break;case 22:case 23:Ni(a),Im(),s!==null&&_t(na);break;case 24:Ui(zt)}}var Ax={getCacheForType:function(s){var a=gn(zt),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c}},Rx=typeof WeakMap=="function"?WeakMap:Map,pt=0,lt=null,ze=null,Ke=0,ct=0,er=null,Fi=!1,Cl=!1,Tg=!1,qi=0,bt=0,Hs=0,ha=0,wg=0,Sr=0,Al=0,mu=null,oi=null,Cg=!1,Ag=0,Lf=1/0,Uf=null,js=null,Bf=!1,fa=null,gu=0,Rg=0,kg=null,yu=0,Ig=null;function tr(){if(pt&2&&Ke!==0)return Ke&-Ke;if(k.T!==null){var s=yl;return s!==0?s:Lg()}return qh()}function qb(){Sr===0&&(Sr=!(Ke&536870912)||Xe?Ic():536870912);var s=_r.current;return s!==null&&(s.flags|=32),Sr}function Mn(s,a,c){(s===lt&&ct===2||s.cancelPendingCommit!==null)&&(Rl(s,0),$i(s,Ke,Sr,!1)),wt(s,c),(!(pt&2)||s!==lt)&&(s===lt&&(!(pt&2)&&(ha|=c),bt===4&&$i(s,Ke,Sr,!1)),ai(s))}function $b(s,a,c){if(pt&6)throw Error(r(327));var f=!c&&(a&60)===0&&(a&s.expiredLanes)===0||ms(s,a),m=f?xx(s,a):Mg(s,a,!0),y=f;do{if(m===0){Cl&&!f&&$i(s,a,0,!1);break}else if(m===6)$i(s,a,0,!Fi);else{if(c=s.current.alternate,y&&!kx(c)){m=Mg(s,a,!1),y=!1;continue}if(m===2){if(y=a,s.errorRecoveryDisabledLanes&y)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var R=s;m=mu;var M=R.current.memoizedState.isDehydrated;if(M&&(Rl(R,w).flags|=256),w=Mg(R,w,!1),w!==2){if(Tg&&!M){R.errorRecoveryDisabledLanes|=y,ha|=y,m=4;break e}y=oi,oi=m,y!==null&&xg(y)}m=w}if(y=!1,m!==2)continue}}if(m===1){Rl(s,0),$i(s,a,0,!0);break}e:{switch(f=s,m){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){$i(f,a,Sr,!Fi);break e}break;case 2:oi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(f.finishedWork=c,f.finishedLanes=a,(a&62914560)===a&&(y=Ag+300-zn(),10<y)){if($i(f,a,Sr,!Fi),lr(f,0)!==0)break e;f.timeoutHandle=mS(Gb.bind(null,f,c,oi,Uf,Cg,a,Sr,ha,Al,Fi,2,-0,0),y);break e}Gb(f,c,oi,Uf,Cg,a,Sr,ha,Al,Fi,0,-0,0)}}break}while(!0);ai(s)}function xg(s){oi===null?oi=s:oi.push.apply(oi,s)}function Gb(s,a,c,f,m,y,w,R,M,B,Z,oe,K){var J=a.subtreeFlags;if((J&8192||(J&16785408)===16785408)&&(Tu={stylesheets:null,count:0,unsuspend:cO},Vb(a),a=hO(),a!==null)){s.cancelPendingCommit=a(Zb.bind(null,s,c,f,m,w,R,M,1,oe,K)),$i(s,y,w,!B);return}Zb(s,c,f,m,w,R,M,Z,oe,K)}function kx(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var m=c[f],y=m.getSnapshot;m=m.value;try{if(!Xn(y(),m))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function $i(s,a,c,f){a&=~wg,a&=~ha,s.suspendedLanes|=a,s.pingedLanes&=~a,f&&(s.warmLanes|=a),f=s.expirationTimes;for(var m=a;0<m;){var y=31-In(m),w=1<<y;f[y]=-1,m&=~w}c!==0&&ys(s,c,a)}function zf(){return pt&6?!0:(_u(0),!1)}function Og(){if(ze!==null){if(ct===0)var s=ze.return;else s=ze,Li=aa=null,Lm(s),ml=null,Jc=0,s=ze;for(;s!==null;)Fb(s.alternate,s),s=s.return;ze=null}}function Rl(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,Kx(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Og(),lt=s,ze=c=zs(s.current,null),Ke=a,ct=0,er=null,Fi=!1,Cl=ms(s,a),Tg=!1,Al=Sr=wg=ha=Hs=bt=0,oi=mu=null,Cg=!1,a&8&&(a|=a&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=a;0<f;){var m=31-In(f),y=1<<m;a|=s[m],f&=~y}return qi=a,uf(),c}function Kb(s,a){Ve=null,k.H=si,a===Yc?(a=lE(),ct=3):a===sE?(a=lE(),ct=4):ct=a===ob?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,er=a,ze===null&&(bt=1,xf(s,mr(a,s.current)))}function Wb(){var s=k.H;return k.H=si,s===null?si:s}function Qb(){var s=k.A;return k.A=Ax,s}function Dg(){bt=4,Fi||(Ke&4194176)!==Ke&&_r.current!==null||(Cl=!0),!(Hs&134217727)&&!(ha&134217727)||lt===null||$i(lt,Ke,Sr,!1)}function Mg(s,a,c){var f=pt;pt|=2;var m=Wb(),y=Qb();(lt!==s||Ke!==a)&&(Uf=null,Rl(s,a)),a=!1;var w=bt;e:do try{if(ct!==0&&ze!==null){var R=ze,M=er;switch(ct){case 8:Og(),w=6;break e;case 3:case 2:case 6:_r.current===null&&(a=!0);var B=ct;if(ct=0,er=null,kl(s,R,M,B),c&&Cl){w=0;break e}break;default:B=ct,ct=0,er=null,kl(s,R,M,B)}}Ix(),w=bt;break}catch(Z){Kb(s,Z)}while(!0);return a&&s.shellSuspendCounter++,Li=aa=null,pt=f,k.H=m,k.A=y,ze===null&&(lt=null,Ke=0,uf()),w}function Ix(){for(;ze!==null;)Yb(ze)}function xx(s,a){var c=pt;pt|=2;var f=Wb(),m=Qb();lt!==s||Ke!==a?(Uf=null,Lf=zn()+500,Rl(s,a)):Cl=ms(s,a);e:do try{if(ct!==0&&ze!==null){a=ze;var y=er;t:switch(ct){case 1:ct=0,er=null,kl(s,a,y,1);break;case 2:if(oE(y)){ct=0,er=null,Xb(a);break}a=function(){ct===2&&lt===s&&(ct=7),ai(s)},y.then(a,a);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:oE(y)?(ct=0,er=null,Xb(a)):(ct=0,er=null,kl(s,a,y,7));break;case 5:var w=null;switch(ze.tag){case 26:w=ze.memoizedState;case 5:case 27:var R=ze;if(!w||AS(w)){ct=0,er=null;var M=R.sibling;if(M!==null)ze=M;else{var B=R.return;B!==null?(ze=B,Hf(B)):ze=null}break t}}ct=0,er=null,kl(s,a,y,5);break;case 6:ct=0,er=null,kl(s,a,y,6);break;case 8:Og(),bt=6;break e;default:throw Error(r(462))}}Ox();break}catch(Z){Kb(s,Z)}while(!0);return Li=aa=null,k.H=f,k.A=m,pt=c,ze!==null?0:(lt=null,Ke=0,uf(),bt)}function Ox(){for(;ze!==null&&!am();)Yb(ze)}function Yb(s){var a=_b(s.alternate,s,qi);s.memoizedProps=s.pendingProps,a===null?Hf(s):ze=a}function Xb(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=fb(c,a,a.pendingProps,a.type,void 0,Ke);break;case 11:a=fb(c,a,a.pendingProps,a.type.render,a.ref,Ke);break;case 5:Lm(a);default:Fb(c,a),a=ze=zb(a,qi),a=_b(c,a,qi)}s.memoizedProps=s.pendingProps,a===null?Hf(s):ze=a}function kl(s,a,c,f){Li=aa=null,Lm(a),ml=null,Jc=0;var m=a.return;try{if(vx(s,m,a,c,Ke)){bt=1,xf(s,mr(c,s.current)),ze=null;return}}catch(y){if(m!==null)throw ze=m,y;bt=1,xf(s,mr(c,s.current)),ze=null;return}a.flags&32768?(Xe||f===1?s=!0:Cl||Ke&536870912?s=!1:(Fi=s=!0,(f===2||f===3||f===6)&&(f=_r.current,f!==null&&f.tag===13&&(f.flags|=16384))),Jb(a,s)):Hf(a)}function Hf(s){var a=s;do{if(a.flags&32768){Jb(a,Fi);return}s=a.return;var c=wx(a.alternate,a,qi);if(c!==null){ze=c;return}if(a=a.sibling,a!==null){ze=a;return}ze=a=s}while(a!==null);bt===0&&(bt=5)}function Jb(s,a){do{var c=Cx(s.alternate,s);if(c!==null){c.flags&=32767,ze=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){ze=s;return}ze=s=c}while(s!==null);bt=6,ze=null}function Zb(s,a,c,f,m,y,w,R,M,B){var Z=k.T,oe=he.p;try{he.p=2,k.T=null,Dx(s,a,c,f,oe,m,y,w,R,M,B)}finally{k.T=Z,he.p=oe}}function Dx(s,a,c,f,m,y,w,R){do Il();while(fa!==null);if(pt&6)throw Error(r(327));var M=s.finishedWork;if(f=s.finishedLanes,M===null)return null;if(s.finishedWork=null,s.finishedLanes=0,M===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var B=M.lanes|M.childLanes;if(B|=Sm,jh(s,f,B,y,w,R),s===lt&&(ze=lt=null,Ke=0),!(M.subtreeFlags&10256)&&!(M.flags&10256)||Bf||(Bf=!0,Rg=B,kg=c,Vx(Si,function(){return Il(),null})),c=(M.flags&15990)!==0,M.subtreeFlags&15990||c?(c=k.T,k.T=null,y=he.p,he.p=2,w=pt,pt|=4,bx(s,M),Mb(M,s),nx($g,s.containerInfo),Zf=!!qg,$g=qg=null,s.current=M,Ib(s,M.alternate,M),Cc(),pt=w,he.p=y,k.T=c):s.current=M,Bf?(Bf=!1,fa=s,gu=f):eS(s,B),B=s.pendingLanes,B===0&&(js=null),Rc(M.stateNode),ai(s),a!==null)for(m=s.onRecoverableError,M=0;M<a.length;M++)B=a[M],m(B.value,{componentStack:B.stack});return gu&3&&Il(),B=s.pendingLanes,f&4194218&&B&42?s===Ig?yu++:(yu=0,Ig=s):yu=0,_u(0),null}function eS(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,eu(a)))}function Il(){if(fa!==null){var s=fa,a=Rg;Rg=0;var c=Fh(gu),f=k.T,m=he.p;try{if(he.p=32>c?32:c,k.T=null,fa===null)var y=!1;else{c=kg,kg=null;var w=fa,R=gu;if(fa=null,gu=0,pt&6)throw Error(r(331));var M=pt;if(pt|=4,Ub(w.current),Pb(w,w.current,R,c),pt=M,_u(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(ds,w)}catch{}y=!0}return y}finally{he.p=m,k.T=f,eS(s,a)}}return!1}function tS(s,a,c){a=mr(c,a),a=Xm(s.stateNode,a,2),s=Vs(s,a,2),s!==null&&(wt(s,2),ai(s))}function it(s,a,c){if(s.tag===3)tS(s,s,c);else for(;a!==null;){if(a.tag===3){tS(a,s,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(js===null||!js.has(f))){s=mr(c,s),c=ib(2),f=Vs(a,c,2),f!==null&&(sb(c,f,a,s),wt(f,2),ai(f));break}}a=a.return}}function Ng(s,a,c){var f=s.pingCache;if(f===null){f=s.pingCache=new Rx;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(c)||(Tg=!0,m.add(c),s=Mx.bind(null,s,a,c),a.then(s,s))}function Mx(s,a,c){var f=s.pingCache;f!==null&&f.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,lt===s&&(Ke&c)===c&&(bt===4||bt===3&&(Ke&62914560)===Ke&&300>zn()-Ag?!(pt&2)&&Rl(s,0):wg|=c,Al===Ke&&(Al=0)),ai(s)}function nS(s,a){a===0&&(a=gs()),s=ks(s,a),s!==null&&(wt(s,a),ai(s))}function Nx(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),nS(s,c)}function Px(s,a){var c=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),nS(s,c)}function Vx(s,a){return Vo(s,a)}var jf=null,xl=null,Pg=!1,Ff=!1,Vg=!1,da=0;function ai(s){s!==xl&&s.next===null&&(xl===null?jf=xl=s:xl=xl.next=s),Ff=!0,Pg||(Pg=!0,Ux(Lx))}function _u(s,a){if(!Vg&&Ff){Vg=!0;do for(var c=!1,f=jf;f!==null;){if(s!==0){var m=f.pendingLanes;if(m===0)var y=0;else{var w=f.suspendedLanes,R=f.pingedLanes;y=(1<<31-In(42|s)+1)-1,y&=m&~(w&~R),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(c=!0,sS(f,y))}else y=Ke,y=lr(f,f===lt?y:0),!(y&3)||ms(f,y)||(c=!0,sS(f,y));f=f.next}while(c);Vg=!1}}function Lx(){Ff=Pg=!1;var s=0;da!==0&&(Gx()&&(s=da),da=0);for(var a=zn(),c=null,f=jf;f!==null;){var m=f.next,y=rS(f,a);y===0?(f.next=null,c===null?jf=m:c.next=m,m===null&&(xl=c)):(c=f,(s!==0||y&3)&&(Ff=!0)),f=m}_u(s)}function rS(s,a){for(var c=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var w=31-In(y),R=1<<w,M=m[w];M===-1?(!(R&c)||R&f)&&(m[w]=Wa(R,a)):M<=a&&(s.expiredLanes|=R),y&=~R}if(a=lt,c=Ke,c=lr(s,s===a?c:0),f=s.callbackNode,c===0||s===a&&ct===2||s.cancelPendingCommit!==null)return f!==null&&f!==null&&Ka(f),s.callbackNode=null,s.callbackPriority=0;if(!(c&3)||ms(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(f!==null&&Ka(f),Fh(c)){case 2:case 8:c=$t;break;case 32:c=Si;break;case 268435456:c=Ac;break;default:c=Si}return f=iS.bind(null,s),c=Vo(c,f),s.callbackPriority=a,s.callbackNode=c,a}return f!==null&&f!==null&&Ka(f),s.callbackPriority=2,s.callbackNode=null,2}function iS(s,a){var c=s.callbackNode;if(Il()&&s.callbackNode!==c)return null;var f=Ke;return f=lr(s,s===lt?f:0),f===0?null:($b(s,f,a),rS(s,zn()),s.callbackNode!=null&&s.callbackNode===c?iS.bind(null,s):null)}function sS(s,a){if(Il())return null;$b(s,a,!0)}function Ux(s){Wx(function(){pt&6?Vo(Pt,s):s()})}function Lg(){return da===0&&(da=Ic()),da}function oS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Yr(""+s)}function aS(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function Bx(s,a,c,f,m){if(a==="submit"&&c&&c.stateNode===m){var y=oS((m[Vt]||null).action),w=f.submitter;w&&(a=(a=w[Vt]||null)?oS(a.formAction):w.getAttribute("formAction"),a!==null&&(y=a,w=null));var R=new tl("action","action",null,f,m);s.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(da!==0){var M=w?aS(m,w):new FormData(m);Gm(c,{pending:!0,data:M,method:m.method,action:y},null,M)}}else typeof y=="function"&&(R.preventDefault(),M=w?aS(m,w):new FormData(m),Gm(c,{pending:!0,data:M,method:m.method,action:y},y,M))},currentTarget:m}]})}}for(var Ug=0;Ug<Z0.length;Ug++){var Bg=Z0[Ug],zx=Bg.toLowerCase(),Hx=Bg[0].toUpperCase()+Bg.slice(1);Dr(zx,"on"+Hx)}Dr(W0,"onAnimationEnd"),Dr(Q0,"onAnimationIteration"),Dr(Y0,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(ix,"onTransitionRun"),Dr(sx,"onTransitionStart"),Dr(ox,"onTransitionCancel"),Dr(X0,"onTransitionEnd"),Hn("onMouseEnter",["mouseout","mouseover"]),Hn("onMouseLeave",["mouseout","mouseover"]),Hn("onPointerEnter",["pointerout","pointerover"]),Hn("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function lS(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],m=f.event;f=f.listeners;e:{var y=void 0;if(a)for(var w=f.length-1;0<=w;w--){var R=f[w],M=R.instance,B=R.currentTarget;if(R=R.listener,M!==y&&m.isPropagationStopped())break e;y=R,m.currentTarget=B;try{y(m)}catch(Z){If(Z)}m.currentTarget=null,y=M}else for(w=0;w<f.length;w++){if(R=f[w],M=R.instance,B=R.currentTarget,R=R.listener,M!==y&&m.isPropagationStopped())break e;y=R,m.currentTarget=B;try{y(m)}catch(Z){If(Z)}m.currentTarget=null,y=M}}}}function qe(s,a){var c=a[Uo];c===void 0&&(c=a[Uo]=new Set);var f=s+"__bubble";c.has(f)||(cS(a,s,2,!1),c.add(f))}function zg(s,a,c){var f=0;a&&(f|=4),cS(c,s,f,a)}var qf="_reactListening"+Math.random().toString(36).slice(2);function Hg(s){if(!s[qf]){s[qf]=!0,Oc.forEach(function(c){c!=="selectionchange"&&(jx.has(c)||zg(c,!1,s),zg(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[qf]||(a[qf]=!0,zg("selectionchange",!1,a))}}function cS(s,a,c,f){switch(DS(a)){case 2:var m=pO;break;case 8:m=mO;break;default:m=ey}c=m.bind(null,a,c,s),m=void 0,!fr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(a,c,{capture:!0,passive:m}):s.addEventListener(a,c,!0):m!==void 0?s.addEventListener(a,c,{passive:m}):s.addEventListener(a,c,!1)}function jg(s,a,c,f,m){var y=f;if(!(a&1)&&!(a&2)&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var R=f.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(w===4)for(w=f.return;w!==null;){var M=w.tag;if((M===3||M===4)&&(M=w.stateNode.containerInfo,M===m||M.nodeType===8&&M.parentNode===m))return;w=w.return}for(;R!==null;){if(w=Or(R),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){f=y=w;continue e}R=R.parentNode}}f=f.return}Wh(function(){var B=y,Z=el(c),oe=[];e:{var K=J0.get(s);if(K!==void 0){var J=tl,Ee=s;switch(s){case"keypress":if(Jr(c)===0)break e;case"keydown":case"keyup":J=al;break;case"focusin":Ee="focus",J=il;break;case"focusout":Ee="blur",J=il;break;case"beforeblur":case"afterblur":J=il;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=nf;break;case W0:case Q0:case Y0:J=sl;break;case X0:J=sf;break;case"scroll":case"scrollend":J=Qh;break;case"wheel":J=ll;break;case"copy":case"cut":case"paste":J=ol;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Fc;break;case"toggle":case"beforetoggle":J=af}var xe=(a&4)!==0,St=!xe&&(s==="scroll"||s==="scrollend"),j=xe?K!==null?K+"Capture":null:K;xe=[];for(var U=B,$;U!==null;){var re=U;if($=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||$===null||j===null||(re=Fo(U,j),re!=null&&xe.push(Eu(U,re,$))),St)break;U=U.return}0<xe.length&&(K=new J(K,Ee,null,c,Z),oe.push({event:K,listeners:xe}))}}if(!(a&7)){e:{if(K=s==="mouseover"||s==="pointerover",J=s==="mouseout"||s==="pointerout",K&&c!==hr&&(Ee=c.relatedTarget||c.fromElement)&&(Or(Ee)||Ee[Ti]))break e;if((J||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,J?(Ee=c.relatedTarget||c.toElement,J=B,Ee=Ee?Or(Ee):null,Ee!==null&&(St=ue(Ee),xe=Ee.tag,Ee!==St||xe!==5&&xe!==27&&xe!==6)&&(Ee=null)):(J=null,Ee=B),J!==Ee)){if(xe=dr,re="onMouseLeave",j="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(xe=Fc,re="onPointerLeave",j="onPointerEnter",U="pointer"),St=J==null?K:bs(J),$=Ee==null?K:bs(Ee),K=new xe(re,U+"leave",J,c,Z),K.target=St,K.relatedTarget=$,re=null,Or(Z)===B&&(xe=new xe(j,U+"enter",Ee,c,Z),xe.target=$,xe.relatedTarget=St,re=xe),St=re,J&&Ee)t:{for(xe=J,j=Ee,U=0,$=xe;$;$=Ol($))U++;for($=0,re=j;re;re=Ol(re))$++;for(;0<U-$;)xe=Ol(xe),U--;for(;0<$-U;)j=Ol(j),$--;for(;U--;){if(xe===j||j!==null&&xe===j.alternate)break t;xe=Ol(xe),j=Ol(j)}xe=null}else xe=null;J!==null&&uS(oe,K,J,xe,!1),Ee!==null&&St!==null&&uS(oe,St,Ee,xe,!0)}}e:{if(K=B?bs(B):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var ye=L0;else if(Ut(K))if(U0)ye=ex;else{ye=JI;var Be=XI}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?B&&Vc(B.elementType)&&(ye=L0):ye=ZI;if(ye&&(ye=ye(s,B))){Oi(oe,ye,c,Z);break e}Be&&Be(s,K,B),s==="focusout"&&B&&K.type==="number"&&B.memoizedProps.value!=null&&Za(K,"number",K.value)}switch(Be=B?bs(B):window,s){case"focusin":(Ut(Be)||Be.contentEditable==="true")&&(cl=Be,vm=B,Gc=null);break;case"focusout":Gc=vm=cl=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,G0(oe,c,Z);break;case"selectionchange":if(rx)break;case"keydown":case"keyup":G0(oe,c,Z)}var be;if(ti)e:{switch(s){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else $e?Y(s,c)&&(we="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(we="onCompositionStart");we&&(T&&c.locale!=="ko"&&($e||we!=="onCompositionStart"?we==="onCompositionEnd"&&$e&&(be=Uc()):(Xr=Z,Rs="value"in Xr?Xr.value:Xr.textContent,$e=!0)),Be=$f(B,we),0<Be.length&&(we=new Hc(we,s,null,c,Z),oe.push({event:we,listeners:Be}),be?we.data=be:(be=ce(c),be!==null&&(we.data=be)))),(be=E?Lt(s,c):Ge(s,c))&&(we=$f(B,"onBeforeInput"),0<we.length&&(Be=new Hc("onBeforeInput","beforeinput",null,c,Z),oe.push({event:Be,listeners:we}),Be.data=be)),Bx(oe,s,B,c,Z)}lS(oe,a)})}function Eu(s,a,c){return{instance:s,listener:a,currentTarget:c}}function $f(s,a){for(var c=a+"Capture",f=[];s!==null;){var m=s,y=m.stateNode;m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Fo(s,c),m!=null&&f.unshift(Eu(s,m,y)),m=Fo(s,a),m!=null&&f.push(Eu(s,m,y))),s=s.return}return f}function Ol(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function uS(s,a,c,f,m){for(var y=a._reactName,w=[];c!==null&&c!==f;){var R=c,M=R.alternate,B=R.stateNode;if(R=R.tag,M!==null&&M===f)break;R!==5&&R!==26&&R!==27||B===null||(M=B,m?(B=Fo(c,y),B!=null&&w.unshift(Eu(c,B,M))):m||(B=Fo(c,y),B!=null&&w.push(Eu(c,B,M)))),c=c.return}w.length!==0&&s.push({event:a,listeners:w})}var Fx=/\r\n?/g,qx=/\u0000|\uFFFD/g;function hS(s){return(typeof s=="string"?s:""+s).replace(Fx,`
`).replace(qx,"")}function fS(s,a){return a=hS(a),hS(s)===a}function Gf(){}function rt(s,a,c,f,m,y){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||ur(s,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&ur(s,""+f);break;case"className":ws(s,"class",f);break;case"tabIndex":ws(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(s,c,f);break;case"style":Kh(s,f,y);break;case"data":if(a!=="object"){ws(s,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Yr(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&rt(s,a,"name",m.name,m,null),rt(s,a,"formEncType",m.formEncType,m,null),rt(s,a,"formMethod",m.formMethod,m,null),rt(s,a,"formTarget",m.formTarget,m,null)):(rt(s,a,"encType",m.encType,m,null),rt(s,a,"method",m.method,m,null),rt(s,a,"target",m.target,m,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Yr(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=Gf);break;case"onScroll":f!=null&&qe("scroll",s);break;case"onScrollEnd":f!=null&&qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=Yr(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":qe("beforetoggle",s),qe("toggle",s),Ts(s,"popover",f);break;case"xlinkActuate":cr(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":cr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":cr(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":cr(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":cr(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":cr(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":cr(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":cr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":cr(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ts(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=fm.get(c)||c,Ts(s,c,f))}}function Fg(s,a,c,f,m,y){switch(c){case"style":Kh(s,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof f=="string"?ur(s,f):(typeof f=="number"||typeof f=="bigint")&&ur(s,""+f);break;case"onScroll":f!=null&&qe("scroll",s);break;case"onScrollEnd":f!=null&&qe("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Gf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xa.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),a=c.slice(2,m?c.length-7:void 0),y=s[Vt]||null,y=y!=null?y[c]:null,typeof y=="function"&&s.removeEventListener(a,y,m),typeof f=="function")){typeof y!="function"&&y!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,f,m);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):Ts(s,c,f)}}}function an(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",s),qe("load",s);var f=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var w=c[y];if(w!=null)switch(y){case"src":f=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:rt(s,a,y,w,c,null)}}m&&rt(s,a,"srcSet",c.srcSet,c,null),f&&rt(s,a,"src",c.src,c,null);return;case"input":qe("invalid",s);var R=y=w=m=null,M=null,B=null;for(f in c)if(c.hasOwnProperty(f)){var Z=c[f];if(Z!=null)switch(f){case"name":m=Z;break;case"type":w=Z;break;case"checked":M=Z;break;case"defaultChecked":B=Z;break;case"value":y=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:rt(s,a,f,Z,c,null)}}Ho(s,y,R,M,B,w,m,!1),zo(s);return;case"select":qe("invalid",s),f=w=y=null;for(m in c)if(c.hasOwnProperty(m)&&(R=c[m],R!=null))switch(m){case"value":y=R;break;case"defaultValue":w=R;break;case"multiple":f=R;default:rt(s,a,m,R,c,null)}a=y,c=w,s.multiple=!!f,a!=null?Ye(s,!!f,a,!1):c!=null&&Ye(s,!!f,c,!0);return;case"textarea":qe("invalid",s),y=m=f=null;for(w in c)if(c.hasOwnProperty(w)&&(R=c[w],R!=null))switch(w){case"value":f=R;break;case"defaultValue":m=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:rt(s,a,w,R,c,null)}As(s,f,m,y),zo(s);return;case"option":for(M in c)if(c.hasOwnProperty(M)&&(f=c[M],f!=null))switch(M){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:rt(s,a,M,f,c,null)}return;case"dialog":qe("cancel",s),qe("close",s);break;case"iframe":case"object":qe("load",s);break;case"video":case"audio":for(f=0;f<vu.length;f++)qe(vu[f],s);break;case"image":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"embed":case"source":case"link":qe("error",s),qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in c)if(c.hasOwnProperty(B)&&(f=c[B],f!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:rt(s,a,B,f,c,null)}return;default:if(Vc(a)){for(Z in c)c.hasOwnProperty(Z)&&(f=c[Z],f!==void 0&&Fg(s,a,Z,f,c,void 0));return}}for(R in c)c.hasOwnProperty(R)&&(f=c[R],f!=null&&rt(s,a,R,f,c,null))}function $x(s,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,w=null,R=null,M=null,B=null,Z=null;for(J in c){var oe=c[J];if(c.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":M=oe;default:f.hasOwnProperty(J)||rt(s,a,J,null,f,oe)}}for(var K in f){var J=f[K];if(oe=c[K],f.hasOwnProperty(K)&&(J!=null||oe!=null))switch(K){case"type":y=J;break;case"name":m=J;break;case"checked":B=J;break;case"defaultChecked":Z=J;break;case"value":w=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:J!==oe&&rt(s,a,K,J,f,oe)}}Cs(s,w,R,M,B,Z,y,m);return;case"select":J=w=R=K=null;for(y in c)if(M=c[y],c.hasOwnProperty(y)&&M!=null)switch(y){case"value":break;case"multiple":J=M;default:f.hasOwnProperty(y)||rt(s,a,y,null,f,M)}for(m in f)if(y=f[m],M=c[m],f.hasOwnProperty(m)&&(y!=null||M!=null))switch(m){case"value":K=y;break;case"defaultValue":R=y;break;case"multiple":w=y;default:y!==M&&rt(s,a,m,y,f,M)}a=R,c=w,f=J,K!=null?Ye(s,!!c,K,!1):!!f!=!!c&&(a!=null?Ye(s,!!c,a,!0):Ye(s,!!c,c?[]:"",!1));return;case"textarea":J=K=null;for(R in c)if(m=c[R],c.hasOwnProperty(R)&&m!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:rt(s,a,R,null,f,m)}for(w in f)if(m=f[w],y=c[w],f.hasOwnProperty(w)&&(m!=null||y!=null))switch(w){case"value":K=m;break;case"defaultValue":J=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&rt(s,a,w,m,f,y)}jo(s,K,J);return;case"option":for(var Ee in c)if(K=c[Ee],c.hasOwnProperty(Ee)&&K!=null&&!f.hasOwnProperty(Ee))switch(Ee){case"selected":s.selected=!1;break;default:rt(s,a,Ee,null,f,K)}for(M in f)if(K=f[M],J=c[M],f.hasOwnProperty(M)&&K!==J&&(K!=null||J!=null))switch(M){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:rt(s,a,M,K,f,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in c)K=c[xe],c.hasOwnProperty(xe)&&K!=null&&!f.hasOwnProperty(xe)&&rt(s,a,xe,null,f,K);for(B in f)if(K=f[B],J=c[B],f.hasOwnProperty(B)&&K!==J&&(K!=null||J!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,a));break;default:rt(s,a,B,K,f,J)}return;default:if(Vc(a)){for(var St in c)K=c[St],c.hasOwnProperty(St)&&K!==void 0&&!f.hasOwnProperty(St)&&Fg(s,a,St,void 0,f,K);for(Z in f)K=f[Z],J=c[Z],!f.hasOwnProperty(Z)||K===J||K===void 0&&J===void 0||Fg(s,a,Z,K,f,J);return}}for(var j in c)K=c[j],c.hasOwnProperty(j)&&K!=null&&!f.hasOwnProperty(j)&&rt(s,a,j,null,f,K);for(oe in f)K=f[oe],J=c[oe],!f.hasOwnProperty(oe)||K===J||K==null&&J==null||rt(s,a,oe,K,f,J)}var qg=null,$g=null;function Kf(s){return s.nodeType===9?s:s.ownerDocument}function dS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pS(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Gg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kg=null;function Gx(){var s=window.event;return s&&s.type==="popstate"?s===Kg?!1:(Kg=s,!0):(Kg=null,!1)}var mS=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,gS=typeof Promise=="function"?Promise:void 0,Wx=typeof queueMicrotask=="function"?queueMicrotask:typeof gS<"u"?function(s){return gS.resolve(null).then(s).catch(Qx)}:mS;function Qx(s){setTimeout(function(){throw s})}function Wg(s,a){var c=a,f=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){s.removeChild(m),ku(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);ku(a)}function Qg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Qg(c),Bo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function Yx(s,a,c,f){for(;s.nodeType===1;){var m=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[Es])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==m.rel||s.getAttribute("href")!==(m.href==null?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Pr(s.nextSibling),s===null)break}return null}function Xx(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Pr(s.nextSibling),s===null))return null;return s}function Pr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}function yS(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}function _S(s,a,c){switch(a=Kf(c),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}var Tr=new Map,vS=new Set;function Wf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var Gi=he.d;he.d={f:Jx,r:Zx,D:eO,C:tO,L:nO,m:rO,X:sO,S:iO,M:oO};function Jx(){var s=Gi.f(),a=zf();return s||a}function Zx(s){var a=wi(s);a!==null&&a.tag===5&&a.type==="form"?GE(a):Gi.r(s)}var Dl=typeof document>"u"?null:document;function ES(s,a,c){var f=Dl;if(f&&typeof a=="string"&&a){var m=vt(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),vS.has(m)||(vS.add(m),s={rel:s,crossOrigin:c,href:a},f.querySelector(m)===null&&(a=f.createElement("link"),an(a,"link",s),ft(a),f.head.appendChild(a)))}}function eO(s){Gi.D(s),ES("dns-prefetch",s,null)}function tO(s,a){Gi.C(s,a),ES("preconnect",s,a)}function nO(s,a,c){Gi.L(s,a,c);var f=Dl;if(f&&s&&a){var m='link[rel="preload"][as="'+vt(a)+'"]';a==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+vt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+vt(c.imageSizes)+'"]')):m+='[href="'+vt(s)+'"]';var y=m;switch(a){case"style":y=Ml(s);break;case"script":y=Nl(s)}Tr.has(y)||(s=D({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),Tr.set(y,s),f.querySelector(m)!==null||a==="style"&&f.querySelector(bu(y))||a==="script"&&f.querySelector(Su(y))||(a=f.createElement("link"),an(a,"link",s),ft(a),f.head.appendChild(a)))}}function rO(s,a){Gi.m(s,a);var c=Dl;if(c&&s){var f=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+vt(f)+'"][href="'+vt(s)+'"]',y=m;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Nl(s)}if(!Tr.has(y)&&(s=D({rel:"modulepreload",href:s},a),Tr.set(y,s),c.querySelector(m)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Su(y)))return}f=c.createElement("link"),an(f,"link",s),ft(f),c.head.appendChild(f)}}}function iO(s,a,c){Gi.S(s,a,c);var f=Dl;if(f&&s){var m=Ss(f).hoistableStyles,y=Ml(s);a=a||"default";var w=m.get(y);if(!w){var R={loading:0,preload:null};if(w=f.querySelector(bu(y)))R.loading=5;else{s=D({rel:"stylesheet",href:s,"data-precedence":a},c),(c=Tr.get(y))&&Yg(s,c);var M=w=f.createElement("link");ft(M),an(M,"link",s),M._p=new Promise(function(B,Z){M.onload=B,M.onerror=Z}),M.addEventListener("load",function(){R.loading|=1}),M.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Qf(w,a,f)}w={type:"stylesheet",instance:w,count:1,state:R},m.set(y,w)}}}function sO(s,a){Gi.X(s,a);var c=Dl;if(c&&s){var f=Ss(c).hoistableScripts,m=Nl(s),y=f.get(m);y||(y=c.querySelector(Su(m)),y||(s=D({src:s,async:!0},a),(a=Tr.get(m))&&Xg(s,a),y=c.createElement("script"),ft(y),an(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(m,y))}}function oO(s,a){Gi.M(s,a);var c=Dl;if(c&&s){var f=Ss(c).hoistableScripts,m=Nl(s),y=f.get(m);y||(y=c.querySelector(Su(m)),y||(s=D({src:s,async:!0,type:"module"},a),(a=Tr.get(m))&&Xg(s,a),y=c.createElement("script"),ft(y),an(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(m,y))}}function bS(s,a,c,f){var m=(m=ar.current)?Wf(m):null;if(!m)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Ml(c.href),c=Ss(m).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Ml(c.href);var y=Ss(m).hoistableStyles,w=y.get(s);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,w),(y=m.querySelector(bu(s)))&&!y._p&&(w.instance=y,w.state.loading=5),Tr.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Tr.set(s,c),y||aO(m,s,c,w.state))),a&&f===null)throw Error(r(528,""));return w}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Nl(c),c=Ss(m).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ml(s){return'href="'+vt(s)+'"'}function bu(s){return'link[rel="stylesheet"]['+s+"]"}function SS(s){return D({},s,{"data-precedence":s.precedence,precedence:null})}function aO(s,a,c,f){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=s.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),an(a,"link",c),ft(a),s.head.appendChild(a))}function Nl(s){return'[src="'+vt(s)+'"]'}function Su(s){return"script[async]"+s}function TS(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=s.querySelector('style[data-href~="'+vt(c.href)+'"]');if(f)return a.instance=f,ft(f),f;var m=D({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),ft(f),an(f,"style",m),Qf(f,c.precedence,s),a.instance=f;case"stylesheet":m=Ml(c.href);var y=s.querySelector(bu(m));if(y)return a.state.loading|=4,a.instance=y,ft(y),y;f=SS(c),(m=Tr.get(m))&&Yg(f,m),y=(s.ownerDocument||s).createElement("link"),ft(y);var w=y;return w._p=new Promise(function(R,M){w.onload=R,w.onerror=M}),an(y,"link",f),a.state.loading|=4,Qf(y,c.precedence,s),a.instance=y;case"script":return y=Nl(c.src),(m=s.querySelector(Su(y)))?(a.instance=m,ft(m),m):(f=c,(m=Tr.get(y))&&(f=D({},c),Xg(f,m)),s=s.ownerDocument||s,m=s.createElement("script"),ft(m),an(m,"link",f),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&!(a.state.loading&4)&&(f=a.instance,a.state.loading|=4,Qf(f,c.precedence,s));return a.instance}function Qf(s,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=f.length?f[f.length-1]:null,y=m,w=0;w<f.length;w++){var R=f[w];if(R.dataset.precedence===a)y=R;else if(y!==m)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function Yg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Xg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Yf=null;function wS(s,a,c){if(Yf===null){var f=new Map,m=Yf=new Map;m.set(c,f)}else m=Yf,f=m.get(c),f||(f=new Map,m.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),m=0;m<c.length;m++){var y=c[m];if(!(y[Es]||y[Gt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(a)||"";w=s+w;var R=f.get(w);R?R.push(y):f.set(w,[y])}}return f}function CS(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function lO(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function AS(s){return!(s.type==="stylesheet"&&!(s.state.loading&3))}var Tu=null;function cO(){}function uO(s,a,c){if(Tu===null)throw Error(r(475));var f=Tu;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&!(a.state.loading&4)){if(a.instance===null){var m=Ml(c.href),y=s.querySelector(bu(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=Xf.bind(f),s.then(f,f)),a.state.loading|=4,a.instance=y,ft(y);return}y=s.ownerDocument||s,c=SS(c),(m=Tr.get(m))&&Yg(c,m),y=y.createElement("link"),ft(y);var w=y;w._p=new Promise(function(R,M){w.onload=R,w.onerror=M}),an(y,"link",c),a.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(a,s),(s=a.state.preload)&&!(a.state.loading&3)&&(f.count++,a=Xf.bind(f),s.addEventListener("load",a),s.addEventListener("error",a))}}function hO(){if(Tu===null)throw Error(r(475));var s=Tu;return s.stylesheets&&s.count===0&&Jg(s,s.stylesheets),0<s.count?function(a){var c=setTimeout(function(){if(s.stylesheets&&Jg(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c)}}:null}function Xf(){if(this.count--,this.count===0){if(this.stylesheets)Jg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Jf=null;function Jg(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Jf=new Map,a.forEach(fO,s),Jf=null,Xf.call(s))}function fO(s,a){if(!(a.state.loading&4)){var c=Jf.get(s);if(c)var f=c.get(null);else{c=new Map,Jf.set(s,c);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var w=m[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),f=w)}f&&c.set(null,f)}m=a.instance,w=m.getAttribute("data-precedence"),y=c.get(w)||f,y===f&&c.set(null,m),c.set(w,m),this.count++,f=Xf.bind(this),m.addEventListener("load",f),m.addEventListener("error",f),y?y.parentNode.insertBefore(m,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var wu={$$typeof:S,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function dO(s,a,c,f,m,y,w,R){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qa(0),this.hiddenUpdates=Qa(null),this.identifierPrefix=f,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function RS(s,a,c,f,m,y,w,R,M,B,Z,oe){return s=new dO(s,a,c,w,R,M,B,oe),a=1,y===!0&&(a|=24),y=br(3,null,null,a),s.current=y,y.stateNode=s,a=xm(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:f,isDehydrated:c,cache:a},ug(y),s}function kS(s){return s?(s=fl,s):fl}function IS(s,a,c,f,m,y){m=kS(m),f.context===null?f.context=m:f.pendingContext=m,f=Ps(a),f.payload={element:c},y=y===void 0?null:y,y!==null&&(f.callback=y),c=Vs(s,f,a),c!==null&&(Mn(c,s,a),au(c,s,a))}function xS(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Zg(s,a){xS(s,a),(s=s.alternate)&&xS(s,a)}function OS(s){if(s.tag===13){var a=ks(s,67108864);a!==null&&Mn(a,s,67108864),Zg(s,67108864)}}var Zf=!0;function pO(s,a,c,f){var m=k.T;k.T=null;var y=he.p;try{he.p=2,ey(s,a,c,f)}finally{he.p=y,k.T=m}}function mO(s,a,c,f){var m=k.T;k.T=null;var y=he.p;try{he.p=8,ey(s,a,c,f)}finally{he.p=y,k.T=m}}function ey(s,a,c,f){if(Zf){var m=ty(f);if(m===null)jg(s,a,f,ed,c),MS(s,f);else if(yO(m,s,a,c,f))f.stopPropagation();else if(MS(s,f),a&4&&-1<gO.indexOf(s)){for(;m!==null;){var y=wi(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=xr(y.pendingLanes);if(w!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var M=1<<31-In(w);R.entanglements[1]|=M,w&=~M}ai(y),!(pt&6)&&(Lf=zn()+500,_u(0))}}break;case 13:R=ks(y,2),R!==null&&Mn(R,y,2),zf(),Zg(y,2)}if(y=ty(f),y===null&&jg(s,a,f,ed,c),y===m)break;m=y}m!==null&&f.stopPropagation()}else jg(s,a,f,null,c)}}function ty(s){return s=el(s),ny(s)}var ed=null;function ny(s){if(ed=null,s=Or(s),s!==null){var a=ue(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=He(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return ed=s,null}function DS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uh()){case Pt:return 2;case $t:return 8;case Si:case Bh:return 32;case Ac:return 268435456;default:return 32}default:return 32}}var ry=!1,Fs=null,qs=null,$s=null,Cu=new Map,Au=new Map,Gs=[],gO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function MS(s,a){switch(s){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Cu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(a.pointerId)}}function Ru(s,a,c,f,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[m]},a!==null&&(a=wi(a),a!==null&&OS(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function yO(s,a,c,f,m){switch(a){case"focusin":return Fs=Ru(Fs,s,a,c,f,m),!0;case"dragenter":return qs=Ru(qs,s,a,c,f,m),!0;case"mouseover":return $s=Ru($s,s,a,c,f,m),!0;case"pointerover":var y=m.pointerId;return Cu.set(y,Ru(Cu.get(y)||null,s,a,c,f,m)),!0;case"gotpointercapture":return y=m.pointerId,Au.set(y,Ru(Au.get(y)||null,s,a,c,f,m)),!0}return!1}function NS(s){var a=Or(s.target);if(a!==null){var c=ue(a);if(c!==null){if(a=c.tag,a===13){if(a=He(c),a!==null){s.blockedOn=a,vs(s.priority,function(){if(c.tag===13){var f=tr(),m=ks(c,f);m!==null&&Mn(m,c,f),Zg(c,f)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function td(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=ty(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);hr=f,c.target.dispatchEvent(f),hr=null}else return a=wi(c),a!==null&&OS(a),s.blockedOn=c,!1;a.shift()}return!0}function PS(s,a,c){td(s)&&c.delete(a)}function _O(){ry=!1,Fs!==null&&td(Fs)&&(Fs=null),qs!==null&&td(qs)&&(qs=null),$s!==null&&td($s)&&($s=null),Cu.forEach(PS),Au.forEach(PS)}function nd(s,a){s.blockedOn===a&&(s.blockedOn=null,ry||(ry=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_O)))}var rd=null;function VS(s){rd!==s&&(rd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){rd===s&&(rd=null);for(var a=0;a<s.length;a+=3){var c=s[a],f=s[a+1],m=s[a+2];if(typeof f!="function"){if(ny(f||c)===null)continue;break}var y=wi(c);y!==null&&(s.splice(a,3),a-=3,Gm(y,{pending:!0,data:m,method:c.method,action:f},f,m))}}))}function ku(s){function a(M){return nd(M,s)}Fs!==null&&nd(Fs,s),qs!==null&&nd(qs,s),$s!==null&&nd($s,s),Cu.forEach(a),Au.forEach(a);for(var c=0;c<Gs.length;c++){var f=Gs[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<Gs.length&&(c=Gs[0],c.blockedOn===null);)NS(c),c.blockedOn===null&&Gs.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var m=c[f],y=c[f+1],w=m[Vt]||null;if(typeof y=="function")w||VS(c);else if(w){var R=null;if(y&&y.hasAttribute("formAction")){if(m=y,w=y[Vt]||null)R=w.formAction;else if(ny(m)!==null)continue}else R=w.action;typeof R=="function"?c[f+1]=R:(c.splice(f,3),f-=3),VS(c)}}}function iy(s){this._internalRoot=s}id.prototype.render=iy.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,f=tr();IS(c,f,s,a,null,null)},id.prototype.unmount=iy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;s.tag===0&&Il(),IS(s.current,2,null,s,null,null),zf(),a[Ti]=null}};function id(s){this._internalRoot=s}id.prototype.unstable_scheduleHydration=function(s){if(s){var a=qh();s={blockedOn:null,target:s,priority:a};for(var c=0;c<Gs.length&&a!==0&&a<Gs[c].priority;c++);Gs.splice(c,0,s),c===0&&NS(s)}};var LS=e.version;if(LS!=="19.0.0")throw Error(r(527,LS,"19.0.0"));he.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=le(a),s=s!==null?ve(s):null,s=s===null?null:s.stateNode,s};var vO={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:k,findFiberByHostInstance:Or,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{ds=sd.inject(vO),mn=sd}catch{}}return xu.createRoot=function(s,a){if(!i(s))throw Error(r(299));var c=!1,f="",m=eb,y=tb,w=nb,R=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks)),a=RS(s,1,!1,null,null,c,f,m,y,w,R,null),s[Ti]=a.current,Hg(s.nodeType===8?s.parentNode:s),new iy(a)},xu.hydrateRoot=function(s,a,c){if(!i(s))throw Error(r(299));var f=!1,m="",y=eb,w=tb,R=nb,M=null,B=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(M=c.unstable_transitionCallbacks),c.formState!==void 0&&(B=c.formState)),a=RS(s,1,!0,a,c??null,f,m,y,w,R,M,B),a.context=kS(null),c=a.current,f=tr(),m=Ps(f),m.callback=null,Vs(c,m,f),a.current.lanes=f,wt(a,f),ai(a),s[Ti]=a.current,Hg(s),new id(a)},xu.version="19.0.0",xu}var KS;function xO(){if(KS)return ay.exports;KS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ay.exports=IO(),ay.exports}var OO=xO(),Ou={},WS;function DO(){if(WS)return Ou;WS=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.parse=l,Ou.serialize=d;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function l(v,S){const b=new o,C=v.length;if(C<2)return b;const A=(S==null?void 0:S.decode)||g;let O=0;do{const z=v.indexOf("=",O);if(z===-1)break;const Q=v.indexOf(";",O),F=Q===-1?C:Q;if(z>F){O=v.lastIndexOf(";",z-1)+1;continue}const W=u(v,O,z),X=h(v,z,W),N=v.slice(W,X);if(b[N]===void 0){let x=u(v,z+1,F),k=h(v,F,x);const D=A(v.slice(x,k));b[N]=D}O=F+1}while(O<C);return b}function u(v,S,b){do{const C=v.charCodeAt(S);if(C!==32&&C!==9)return S}while(++S<b);return b}function h(v,S,b){for(;S>b;){const C=v.charCodeAt(--S);if(C!==32&&C!==9)return S+1}return b}function d(v,S,b){const C=(b==null?void 0:b.encode)||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const A=C(S);if(!e.test(A))throw new TypeError(`argument val is invalid: ${S}`);let O=v+"="+A;if(!b)return O;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);O+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);O+="; Domain="+b.domain}if(b.path){if(!r.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);O+="; Path="+b.path}if(b.expires){if(!_(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);O+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(O+="; HttpOnly"),b.secure&&(O+="; Secure"),b.partitioned&&(O+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":O+="; Priority=Low";break;case"medium":O+="; Priority=Medium";break;case"high":O+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"none":O+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return O}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function _(v){return i.call(v)==="[object Date]"}return Ou}DO();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QS="popstate";function MO(n={}){function e(r,i){let{pathname:o,search:l,hash:u}=r.location;return e_("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Ju(i)}return PO(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NO(){return Math.random().toString(36).substring(2,10)}function YS(n,e){return{usr:n.state,key:n.key,idx:e}}function e_(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?dc(e):e,state:t,key:e&&e.key||r||NO()}}function Ju({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function dc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function PO(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u="POP",h=null,d=g();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function g(){return(l.state||{idx:null}).idx}function _(){u="POP";let A=g(),O=A==null?null:A-d;d=A,h&&h({action:u,location:C.location,delta:O})}function v(A,O){u="PUSH";let z=e_(C.location,A,O);d=g()+1;let Q=YS(z,d),F=C.createHref(z);try{l.pushState(Q,"",F)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;i.location.assign(F)}o&&h&&h({action:u,location:C.location,delta:1})}function S(A,O){u="REPLACE";let z=e_(C.location,A,O);d=g();let Q=YS(z,d),F=C.createHref(z);l.replaceState(Q,"",F),o&&h&&h({action:u,location:C.location,delta:0})}function b(A){let O=i.location.origin!=="null"?i.location.origin:i.location.href,z=typeof A=="string"?A:Ju(A);return z=z.replace(/ $/,"%20"),gt(O,`No window.location.(origin|href) available to create URL for href: ${z}`),new URL(z,O)}let C={get action(){return u},get location(){return n(i,l)},listen(A){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(QS,_),h=A,()=>{i.removeEventListener(QS,_),h=null}},createHref(A){return e(i,A)},createURL:b,encodeLocation(A){let O=b(A);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:v,replace:S,go(A){return l.go(A)}};return C}function sC(n,e,t="/"){return VO(n,e,t,!1)}function VO(n,e,t,r){let i=typeof e=="string"?dc(e):e,o=yo(i.pathname||"/",t);if(o==null)return null;let l=oC(n);LO(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let d=WO(o);u=GO(l[h],d,r)}return u}function oC(n,e=[],t=[],r=""){let i=(o,l,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(gt(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let d=Ji([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),oC(o.children,e,g,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:qO(d,o.index),routesMeta:g})};return n.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let h of aC(o.path))i(o,l,h)}),e}function aC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=aC(r.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...l),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function LO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$O(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var UO=/^:[\w-]+$/,BO=3,zO=2,HO=1,jO=10,FO=-2,XS=n=>n==="*";function qO(n,e){let t=n.split("/"),r=t.length;return t.some(XS)&&(r+=FO),e&&(r+=zO),t.filter(i=>!XS(i)).reduce((i,o)=>i+(UO.test(o)?BO:o===""?HO:jO),r)}function $O(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function GO(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",l=[];for(let u=0;u<r.length;++u){let h=r[u],d=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",_=Bd({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},g),v=h.route;if(!_&&d&&t&&!r[r.length-1].route.index&&(_=Bd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!_)return null;Object.assign(i,_.params),l.push({params:i,pathname:Ji([o,_.pathname]),pathnameBase:JO(Ji([o,_.pathnameBase])),route:v}),_.pathnameBase!=="/"&&(o=Ji([o,_.pathnameBase]))}return l}function Bd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=KO(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,{paramName:g,isOptional:_},v)=>{if(g==="*"){let b=u[v]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const S=u[v];return _&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:n}}function KO(n,e=!1,t=!0){pi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function WO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function yo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function QO(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?dc(n):n;return{pathname:t?t.startsWith("/")?t:YO(t,e):e,search:ZO(r),hash:eD(i)}}function YO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function hy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function lC(n){let e=XO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function cC(n,e,t,r=!1){let i;typeof n=="string"?i=dc(n):(i={...n},gt(!i.pathname||!i.pathname.includes("?"),hy("?","pathname","search",i)),gt(!i.pathname||!i.pathname.includes("#"),hy("#","pathname","hash",i)),gt(!i.search||!i.search.includes("#"),hy("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=t;else{let _=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),_-=1;i.pathname=v.join("/")}u=_>=0?e[_]:"/"}let h=QO(i,u),d=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||g)&&(h.pathname+="/"),h}var Ji=n=>n.join("/").replace(/\/\/+/g,"/"),JO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var uC=["POST","PUT","PATCH","DELETE"];new Set(uC);var nD=["GET",...uC];new Set(nD);var pc=G.createContext(null);pc.displayName="DataRouter";var Tp=G.createContext(null);Tp.displayName="DataRouterState";var hC=G.createContext({isTransitioning:!1});hC.displayName="ViewTransition";var rD=G.createContext(new Map);rD.displayName="Fetchers";var iD=G.createContext(null);iD.displayName="Await";var _i=G.createContext(null);_i.displayName="Navigation";var Eh=G.createContext(null);Eh.displayName="Location";var cs=G.createContext({outlet:null,matches:[],isDataRoute:!1});cs.displayName="Route";var ev=G.createContext(null);ev.displayName="RouteError";function sD(n,{relative:e}={}){gt(bh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=G.useContext(_i),{hash:i,pathname:o,search:l}=Sh(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Ji([t,o])),r.createHref({pathname:u,search:l,hash:i})}function bh(){return G.useContext(Eh)!=null}function Ba(){return gt(bh(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Eh).location}var fC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dC(n){G.useContext(_i).static||G.useLayoutEffect(n)}function oD(){let{isDataRoute:n}=G.useContext(cs);return n?vD():aD()}function aD(){gt(bh(),"useNavigate() may be used only in the context of a <Router> component.");let n=G.useContext(pc),{basename:e,navigator:t}=G.useContext(_i),{matches:r}=G.useContext(cs),{pathname:i}=Ba(),o=JSON.stringify(lC(r)),l=G.useRef(!1);return dC(()=>{l.current=!0}),G.useCallback((h,d={})=>{if(pi(l.current,fC),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=cC(h,JSON.parse(o),i,d.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ji([e,g.pathname])),(d.replace?t.replace:t.push)(g,d.state,d)},[e,t,o,i,n])}G.createContext(null);function Sh(n,{relative:e}={}){let{matches:t}=G.useContext(cs),{pathname:r}=Ba(),i=JSON.stringify(lC(t));return G.useMemo(()=>cC(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function lD(n,e){return pC(n,e)}function pC(n,e,t,r){var z;gt(bh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=G.useContext(_i),{matches:l}=G.useContext(cs),u=l[l.length-1],h=u?u.params:{},d=u?u.pathname:"/",g=u?u.pathnameBase:"/",_=u&&u.route;{let Q=_&&_.path||"";mC(d,!_||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let v=Ba(),S;if(e){let Q=typeof e=="string"?dc(e):e;gt(g==="/"||((z=Q.pathname)==null?void 0:z.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),S=Q}else S=v;let b=S.pathname||"/",C=b;if(g!=="/"){let Q=g.replace(/^\//,"").split("/");C="/"+b.replace(/^\//,"").split("/").slice(Q.length).join("/")}let A=!o&&t&&t.matches&&t.matches.length>0?t.matches:sC(n,{pathname:C});pi(_||A!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),pi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=dD(A&&A.map(Q=>Object.assign({},Q,{params:Object.assign({},h,Q.params),pathname:Ji([g,i.encodeLocation?i.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?g:Ji([g,i.encodeLocation?i.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),l,t,r);return e&&O?G.createElement(Eh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},O):O}function cD(){let n=_D(),e=tD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:o},"ErrorBoundary")," or"," ",G.createElement("code",{style:o},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:i},t):null,l)}var uD=G.createElement(cD,null),hD=class extends G.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?G.createElement(cs.Provider,{value:this.props.routeContext},G.createElement(ev.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fD({routeContext:n,match:e,children:t}){let r=G.useContext(pc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(cs.Provider,{value:n},t)}function dD(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let h=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);gt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,u=-1;if(t)for(let h=0;h<i.length;h++){let d=i[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:g,errors:_}=t,v=d.route.loader&&!g.hasOwnProperty(d.route.id)&&(!_||_[d.route.id]===void 0);if(d.route.lazy||v){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,d,g)=>{let _,v=!1,S=null,b=null;t&&(_=o&&d.route.id?o[d.route.id]:void 0,S=d.route.errorElement||uD,l&&(u<0&&g===0?(mC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):u===g&&(v=!0,b=d.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,g+1)),A=()=>{let O;return _?O=S:v?O=b:d.route.Component?O=G.createElement(d.route.Component,null):d.route.element?O=d.route.element:O=h,G.createElement(fD,{match:d,routeContext:{outlet:h,matches:C,isDataRoute:t!=null},children:O})};return t&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?G.createElement(hD,{location:t.location,revalidation:t.revalidation,component:S,error:_,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):A()},null)}function tv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pD(n){let e=G.useContext(pc);return gt(e,tv(n)),e}function mD(n){let e=G.useContext(Tp);return gt(e,tv(n)),e}function gD(n){let e=G.useContext(cs);return gt(e,tv(n)),e}function nv(n){let e=gD(n),t=e.matches[e.matches.length-1];return gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function yD(){return nv("useRouteId")}function _D(){var r;let n=G.useContext(ev),e=mD("useRouteError"),t=nv("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function vD(){let{router:n}=pD("useNavigate"),e=nv("useNavigate"),t=G.useRef(!1);return dC(()=>{t.current=!0}),G.useCallback(async(i,o={})=>{pi(t.current,fC),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var JS={};function mC(n,e,t){!e&&!JS[n]&&(JS[n]=!0,pi(!1,t))}G.memo(ED);function ED({routes:n,future:e,state:t}){return pC(n,void 0,t,e)}function gC(n){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bD({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){gt(!bh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=G.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof t=="string"&&(t=dc(t));let{pathname:h="/",search:d="",hash:g="",state:_=null,key:v="default"}=t,S=G.useMemo(()=>{let b=yo(h,l);return b==null?null:{location:{pathname:b,search:d,hash:g,state:_,key:v},navigationType:r}},[l,h,d,g,_,v,r]);return pi(S!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:G.createElement(_i.Provider,{value:u},G.createElement(Eh.Provider,{children:e,value:S}))}function SD({children:n,location:e}){return lD(t_(n),e)}function t_(n,e=[]){let t=[];return G.Children.forEach(n,(r,i)=>{if(!G.isValidElement(r))return;let o=[...e,i];if(r.type===G.Fragment){t.push.apply(t,t_(r.props.children,o));return}gt(r.type===gC,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=t_(r.props.children,o)),t.push(l)}),t}var Sd="get",Td="application/x-www-form-urlencoded";function wp(n){return n!=null&&typeof n.tagName=="string"}function TD(n){return wp(n)&&n.tagName.toLowerCase()==="button"}function wD(n){return wp(n)&&n.tagName.toLowerCase()==="form"}function CD(n){return wp(n)&&n.tagName.toLowerCase()==="input"}function AD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function RD(n,e){return n.button===0&&(!e||e==="_self")&&!AD(n)}var od=null;function kD(){if(od===null)try{new FormData(document.createElement("form"),0),od=!1}catch{od=!0}return od}var ID=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fy(n){return n!=null&&!ID.has(n)?(pi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Td}"`),null):n}function xD(n,e){let t,r,i,o,l;if(wD(n)){let u=n.getAttribute("action");r=u?yo(u,e):null,t=n.getAttribute("method")||Sd,i=fy(n.getAttribute("enctype"))||Td,o=new FormData(n)}else if(TD(n)||CD(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(r=h?yo(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Sd,i=fy(n.getAttribute("formenctype"))||fy(u.getAttribute("enctype"))||Td,o=new FormData(u,n),!kD()){let{name:d,type:g,value:_}=n;if(g==="image"){let v=d?`${d}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else d&&o.append(d,_)}}else{if(wp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Sd,r=null,i=Td,l=n}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:l}}function rv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function OD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function MD(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await OD(o,t);return l.links?l.links():[]}return[]}));return LD(r.flat(1).filter(DD).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ZS(n,e,t,r,i,o){let l=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,u=(h,d)=>{var g;return t[d].pathname!==h.pathname||((g=t[d].route.path)==null?void 0:g.endsWith("*"))&&t[d].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,d)=>l(h,d)||u(h,d)):o==="data"?e.filter((h,d)=>{var _;let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,d)||u(h,d))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function ND(n,e,{includeHydrateFallback:t}={}){return PD(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function PD(n){return[...new Set(n)]}function VD(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function LD(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(VD(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function UD(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function BD(){let n=G.useContext(pc);return rv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function zD(){let n=G.useContext(Tp);return rv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var iv=G.createContext(void 0);iv.displayName="FrameworkContext";function yC(){let n=G.useContext(iv);return rv(n,"You must render this element inside a <HydratedRouter> element"),n}function HD(n,e){let t=G.useContext(iv),[r,i]=G.useState(!1),[o,l]=G.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:d,onMouseLeave:g,onTouchStart:_}=e,v=G.useRef(null);G.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let C=O=>{O.forEach(z=>{l(z.isIntersecting)})},A=new IntersectionObserver(C,{threshold:.5});return v.current&&A.observe(v.current),()=>{A.disconnect()}}},[n]),G.useEffect(()=>{if(r){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[r]);let S=()=>{i(!0)},b=()=>{i(!1),l(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:Du(u,S),onBlur:Du(h,b),onMouseEnter:Du(d,S),onMouseLeave:Du(g,b),onTouchStart:Du(_,S)}]:[!1,v,{}]}function Du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function jD({page:n,...e}){let{router:t}=BD(),r=G.useMemo(()=>sC(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?G.createElement(qD,{page:n,matches:r,...e}):null}function FD(n){let{manifest:e,routeModules:t}=yC(),[r,i]=G.useState([]);return G.useEffect(()=>{let o=!1;return MD(n,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[n,e,t]),r}function qD({page:n,matches:e,...t}){let r=Ba(),{manifest:i,routeModules:o}=yC(),{loaderData:l,matches:u}=zD(),h=G.useMemo(()=>ZS(n,e,u,i,r,"data"),[n,e,u,i,r]),d=G.useMemo(()=>ZS(n,e,u,i,r,"assets"),[n,e,u,i,r]),g=G.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,b=!1;if(e.forEach(A=>{var z;let O=i.routes[A.route.id];!O||!O.hasLoader||(!h.some(Q=>Q.route.id===A.route.id)&&A.route.id in l&&((z=o[A.route.id])!=null&&z.shouldRevalidate)||O.hasClientLoader?b=!0:S.add(A.route.id))}),S.size===0)return[];let C=UD(n);return b&&S.size>0&&C.searchParams.set("_routes",e.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[C.pathname+C.search]},[l,r,i,h,e,n,o]),_=G.useMemo(()=>ND(d,i),[d,i]),v=FD(d);return G.createElement(G.Fragment,null,g.map(S=>G.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),_.map(S=>G.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),v.map(({key:S,link:b})=>G.createElement("link",{key:S,...b})))}function $D(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _C=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_C&&(window.__reactRouterVersion="7.2.0")}catch{}function GD({basename:n,children:e,window:t}){let r=G.useRef();r.current==null&&(r.current=MO({window:t,v5Compat:!0}));let i=r.current,[o,l]=G.useState({action:i.action,location:i.location}),u=G.useCallback(h=>{G.startTransition(()=>l(h))},[l]);return G.useLayoutEffect(()=>i.listen(u),[i,u]),G.createElement(bD,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var vC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EC=G.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:u,target:h,to:d,preventScrollReset:g,viewTransition:_,...v},S){let{basename:b}=G.useContext(_i),C=typeof d=="string"&&vC.test(d),A,O=!1;if(typeof d=="string"&&C&&(A=d,_C))try{let k=new URL(window.location.href),D=d.startsWith("//")?new URL(k.protocol+d):new URL(d),V=yo(D.pathname,b);D.origin===k.origin&&V!=null?d=V+D.search+D.hash:O=!0}catch{pi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=sD(d,{relative:i}),[Q,F,W]=HD(r,v),X=YD(d,{replace:l,state:u,target:h,preventScrollReset:g,relative:i,viewTransition:_});function N(k){e&&e(k),k.defaultPrevented||X(k)}let x=G.createElement("a",{...v,...W,href:A||z,onClick:O||o?e:N,ref:$D(S,F),target:h,"data-discover":!C&&t==="render"?"true":void 0});return Q&&!C?G.createElement(G.Fragment,null,x,G.createElement(jD,{page:z})):x});EC.displayName="Link";var KD=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:u,children:h,...d},g){let _=Sh(l,{relative:d.relative}),v=Ba(),S=G.useContext(Tp),{navigator:b,basename:C}=G.useContext(_i),A=S!=null&&tM(_)&&u===!0,O=b.encodeLocation?b.encodeLocation(_).pathname:_.pathname,z=v.pathname,Q=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(z=z.toLowerCase(),Q=Q?Q.toLowerCase():null,O=O.toLowerCase()),Q&&C&&(Q=yo(Q,C)||Q);const F=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let W=z===O||!i&&z.startsWith(O)&&z.charAt(F)==="/",X=Q!=null&&(Q===O||!i&&Q.startsWith(O)&&Q.charAt(O.length)==="/"),N={isActive:W,isPending:X,isTransitioning:A},x=W?e:void 0,k;typeof r=="function"?k=r(N):k=[r,W?"active":null,X?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(N):o;return G.createElement(EC,{...d,"aria-current":x,className:k,ref:g,style:D,to:l,viewTransition:u},typeof h=="function"?h(N):h)});KD.displayName="NavLink";var WD=G.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:l=Sd,action:u,onSubmit:h,relative:d,preventScrollReset:g,viewTransition:_,...v},S)=>{let b=ZD(),C=eM(u,{relative:d}),A=l.toLowerCase()==="get"?"get":"post",O=typeof u=="string"&&vC.test(u),z=Q=>{if(h&&h(Q),Q.defaultPrevented)return;Q.preventDefault();let F=Q.nativeEvent.submitter,W=(F==null?void 0:F.getAttribute("formmethod"))||l;b(F||Q.currentTarget,{fetcherKey:e,method:W,navigate:t,replace:i,state:o,relative:d,preventScrollReset:g,viewTransition:_})};return G.createElement("form",{ref:S,method:A,action:C,onSubmit:r?h:z,...v,"data-discover":!O&&n==="render"?"true":void 0})});WD.displayName="Form";function QD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bC(n){let e=G.useContext(pc);return gt(e,QD(n)),e}function YD(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:l}={}){let u=oD(),h=Ba(),d=Sh(n,{relative:o});return G.useCallback(g=>{if(RD(g,e)){g.preventDefault();let _=t!==void 0?t:Ju(h)===Ju(d);u(n,{replace:_,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[h,u,d,t,r,e,n,i,o,l])}var XD=0,JD=()=>`__${String(++XD)}__`;function ZD(){let{router:n}=bC("useSubmit"),{basename:e}=G.useContext(_i),t=yD();return G.useCallback(async(r,i={})=>{let{action:o,method:l,encType:u,formData:h,body:d}=xD(r,e);if(i.navigate===!1){let g=i.fetcherKey||JD();await n.fetch(g,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||l,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||l,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function eM(n,{relative:e}={}){let{basename:t}=G.useContext(_i),r=G.useContext(cs);gt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Sh(n||".",{relative:e})},l=Ba();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(_=>_).forEach(_=>u.append("index",_));let g=u.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ji([t,o.pathname])),Ju(o)}function tM(n,e={}){let t=G.useContext(hC);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bC("useViewTransitionState"),i=Sh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=yo(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=yo(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Bd(i.pathname,l)!=null||Bd(i.pathname,o)!=null}new TextEncoder;var nM=iC();const rM=Z_(nM);class Ta extends Error{constructor(e,t){const r=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=r}}class sv extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Ur extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class iM extends Error{constructor(e,t){const r=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=r}}class sM extends Error{constructor(e,t){const r=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=r}}class oM extends Error{constructor(e,t){const r=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=r}}class eT extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class aM extends Error{constructor(e,t){const r=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=r}}class SC{constructor(e,t,r){this.statusCode=e,this.statusText=t,this.content=r}}class Cp{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var te;(function(n){n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None"})(te||(te={}));class Zu{constructor(){}log(e,t){}}Zu.instance=new Zu;const lM="8.0.7";class Dt{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,r){if(!(e in t))throw new Error(`Unknown ${r} value: ${e}.`)}}class mt{static get isBrowser(){return!mt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!mt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!mt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function eh(n,e){let t="";return xa(n)?(t=`Binary data of length ${n.byteLength}`,e&&(t+=`. Content: '${cM(n)}'`)):typeof n=="string"&&(t=`String data of length ${n.length}`,e&&(t+=`. Content: '${n}'`)),t}function cM(n){const e=new Uint8Array(n);let t="";return e.forEach(r=>{const i=r<16?"0":"";t+=`0x${i}${r.toString(16)} `}),t.substr(0,t.length-1)}function xa(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}async function TC(n,e,t,r,i,o){const l={},[u,h]=Xl();l[u]=h,n.log(te.Trace,`(${e} transport) sending data. ${eh(i,o.logMessageContent)}.`);const d=xa(i)?"arraybuffer":"text",g=await t.post(r,{content:i,headers:{...l,...o.headers},responseType:d,timeout:o.timeout,withCredentials:o.withCredentials});n.log(te.Trace,`(${e} transport) request complete. Response status: ${g.statusCode}.`)}function uM(n){return n===void 0?new zd(te.Information):n===null?Zu.instance:n.log!==void 0?n:new zd(n)}class hM{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}}class zd{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const r=`[${new Date().toISOString()}] ${te[e]}: ${t}`;switch(e){case te.Critical:case te.Error:this.out.error(r);break;case te.Warning:this.out.warn(r);break;case te.Information:this.out.info(r);break;default:this.out.log(r);break}}}}function Xl(){let n="X-SignalR-User-Agent";return mt.isNode&&(n="User-Agent"),[n,fM(lM,dM(),mM(),pM())]}function fM(n,e,t,r){let i="Microsoft SignalR/";const o=n.split(".");return i+=`${o[0]}.${o[1]}`,i+=` (${n}; `,e&&e!==""?i+=`${e}; `:i+="Unknown OS; ",i+=`${t}`,r?i+=`; ${r}`:i+="; Unknown Runtime Version",i+=")",i}function dM(){if(mt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function pM(){if(mt.isNode)return process.versions.node}function mM(){return mt.isNode?"NodeJS":"Browser"}function dy(n){return n.stack?n.stack:n.message?n.message:`${n}`}function gM(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class yM extends Cp{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||mt.isNode){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(t("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=t("node-fetch"):this._fetchType=fetch,this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(gM());if(typeof AbortController>"u"){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Ur;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let r;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),r=new Ur});let i=null;if(e.timeout){const h=e.timeout;i=setTimeout(()=>{t.abort(),this._logger.log(te.Warning,"Timeout from HTTP request."),r=new sv},h)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},xa(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let o;try{o=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(h){throw r||(this._logger.log(te.Warning,`Error from HTTP request. ${h}.`),h)}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!o.ok){const h=await tT(o,"text");throw new Ta(h||o.statusText,o.status)}const u=await tT(o,e.responseType);return new SC(o.status,o.statusText,u)}getCookieString(e){let t="";return mt.isNode&&this._jar&&this._jar.getCookies(e,(r,i)=>t=i.join("; ")),t}}function tT(n,e){let t;switch(e){case"arraybuffer":t=n.arrayBuffer();break;case"text":t=n.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=n.text();break}return t}class _M extends Cp{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Ur):e.method?e.url?new Promise((t,r)=>{const i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(xa(e.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const o=e.headers;o&&Object.keys(o).forEach(l=>{i.setRequestHeader(l,o[l])}),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),r(new Ur)}),e.timeout&&(i.timeout=e.timeout),i.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?t(new SC(i.status,i.statusText,i.response||i.responseText)):r(new Ta(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this._logger.log(te.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),r(new Ta(i.statusText,i.status))},i.ontimeout=()=>{this._logger.log(te.Warning,"Timeout from HTTP request."),r(new sv)},i.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class vM extends Cp{constructor(e){if(super(),typeof fetch<"u"||mt.isNode)this._httpClient=new yM(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new _M(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Ur):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class ir{static write(e){return`${e}${ir.RecordSeparator}`}static parse(e){if(e[e.length-1]!==ir.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(ir.RecordSeparator);return t.pop(),t}}ir.RecordSeparatorCode=30;ir.RecordSeparator=String.fromCharCode(ir.RecordSeparatorCode);class EM{writeHandshakeRequest(e){return ir.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,r;if(xa(e)){const u=new Uint8Array(e),h=u.indexOf(ir.RecordSeparatorCode);if(h===-1)throw new Error("Message is incomplete.");const d=h+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(u.slice(0,d))),r=u.byteLength>d?u.slice(d).buffer:null}else{const u=e,h=u.indexOf(ir.RecordSeparator);if(h===-1)throw new Error("Message is incomplete.");const d=h+1;t=u.substring(0,d),r=u.length>d?u.substring(d):null}const i=ir.parse(t),o=JSON.parse(i[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[r,o]}}var De;(function(n){n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close",n[n.Ack=8]="Ack",n[n.Sequence=9]="Sequence"})(De||(De={}));class bM{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new hM(this,e)}}class SM{constructor(e,t,r){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=r}async _send(e){const t=this._protocol.writeMessage(e);let r=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let i=()=>{},o=()=>{};xa(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(r=new Promise((l,u)=>{i=l,o=u})),this._messages.push(new TM(t,this._totalMessageCount,i,o))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await r}_ack(e){let t=-1;for(let r=0;r<this._messages.length;r++){const i=this._messages[r];if(i._id<=e.sequenceId)t=r,xa(i._message)?this._bufferedByteCount-=i._message.byteLength:this._bufferedByteCount-=i._message.length,i._resolver();else if(this._bufferedByteCount<this._bufferSize)i._resolver();else break}t!==-1&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==De.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:De.Sequence,sequenceId:e}));const t=this._messages;for(const r of t)await this._connection.send(r._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case De.Invocation:case De.StreamItem:case De.Completion:case De.StreamInvocation:case De.CancelInvocation:return!0;case De.Close:case De.Sequence:case De.Ping:case De.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:De.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class TM{constructor(e,t,r,i){this._message=e,this._id=t,this._resolver=r,this._rejector=i}}const wM=30*1e3,CM=15*1e3,AM=1e5;var ht;(function(n){n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting"})(ht||(ht={}));class ov{static create(e,t,r,i,o,l,u){return new ov(e,t,r,i,o,l,u)}constructor(e,t,r,i,o,l,u){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(te.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Dt.isRequired(e,"connection"),Dt.isRequired(t,"logger"),Dt.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=o??wM,this.keepAliveIntervalInMilliseconds=l??CM,this._statefulReconnectBufferSize=u??AM,this._logger=t,this._protocol=r,this.connection=e,this._reconnectPolicy=i,this._handshakeProtocol=new EM,this.connection.onreceive=h=>this._processIncomingData(h),this.connection.onclose=h=>this._connectionClosed(h),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=ht.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:De.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==ht.Disconnected&&this._connectionState!==ht.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==ht.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=ht.Connecting,this._logger.log(te.Debug,"Starting HubConnection.");try{await this._startInternal(),mt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=ht.Connected,this._connectionStarted=!0,this._logger.log(te.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=ht.Disconnected,this._logger.log(te.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((t,r)=>{this._handshakeResolver=t,this._handshakeRejecter=r});await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const r={protocol:this._protocol.name,version:t};if(this._logger.log(te.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(r)),this._logger.log(te.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new SM(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(t){throw this._logger.log(te.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(t),t}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===ht.Disconnected)return this._logger.log(te.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===ht.Disconnecting)return this._logger.log(te.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=ht.Disconnecting,this._logger.log(te.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(te.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===ht.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Ur("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){const[r,i]=this._replaceStreamingParams(t),o=this._createStreamInvocation(e,t,i);let l;const u=new bM;return u.cancelCallback=()=>{const h=this._createCancelInvocation(o.invocationId);return delete this._callbacks[o.invocationId],l.then(()=>this._sendWithProtocol(h))},this._callbacks[o.invocationId]=(h,d)=>{if(d){u.error(d);return}else h&&(h.type===De.Completion?h.error?u.error(new Error(h.error)):u.complete():u.next(h.item))},l=this._sendWithProtocol(o).catch(h=>{u.error(h),delete this._callbacks[o.invocationId]}),this._launchStreams(r,l),u}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[r,i]=this._replaceStreamingParams(t),o=this._sendWithProtocol(this._createInvocation(e,t,!0,i));return this._launchStreams(r,o),o}invoke(e,...t){const[r,i]=this._replaceStreamingParams(t),o=this._createInvocation(e,t,!1,i);return new Promise((u,h)=>{this._callbacks[o.invocationId]=(g,_)=>{if(_){h(_);return}else g&&(g.type===De.Completion?g.error?h(new Error(g.error)):u(g.result):h(new Error(`Unexpected message type: ${g.type}`)))};const d=this._sendWithProtocol(o).catch(g=>{h(g),delete this._callbacks[o.invocationId]});this._launchStreams(r,d)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const r=this._methods[e];if(r)if(t){const i=r.indexOf(t);i!==-1&&(r.splice(i,1),r.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const r of t)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(r)))switch(r.type){case De.Invocation:this._invokeClientMethod(r).catch(i=>{this._logger.log(te.Error,`Invoke client method threw error: ${dy(i)}`)});break;case De.StreamItem:case De.Completion:{const i=this._callbacks[r.invocationId];if(i){r.type===De.Completion&&delete this._callbacks[r.invocationId];try{i(r)}catch(o){this._logger.log(te.Error,`Stream callback threw error: ${dy(o)}`)}}break}case De.Ping:break;case De.Close:{this._logger.log(te.Information,"Close message received from server.");const i=r.error?new Error("Server returned an error on close: "+r.error):void 0;r.allowReconnect===!0?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break}case De.Ack:this._messageBuffer&&this._messageBuffer._ack(r);break;case De.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(r);break;default:this._logger.log(te.Warning,`Invalid message type: ${r.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,r;try{[r,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(i){const o="Error parsing handshake response: "+i;this._logger.log(te.Error,o);const l=new Error(o);throw this._handshakeRejecter(l),l}if(t.error){const i="Server returned handshake error: "+t.error;this._logger.log(te.Error,i);const o=new Error(i);throw this._handshakeRejecter(o),o}else this._logger.log(te.Debug,"Server handshake complete.");return this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===ht.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),r=this._methods[t];if(!r){this._logger.log(te.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(te.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const i=r.slice(),o=!!e.invocationId;let l,u,h;for(const d of i)try{const g=l;l=await d.apply(this,e.arguments),o&&l&&g&&(this._logger.log(te.Error,`Multiple results provided for '${t}'. Sending error to server.`),h=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),u=void 0}catch(g){u=g,this._logger.log(te.Error,`A callback for the method '${t}' threw error '${g}'.`)}h?await this._sendWithProtocol(h):o?(u?h=this._createCompletionMessage(e.invocationId,`${u}`,null):l!==void 0?h=this._createCompletionMessage(e.invocationId,null,l):(this._logger.log(te.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),h=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(h)):l&&this._logger.log(te.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(te.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Ur("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===ht.Disconnecting?this._completeClose(e):this._connectionState===ht.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===ht.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=ht.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),mt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(te.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let r=0,i=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(r++,0,i);if(o===null){this._logger.log(te.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=ht.Reconnecting,e?this._logger.log(te.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(te.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(l=>l.apply(this,[e]))}catch(l){this._logger.log(te.Error,`An onreconnecting callback called with error '${e}' threw error '${l}'.`)}if(this._connectionState!==ht.Reconnecting){this._logger.log(te.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;o!==null;){if(this._logger.log(te.Information,`Reconnect attempt number ${r} will start in ${o} ms.`),await new Promise(l=>{this._reconnectDelayHandle=setTimeout(l,o)}),this._reconnectDelayHandle=void 0,this._connectionState!==ht.Reconnecting){this._logger.log(te.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=ht.Connected,this._logger.log(te.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(l=>l.apply(this,[this.connection.connectionId]))}catch(l){this._logger.log(te.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${l}'.`)}return}catch(l){if(this._logger.log(te.Information,`Reconnect attempt failed because of error '${l}'.`),this._connectionState!==ht.Reconnecting){this._logger.log(te.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===ht.Disconnecting&&this._completeClose();return}i=l instanceof Error?l:new Error(l.toString()),o=this._getNextRetryDelay(r++,Date.now()-t,i)}}this._logger.log(te.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${r} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:r})}catch(i){return this._logger.log(te.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${i}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach(r=>{const i=t[r];try{i(null,e)}catch(o){this._logger.log(te.Error,`Stream 'error' callback called with '${e}' threw error: ${dy(o)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,r,i){if(r)return i.length!==0?{arguments:t,streamIds:i,target:e,type:De.Invocation}:{arguments:t,target:e,type:De.Invocation};{const o=this._invocationId;return this._invocationId++,i.length!==0?{arguments:t,invocationId:o.toString(),streamIds:i,target:e,type:De.Invocation}:{arguments:t,invocationId:o.toString(),target:e,type:De.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(const r in e)e[r].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},error:i=>{let o;i instanceof Error?o=i.message:i&&i.toString?o=i.toString():o="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,o)))},next:i=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,i)))}})}}_replaceStreamingParams(e){const t=[],r=[];for(let i=0;i<e.length;i++){const o=e[i];if(this._isObservable(o)){const l=this._invocationId;this._invocationId++,t[l]=o,r.push(l.toString()),e.splice(i,1)}}return[t,r]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,r){const i=this._invocationId;return this._invocationId++,r.length!==0?{arguments:t,invocationId:i.toString(),streamIds:r,target:e,type:De.StreamInvocation}:{arguments:t,invocationId:i.toString(),target:e,type:De.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:De.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:De.StreamItem}}_createCompletionMessage(e,t,r){return t?{error:t,invocationId:e,type:De.Completion}:{invocationId:e,result:r,type:De.Completion}}_createCloseMessage(){return{type:De.Close}}}const RM=[0,2e3,1e4,3e4,null];class nT{constructor(e){this._retryDelays=e!==void 0?[...e,null]:RM}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class wa{}wa.Authorization="Authorization";wa.Cookie="Cookie";class kM extends Cp{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const r=await this._innerClient.send(e);return t&&r.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):r}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[wa.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[wa.Authorization]&&delete e.headers[wa.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var Ht;(function(n){n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling"})(Ht||(Ht={}));var bn;(function(n){n[n.Text=1]="Text",n[n.Binary=2]="Binary"})(bn||(bn={}));let IM=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class rT{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,r){this._httpClient=e,this._logger=t,this._pollAbort=new IM,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(Dt.isRequired(e,"url"),Dt.isRequired(t,"transferFormat"),Dt.isIn(t,bn,"transferFormat"),this._url=e,this._logger.log(te.Trace,"(LongPolling transport) Connecting."),t===bn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,i]=Xl(),o={[r]:i,...this._options.headers},l={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};t===bn.Binary&&(l.responseType="arraybuffer");const u=`${e}&_=${Date.now()}`;this._logger.log(te.Trace,`(LongPolling transport) polling: ${u}.`);const h=await this._httpClient.get(u,l);h.statusCode!==200?(this._logger.log(te.Error,`(LongPolling transport) Unexpected response code: ${h.statusCode}.`),this._closeError=new Ta(h.statusText||"",h.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,l)}async _poll(e,t){try{for(;this._running;)try{const r=`${e}&_=${Date.now()}`;this._logger.log(te.Trace,`(LongPolling transport) polling: ${r}.`);const i=await this._httpClient.get(r,t);i.statusCode===204?(this._logger.log(te.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):i.statusCode!==200?(this._logger.log(te.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),this._closeError=new Ta(i.statusText||"",i.statusCode),this._running=!1):i.content?(this._logger.log(te.Trace,`(LongPolling transport) data received. ${eh(i.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(i.content)):this._logger.log(te.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){this._running?r instanceof sv?this._logger.log(te.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=r,this._running=!1):this._logger.log(te.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{this._logger.log(te.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?TC(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(te.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(te.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,r]=Xl();e[t]=r;const i={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let o;try{await this._httpClient.delete(this._url,i)}catch(l){o=l}o?o instanceof Ta&&(o.statusCode===404?this._logger.log(te.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(te.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this._logger.log(te.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(te.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(te.Trace,e),this.onclose(this._closeError)}}}class xM{constructor(e,t,r,i){this._httpClient=e,this._accessToken=t,this._logger=r,this._options=i,this.onreceive=null,this.onclose=null}async connect(e,t){return Dt.isRequired(e,"url"),Dt.isRequired(t,"transferFormat"),Dt.isIn(t,bn,"transferFormat"),this._logger.log(te.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((r,i)=>{let o=!1;if(t!==bn.Text){i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let l;if(mt.isBrowser||mt.isWebWorker)l=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const u=this._httpClient.getCookieString(e),h={};h.Cookie=u;const[d,g]=Xl();h[d]=g,l=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...h,...this._options.headers}})}try{l.onmessage=u=>{if(this.onreceive)try{this._logger.log(te.Trace,`(SSE transport) data received. ${eh(u.data,this._options.logMessageContent)}.`),this.onreceive(u.data)}catch(h){this._close(h);return}},l.onerror=u=>{o?this._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},l.onopen=()=>{this._logger.log(te.Information,`SSE connected to ${this._url}`),this._eventSource=l,o=!0,r()}}catch(u){i(u);return}})}async send(e){return this._eventSource?TC(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class OM{constructor(e,t,r,i,o,l){this._logger=r,this._accessTokenFactory=t,this._logMessageContent=i,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=l}async connect(e,t){Dt.isRequired(e,"url"),Dt.isRequired(t,"transferFormat"),Dt.isIn(t,bn,"transferFormat"),this._logger.log(te.Trace,"(WebSockets transport) Connecting.");let r;return this._accessTokenFactory&&(r=await this._accessTokenFactory()),new Promise((i,o)=>{e=e.replace(/^http/,"ws");let l;const u=this._httpClient.getCookieString(e);let h=!1;if(mt.isNode||mt.isReactNative){const d={},[g,_]=Xl();d[g]=_,r&&(d[wa.Authorization]=`Bearer ${r}`),u&&(d[wa.Cookie]=u),l=new this._webSocketConstructor(e,void 0,{headers:{...d,...this._headers}})}else r&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);l||(l=new this._webSocketConstructor(e)),t===bn.Binary&&(l.binaryType="arraybuffer"),l.onopen=d=>{this._logger.log(te.Information,`WebSocket connected to ${e}.`),this._webSocket=l,h=!0,i()},l.onerror=d=>{let g=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?g=d.error:g="There was an error with the transport",this._logger.log(te.Information,`(WebSockets transport) ${g}.`)},l.onmessage=d=>{if(this._logger.log(te.Trace,`(WebSockets transport) data received. ${eh(d.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(d.data)}catch(g){this._close(g);return}},l.onclose=d=>{if(h)this._close(d);else{let g=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?g=d.error:g="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(g))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(te.Trace,`(WebSockets transport) sending data. ${eh(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(te.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const iT=100;class DM{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Dt.isRequired(e,"url"),this._logger=uM(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let r=null,i=null;if(mt.isNode&&typeof require<"u"){const o=typeof __webpack_require__=="function"?__non_webpack_require__:require;r=o("ws"),i=o("eventsource")}!mt.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:mt.isNode&&!t.WebSocket&&r&&(t.WebSocket=r),!mt.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:mt.isNode&&!t.EventSource&&typeof i<"u"&&(t.EventSource=i),this._httpClient=new kM(t.httpClient||new vM(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||bn.Binary,Dt.isIn(e,bn,"transferFormat"),this._logger.log(te.Debug,`Starting connection with transfer format '${bn[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(te.Error,t),await this._stopPromise,Promise.reject(new Ur(t))}else if(this._connectionState!=="Connected"){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(te.Error,t),Promise.reject(new Ur(t))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new av(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(te.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(te.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(t){this._logger.log(te.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(te.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Ht.WebSockets)this.transport=this._constructTransport(Ht.WebSockets),await this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let r=null,i=0;do{if(r=await this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Ur("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(t=r.url),r.accessToken){const o=r.accessToken;this._accessTokenFactory=()=>o,this._httpClient._accessToken=o,this._httpClient._accessTokenFactory=void 0}i++}while(r.url&&i<iT);if(i===iT&&r.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,r,e)}this.transport instanceof rT&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(te.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(r){return this._logger.log(te.Error,"Failed to start the connection: "+r),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(r)}}async _getNegotiationResponse(e){const t={},[r,i]=Xl();t[r]=i;const o=this._resolveNegotiateUrl(e);this._logger.log(te.Debug,`Sending negotiation request: ${o}.`);try{const l=await this._httpClient.post(o,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(l.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${l.statusCode}'`));const u=JSON.parse(l.content);return(!u.negotiateVersion||u.negotiateVersion<1)&&(u.connectionToken=u.connectionId),u.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new eT("Client didn't negotiate Stateful Reconnect but the server did.")):u}catch(l){let u="Failed to complete negotiation with the server: "+l;return l instanceof Ta&&l.statusCode===404&&(u=u+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(te.Error,u),Promise.reject(new eT(u))}}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}async _createTransport(e,t,r,i){let o=this._createConnectUrl(e,r.connectionToken);if(this._isITransport(t)){this._logger.log(te.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(o,i),this.connectionId=r.connectionId;return}const l=[],u=r.availableTransports||[];let h=r;for(const d of u){const g=this._resolveTransportOrError(d,t,i,(h==null?void 0:h.useStatefulReconnect)===!0);if(g instanceof Error)l.push(`${d.transport} failed:`),l.push(g);else if(this._isITransport(g)){if(this.transport=g,!h){try{h=await this._getNegotiationResponse(e)}catch(_){return Promise.reject(_)}o=this._createConnectUrl(e,h.connectionToken)}try{await this._startTransport(o,i),this.connectionId=h.connectionId;return}catch(_){if(this._logger.log(te.Error,`Failed to start the transport '${d.transport}': ${_}`),h=void 0,l.push(new oM(`${d.transport} failed: ${_}`,Ht[d.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(te.Debug,v),Promise.reject(new Ur(v))}}}}return l.length>0?Promise.reject(new aM(`Unable to connect to the server with any of the available transports. ${l.join(" ")}`,l)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case Ht.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new OM(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Ht.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new xM(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Ht.LongPolling:return new rT(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async r=>{let i=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{i=!0}else{this._stopConnection(r);return}i&&this._stopConnection(r)}:this.transport.onclose=r=>this._stopConnection(r),this.transport.connect(e,t)}_resolveTransportOrError(e,t,r,i){const o=Ht[e.transport];if(o==null)return this._logger.log(te.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(MM(t,o))if(e.transferFormats.map(u=>bn[u]).indexOf(r)>=0){if(o===Ht.WebSockets&&!this._options.WebSocket||o===Ht.ServerSentEvents&&!this._options.EventSource)return this._logger.log(te.Debug,`Skipping transport '${Ht[o]}' because it is not supported in your environment.'`),new iM(`'${Ht[o]}' is not supported in your environment.`,o);this._logger.log(te.Debug,`Selecting transport '${Ht[o]}'.`);try{return this.features.reconnect=o===Ht.WebSockets?i:void 0,this._constructTransport(o)}catch(u){return u}}else return this._logger.log(te.Debug,`Skipping transport '${Ht[o]}' because it does not support the requested transfer format '${bn[r]}'.`),new Error(`'${Ht[o]}' does not support ${bn[r]}.`);else return this._logger.log(te.Debug,`Skipping transport '${Ht[o]}' because it was disabled by the client.`),new sM(`'${Ht[o]}' is disabled by the client.`,o)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(te.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(te.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(te.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(te.Error,`Connection disconnected with error '${e}'.`):this._logger.log(te.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(te.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(te.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!mt.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(te.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const r=new URLSearchParams(t.searchParams);return r.has("negotiateVersion")||r.append("negotiateVersion",this._negotiateVersion.toString()),r.has("useStatefulReconnect")?r.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&r.append("useStatefulReconnect","true"),t.search=r.toString(),t.toString()}}function MM(n,e){return!n||(e&n)!==0}class av{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new ad,this._transportResult=new ad,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new ad),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ad;const e=this._transportResult;this._transportResult=void 0;const t=typeof this._buffer[0]=="string"?this._buffer.join(""):av._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(r){e.reject(r)}}}static _concatBuffers(e){const t=e.map(o=>o.byteLength).reduce((o,l)=>o+l),r=new Uint8Array(t);let i=0;for(const o of e)r.set(new Uint8Array(o),i),i+=o.byteLength;return r.buffer}}class ad{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const NM="json";class PM{constructor(){this.name=NM,this.version=2,this.transferFormat=bn.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=Zu.instance);const r=ir.parse(e),i=[];for(const o of r){const l=JSON.parse(o);if(typeof l.type!="number")throw new Error("Invalid payload.");switch(l.type){case De.Invocation:this._isInvocationMessage(l);break;case De.StreamItem:this._isStreamItemMessage(l);break;case De.Completion:this._isCompletionMessage(l);break;case De.Ping:break;case De.Close:break;case De.Ack:this._isAckMessage(l);break;case De.Sequence:this._isSequenceMessage(l);break;default:t.log(te.Information,"Unknown message type '"+l.type+"' ignored.");continue}i.push(l)}return i}writeMessage(e){return ir.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}}const VM={trace:te.Trace,debug:te.Debug,info:te.Information,information:te.Information,warn:te.Warning,warning:te.Warning,error:te.Error,critical:te.Critical,none:te.None};function LM(n){const e=VM[n.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${n}`)}class UM{configureLogging(e){if(Dt.isRequired(e,"logging"),BM(e))this.logger=e;else if(typeof e=="string"){const t=LM(e);this.logger=new zd(t)}else this.logger=new zd(e);return this}withUrl(e,t){return Dt.isRequired(e,"url"),Dt.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...t}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return Dt.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new nT(e):this.reconnectPolicy=e:this.reconnectPolicy=new nT,this}withServerTimeout(e){return Dt.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return Dt.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e==null?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new DM(this.url,e);return ov.create(t,this.logger||Zu.instance,this.protocol||new PM,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function BM(n){return n.log!==void 0}const zM=n=>{const[e,t]=G.useState(!1),[r,i]=G.useState("Loading"),[o,l]=G.useState(null),[u,h]=G.useState([]);return G.useEffect(()=>{if(n===""||!e)return;const b=new UM().withUrl("/chatHub").withAutomaticReconnect().build();return l(b),console.log(b),b.onreconnecting(C=>{i("Reconnecting"),console.log("Reconnecting... ",C)}),b.onreconnected(C=>{i("Connected"),console.log("Reconnected. Connection ID: ",C)}),b.onclose(C=>{i("Disconnected"),console.log("Connection closed. ",C)}),b.start().then(()=>{i("Connected"),b.invoke("AddToGroup",n).catch(C=>{console.error(C.toString())}),console.log(`Connected as ${n}`)}).catch(C=>{i("Disconnected"),console.error("Error starting connection: ",C.toString())}),()=>{b.stop(),l(null)}},[n,e]),G.useEffect(()=>{o&&(o.on("ReceiveMessage",(b,C)=>{console.log(b,C,Date.now())}),o.on("ReceiveDocumentUpdate",b=>{console.log("Received update from server: ",b)}),o.on("ReceiveUsers",b=>{h(b),console.log("received users: ",b)}))},[o]),{shouldConnect:e,setShouldConnect:t,hubConnection:o,connectionStatus:r,reconnect:()=>{i("Loading"),o.start().then(()=>{i("Connected")}).catch(b=>{i("Disconnected"),console.error("Error Reconnecting: ",b.toString())})},sendMessage:(b,C)=>{o&&o.invoke("SendMessage",b,C).catch(A=>{console.error(A.toString())})},sendUpdate:(b,C,A)=>{console.log(b),b&&b.invoke("UpdateDocument",C,A).catch(O=>{console.error(O.toString())})},getContent:()=>o?o.invoke("GetContent").catch(C=>{console.error(C.toString())}):void 0,addUserToServer:b=>{o&&(console.log("adding user: ",b),o.invoke("AddUser",b).catch(C=>{console.error(C.toString())}))}}},wC=G.createContext(void 0);function HM({children:n}){const[e,t]=G.useState(""),[r,i]=G.useState([]),[o,l]=G.useState([]),[u,h]=G.useState([]),S={currentUser:e,yourDocs:r,sharedDocs:o,docHistory:u,setUser:b=>{t(b)},clearUser:()=>{t("")},updateYourDocs:(b,C)=>{const A=[],O=[];b.forEach(z=>{console.log(z),z.owner===C?A.push(z):O.push(z)}),i(A),l(O)},updateDocHistory:b=>{h(b)}};return ee.jsx(wC.Provider,{value:S,children:n})}function Ap(){const n=G.useContext(wC);if(!n)throw new Error("useUser must be used within a UserProvider");return n}class Cr{constructor(e="",t="Document Title",r="",i=[],o="",l=[]){pa(this,"owner");pa(this,"title");pa(this,"content");pa(this,"history");pa(this,"id");pa(this,"sharedWith");this.owner=e,this.title=t,this.content=r,this.history=i,this.id=o,this.sharedWith=l}cloneWith(e){return new Cr(e.owner!==void 0?e.owner:this.owner,e.title!==void 0?e.title:this.title,e.content!==void 0?e.content:this.content,e.history!==void 0?e.history:this.history,e.id!==void 0?e.id:this.id,e.sharedWith!==void 0?e.sharedWith:this.sharedWith)}}const CC=G.createContext(void 0);function jM({children:n}){const{currentUser:e}=Ap(),[t,r]=G.useState(()=>new Cr(e||"")),i=G.useCallback(g=>{r(_=>_.cloneWith({content:g}))},[]),d={documentState:t,updateDocumentContent:i,updateTitle:g=>{const _=typeof g=="string"?g:g.currentTarget.textContent||"";r(v=>v.cloneWith({title:_}))},updateOwner:g=>{r(_=>_.cloneWith({owner:g}))},updateID:g=>{r(_=>_.cloneWith({id:g}))},loadDoc:g=>{r(g)}};return ee.jsx(CC.Provider,{value:d,children:n})}function AC(){const n=G.useContext(CC);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return n}function cn(n){this.content=n}cn.prototype={constructor:cn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new cn(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new cn(t)},addToStart:function(n,e){return new cn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new cn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new cn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=cn.from(n),n.size?new cn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=cn.from(n),n.size?new cn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=cn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};cn.from=function(n){if(n instanceof cn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new cn(e)};function RC(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)t++;return t}if(i.content.size||o.content.size){let l=RC(i.content,o.content,t+1);if(l!=null)return l}t+=i.nodeSize}}function kC(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let l=n.child(--i),u=e.child(--o),h=l.nodeSize;if(l==u){t-=h,r-=h;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let d=0,g=Math.min(l.text.length,u.text.length);for(;d<g&&l.text[l.text.length-d-1]==u.text[u.text.length-d-1];)d++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let d=kC(l.content,u.content,t-1,r-1);if(d)return d}t-=h,r-=h}}class ae{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let l=0,u=0;u<t;l++){let h=this.content[l],d=u+h.nodeSize;if(d>e&&r(h,i+u,o||null,l)!==!1&&h.content.size){let g=u+1;h.nodesBetween(Math.max(0,e-g),Math.min(h.content.size,t-g),r,i+g)}u=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",l=!0;return this.nodesBetween(e,t,(u,h)=>{let d=u.isText?u.text.slice(Math.max(e,h)-h,t-h):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&d||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=d},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new ae(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,l=0;l<t;o++){let u=this.content[o],h=l+u.nodeSize;h>e&&((l<e||h>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),i+=u.nodeSize),l=h}return new ae(r,i)}cutByIndex(e,t){return e==t?ae.empty:e==0&&t==this.content.length?this:new ae(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ae(i,o)}addToStart(e){return new ae([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ae(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return RC(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return kC(this,e,t,r)}findIndex(e,t=-1){if(e==0)return ld(0,e);if(e==this.size)return ld(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),l=i+o.nodeSize;if(l>=e)return l==e||t>0?ld(r+1,l):ld(r,i);i=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ae.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ae(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ae.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new ae(t||e,r)}static from(e){if(!e)return ae.empty;if(e instanceof ae)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ae([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ae.empty=new ae([],0);const py={index:0,offset:0};function ld(n,e){return py.index=n,py.offset=e,py}function Hd(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Hd(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Hd(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let st=class n_{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Hd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return n_.none;if(e instanceof n_)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};st.none=[];class jd extends Error{}class fe{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=xC(this.content,e+this.openStart,t);return r&&new fe(r,this.openStart,this.openEnd)}removeBetween(e,t){return new fe(IC(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return fe.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new fe(ae.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new fe(e,r,i)}}fe.empty=new fe(ae.empty,0,0);function IC(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(i==e||o.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(IC(o.content,e-i-1,t-i-1)))}function xC(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),l=n.maybeChild(i);if(o==e||l.isText)return n.cut(0,e).append(t).append(n.cut(e));let u=xC(l.content,e-o-1,t);return u&&n.replaceChild(i,l.copy(u))}function FM(n,e,t){if(t.openStart>n.depth)throw new jd("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new jd("Inconsistent open depths");return OC(n,e,t,0)}function OC(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let l=OC(n,e,t,r+1);return o.copy(o.content.replaceChild(i,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return Aa(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=qM(t,n);return Aa(o,MC(n,l,u,e,r))}else return Aa(o,Fd(n,e,r))}function DC(n,e){if(!e.type.compatibleContent(n.type))throw new jd("Cannot join "+e.type.name+" onto "+n.type.name)}function r_(n,e,t){let r=n.node(t);return DC(r,e.node(t)),r}function Ca(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function qu(n,e,t,r){let i=(e||n).node(t),o=0,l=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Ca(n.nodeAfter,r),o++));for(let u=o;u<l;u++)Ca(i.child(u),r);e&&e.depth==t&&e.textOffset&&Ca(e.nodeBefore,r)}function Aa(n,e){return n.type.checkContent(e),n.copy(e)}function MC(n,e,t,r,i){let o=n.depth>i&&r_(n,e,i+1),l=r.depth>i&&r_(t,r,i+1),u=[];return qu(null,n,i,u),o&&l&&e.index(i)==t.index(i)?(DC(o,l),Ca(Aa(o,MC(n,e,t,r,i+1)),u)):(o&&Ca(Aa(o,Fd(n,e,i+1)),u),qu(e,t,i,u),l&&Ca(Aa(l,Fd(t,r,i+1)),u)),qu(r,null,i,u),new ae(u)}function Fd(n,e,t){let r=[];if(qu(null,n,t,r),n.depth>t){let i=r_(n,e,t+1);Ca(Aa(i,Fd(n,e,t+1)),r)}return qu(e,null,t,r),new ae(r)}function qM(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(ae.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class th{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return st.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new qd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let l=e;;){let{index:u,offset:h}=l.content.findIndex(o),d=o-h;if(r.push(l,u,i+h),!d||(l=l.child(u),l.isText))break;o=d-1,i+=h+1}return new th(t,r,o)}static resolveCached(e,t){let r=sT.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else sT.set(e,r=new $M);let i=r.elts[r.i]=th.resolve(e,t);return r.i=(r.i+1)%GM,i}}class $M{constructor(){this.elts=[],this.i=0}}const GM=12,sT=new WeakMap;class qd{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const KM=Object.create(null);let oo=class i_{constructor(e,t,r,i=st.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||ae.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Hd(this.attrs,t||e.defaultAttrs||KM)&&st.sameSet(this.marks,r||st.none)}copy(e=null){return e==this.content?this:new i_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new i_(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return fe.empty;let i=this.resolve(e),o=this.resolve(t),l=r?0:i.sharedDepth(t),u=i.start(l),d=i.node(l).content.cut(i.pos-u,o.pos-u);return new fe(d,i.depth-l,o.depth-l)}replace(e,t,r){return FM(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return th.resolveCached(this,e)}resolveNoCache(e){return th.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),NC(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ae.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let h=i;h<o;h++)if(!this.type.allowsMarks(r.child(h).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=st.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!st.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=ae.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};oo.prototype.text=void 0;class $d extends oo{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):NC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $d(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $d(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function NC(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Oa{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new WM(e,t);if(r.next==null)return Oa.empty;let i=PC(r);r.next&&r.err("Unexpected trailing text");let o=tN(eN(i));return nN(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(l,u){let h=l.matchFragment(e,r);if(h&&(!t||h.validEnd))return ae.from(u.map(d=>d.createAndFill()));for(let d=0;d<l.next.length;d++){let{type:g,next:_}=l.next[d];if(!(g.isText||g.hasRequiredAttrs())&&i.indexOf(_)==-1){i.push(_);let v=o(_,u.concat(g));if(v)return v}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let u=i;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:h}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||h.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Oa.empty=new Oa(!0);class WM{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function PC(n){let e=[];do e.push(QM(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function QM(n){let e=[];do e.push(YM(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function YM(n){let e=ZM(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=XM(n,e);else break;return e}function oT(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function XM(n,e){let t=oT(n),r=t;return n.eat(",")&&(n.next!="}"?r=oT(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function JM(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let l=t[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function ZM(n){if(n.eat("(")){let e=PC(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=JM(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function eN(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,h){let d={term:h,to:u};return e[l].push(d),d}function i(l,u){l.forEach(h=>h.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((h,d)=>h.concat(o(d,u)),[]);if(l.type=="seq")for(let h=0;;h++){let d=o(l.exprs[h],u);if(h==l.exprs.length-1)return d;i(d,u=t())}else if(l.type=="star"){let h=t();return r(u,h),i(o(l.expr,h),h),[r(h)]}else if(l.type=="plus"){let h=t();return i(o(l.expr,u),h),i(o(l.expr,h),h),[r(h)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let h=u;for(let d=0;d<l.min;d++){let g=t();i(o(l.expr,h),g),h=g}if(l.max==-1)i(o(l.expr,h),h);else for(let d=l.min;d<l.max;d++){let g=t();r(h,g),i(o(l.expr,h),g),h=g}return[r(h)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function VC(n,e){return e-n}function aT(n,e){let t=[];return r(e),t.sort(VC);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let l=0;l<o.length;l++){let{term:u,to:h}=o[l];!u&&t.indexOf(h)==-1&&r(h)}}}function tN(n){let e=Object.create(null);return t(aT(n,0));function t(r){let i=[];r.forEach(l=>{n[l].forEach(({term:u,to:h})=>{if(!u)return;let d;for(let g=0;g<i.length;g++)i[g][0]==u&&(d=i[g][1]);aT(n,h).forEach(g=>{d||i.push([u,d=[]]),d.indexOf(g)==-1&&d.push(g)})})});let o=e[r.join(",")]=new Oa(r.indexOf(n.length-1)>-1);for(let l=0;l<i.length;l++){let u=i[l][1].sort(VC);o.next.push({type:i[l][0],next:e[u.join(",")]||t(u)})}return o}}function nN(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,l=[];for(let u=0;u<i.next.length;u++){let{type:h,next:d}=i.next[u];l.push(h.name),o&&!(h.isText||h.hasRequiredAttrs())&&(o=!1),r.indexOf(d)==-1&&r.push(d)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function LC(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function UC(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function BC(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function zC(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new iN(n,r,e[r]);return t}let lT=class HC{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=zC(e,r.attrs),this.defaultAttrs=LC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:UC(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new oo(this,this.computeAttrs(e),ae.from(t),st.setFrom(r))}createChecked(e=null,t,r){return t=ae.from(t),this.checkContent(t),new oo(this,this.computeAttrs(e),t,st.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ae.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(ae.empty,!0);return o?new oo(this,e,t.append(o),st.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){BC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:st.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new HC(o,t,l));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function rN(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class iN{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?rN(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Rp{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=zC(e,i.attrs),this.excluded=null;let o=LC(this.attrs);this.instance=o?new st(this,o):null}create(e=null){return!e&&this.instance?this.instance:new st(this,UC(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new Rp(o,i++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){BC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class jC{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=cn.from(e.nodes),t.marks=cn.from(e.marks||{}),this.nodes=lT.compile(this.spec.nodes,this),this.marks=Rp.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Oa.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?cT(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:cT(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof lT){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new $d(r,r.defaultAttrs,e,st.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return oo.fromJSON(this,e)}markFromJSON(e){return st.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function cT(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],l=o;if(o)t.push(o);else for(let u in n.marks){let h=n.marks[u];(i=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&t.push(l=h)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function sN(n){return n.tag!=null}function oN(n){return n.style!=null}class ao{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(sN(i))this.tags.push(i);else if(oN(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new hT(this,t,!1);return r.addAll(e,st.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new hT(this,t,!0);return r.addAll(e,st.none,t.from,t.to),fe.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(cN(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let h=l.getAttrs(t);if(h===!1)continue;l.attrs=h||void 0}return l}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<o)break}t.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=fT(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=fT(l)),l.node||l.ignore||l.mark||(l.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ao(e,ao.schemaRules(e)))}}const FC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},aN={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},qC={ol:!0,ul:!0},nh=1,s_=2,wd=4;function uT(n,e,t){return e!=null?(e?nh:0)|(e==="full"?s_:0):n&&n.whitespace=="pre"?nh|s_:t&-5}class cd{constructor(e,t,r,i,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=st.none,this.match=o||(l&wd?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ae.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&nh)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=ae.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ae.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!FC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class hT{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,o,l=uT(null,t.preserveWhitespace,0)|(r?wd:0);i?o=new cd(i.type,i.attrs,st.none,!0,t.topMatch||i.type.contentMatch,l):r?o=new cd(null,null,st.none,!0,null,l):o=new cd(e.schema.topNodeType,null,st.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,o=i.options&s_?"full":this.localPreserveWS||(i.options&nh)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],u=e.previousSibling;(!l||u&&u.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;qC.hasOwnProperty(l)&&this.parser.normalizeLists&&lN(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(h?h.ignore:aN.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let d,g=this.needsBlock;if(FC.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),d=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let _=h&&h.skip?t:this.readStyles(e,t);_&&this.addAll(e,_),d&&this.sync(o),this.needsBlock=g}else{let d=this.readStyles(e,t);d&&this.addElementByRule(e,h,d,h.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let h=this.parser.matchStyle(o,l,this,u);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(d=>!h.clearMark(d)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)u=h;else break}}return t}addElementByRule(e,t,r,i){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r)||this.leafFallback(e,r);else{let h=this.enter(l,t.attrs||null,r,t.preserveWhitespace);h&&(o=!0,r=h)}else{let h=this.parser.schema.marks[t.mark];r=r.concat(h.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,r));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,r),this.findAround(e,h,!1)}o&&this.sync(u)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t){let r,i;for(let o=this.open;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!r||r.length>u.length)&&(r=u,i=l,!u.length)||l.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)t=this.enterInner(r[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=st.none;for(let l of r.concat(e.marks))(i.type?i.type.allowsMarkType(l.type):dT(l.type,e.type))&&(o=l.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=uT(e,o,l.options);l.options&wd&&l.content.length==0&&(u|=wd);let h=st.none;return r=r.filter(d=>(l.type?l.type.allowsMarkType(d.type):dT(d.type,e))?(h=d.addToSet(h),!1):!0),this.nodes.push(new cd(e,t,h,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=nh)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(u,h)=>{for(;u>=0;u--){let d=t[u];if(d==""){if(u==t.length-1||u==0)continue;for(;h>=o;h--)if(l(u-1,h))return!0;return!1}else{let g=h>0||h==0&&i?this.nodes[h].type:r&&h>=o?r.node(h-o).type:null;if(!g||g.name!=d&&!g.isInGroup(d))return!1;h--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function lN(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&qC.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function cN(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function fT(n){let e={};for(let t in n)e[t]=n[t];return e}function dT(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],l=u=>{o.push(u);for(let h=0;h<u.edgeCount;h++){let{type:d,next:g}=u.edge(h);if(d==e||o.indexOf(g)<0&&l(g))return!0}};if(l(i.contentMatch))return!0}}class za{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=my(t).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,h=0;for(;u<o.length&&h<l.marks.length;){let d=l.marks[h];if(!this.marks[d.type.name]){h++;continue}if(!d.eq(o[u][0])||d.type.spec.spanning===!1)break;u++,h++}for(;u<o.length;)i=o.pop()[1];for(;h<l.marks.length;){let d=l.marks[h++],g=this.serializeMark(d,l.isInline,t);g&&(o.push([d,i]),i.appendChild(g.dom),i=g.contentDOM||g.dom)}}i.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Cd(my(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Cd(my(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Cd(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new za(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=pT(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return pT(e.marks)}}function pT(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function my(n){return n.document||window.document}const mT=new WeakMap;function uN(n){let e=mT.get(n);return e===void 0&&mT.set(n,e=hN(n)),e}function hN(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Cd(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=uN(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(t=i.slice(0,l),i=i.slice(l+1));let u,h=t?n.createElementNS(t,i):n.createElement(i),d=e[1],g=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){g=2;for(let _ in d)if(d[_]!=null){let v=_.indexOf(" ");v>0?h.setAttributeNS(_.slice(0,v),_.slice(v+1),d[_]):h.setAttribute(_,d[_])}}for(let _=g;_<e.length;_++){let v=e[_];if(v===0){if(_<e.length-1||_>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:S,contentDOM:b}=Cd(n,v,t,r);if(h.appendChild(S),b){if(u)throw new RangeError("Multiple content holes");u=b}}}return{dom:h,contentDOM:u}}const $C=65535,GC=Math.pow(2,16);function fN(n,e){return n+e*GC}function gT(n){return n&$C}function dN(n){return(n-(n&$C))/GC}const KC=1,WC=2,Ad=4,QC=8;class o_{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&QC)>0}get deletedBefore(){return(this.delInfo&(KC|Ad))>0}get deletedAfter(){return(this.delInfo&(WC|Ad))>0}get deletedAcross(){return(this.delInfo&Ad)>0}}class nr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&nr.empty)return nr.empty}recover(e){let t=0,r=gT(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+dN(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let h=this.ranges[u]-(this.inverted?i:0);if(h>e)break;let d=this.ranges[u+o],g=this.ranges[u+l],_=h+d;if(e<=_){let v=d?e==h?-1:e==_?1:t:t,S=h+i+(v<0?0:g);if(r)return S;let b=e==(t<0?h:_)?null:fN(u/3,e-h),C=e==h?WC:e==_?KC:Ad;return(t<0?e!=h:e!=_)&&(C|=QC),new o_(S,C,b)}i+=g-d}return r?e+i:new o_(e+i,0,null)}touches(e,t){let r=0,i=gT(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let h=this.ranges[u]-(this.inverted?r:0);if(h>e)break;let d=this.ranges[u+o],g=h+d;if(e<=g&&u==i*3)return!0;r+=this.ranges[u+l]-d}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],u=l-(this.inverted?o:0),h=l+(this.inverted?0:o),d=this.ranges[i+t],g=this.ranges[i+r];e(u,u+d,h,h+g),o+=g-d}}invert(){return new nr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?nr.empty:new nr(e<0?[0,-e,0]:[0,0,e])}}nr.empty=new nr([]);class rh{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new rh(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new rh;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,t);if(u.recover!=null){let h=this.getMirror(o);if(h!=null&&h>o&&h<this.to){o=h,e=this._maps[h].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new o_(e,i,null)}}const gy=Object.create(null);class An{getMap(){return nr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=gy[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in gy)throw new RangeError("Duplicate use of step JSON ID "+e);return gy[e]=t,t.prototype.jsonID=e,t}}class Nt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Nt(e,null)}static fail(e){return new Nt(null,e)}static fromReplace(e,t,r,i){try{return Nt.ok(e.replace(t,r,i))}catch(o){if(o instanceof jd)return Nt.fail(o.message);throw o}}}function lv(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(lv(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return ae.fromArray(r)}class no extends An{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new fe(lv(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),t.openStart,t.openEnd);return Nt.fromReplace(e,this.from,this.to,o)}invert(){return new ui(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new no(t.pos,r.pos,this.mark)}merge(e){return e instanceof no&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new no(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new no(t.from,t.to,e.markFromJSON(t.mark))}}An.jsonID("addMark",no);class ui extends An{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new fe(lv(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Nt.fromReplace(e,this.from,this.to,r)}invert(){return new no(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ui(t.pos,r.pos,this.mark)}merge(e){return e instanceof ui&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ui(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ui(t.from,t.to,e.markFromJSON(t.mark))}}An.jsonID("removeMark",ui);class ro extends An{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Nt.fromReplace(e,this.pos,this.pos+1,new fe(ae.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new ro(this.pos,t.marks[i]);return new ro(this.pos,this.mark)}}return new Jl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ro(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ro(t.pos,e.markFromJSON(t.mark))}}An.jsonID("addNodeMark",ro);class Jl extends An{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Nt.fromReplace(e,this.pos,this.pos+1,new fe(ae.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ro(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Jl(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Jl(t.pos,e.markFromJSON(t.mark))}}An.jsonID("removeNodeMark",Jl);class Zt extends An{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&a_(e,this.from,this.to)?Nt.fail("Structure replace would overwrite content"):Nt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new nr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Zt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Zt(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Zt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?fe.empty:new fe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Zt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?fe.empty:new fe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Zt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Zt(t.from,t.to,fe.fromJSON(e,t.slice),!!t.structure)}}An.jsonID("replace",Zt);class en extends An{constructor(e,t,r,i,o,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(a_(e,this.from,this.gapFrom)||a_(e,this.gapTo,this.to)))return Nt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Nt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Nt.fromReplace(e,this.from,this.to,r):Nt.fail("Content does not fit in gap")}getMap(){return new nr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new en(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new en(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new en(t.from,t.to,t.gapFrom,t.gapTo,fe.fromJSON(e,t.slice),t.insert,!!t.structure)}}An.jsonID("replaceAround",en);function a_(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function pN(n,e,t,r){let i=[],o=[],l,u;n.doc.nodesBetween(e,t,(h,d,g)=>{if(!h.isInline)return;let _=h.marks;if(!r.isInSet(_)&&g.type.allowsMarkType(r.type)){let v=Math.max(d,e),S=Math.min(d+h.nodeSize,t),b=r.addToSet(_);for(let C=0;C<_.length;C++)_[C].isInSet(b)||(l&&l.to==v&&l.mark.eq(_[C])?l.to=S:i.push(l=new ui(v,S,_[C])));u&&u.to==v?u.to=S:o.push(u=new no(v,S,r))}}),i.forEach(h=>n.step(h)),o.forEach(h=>n.step(h))}function mN(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;o++;let h=null;if(r instanceof Rp){let d=l.marks,g;for(;g=r.isInSet(d);)(h||(h=[])).push(g),d=g.removeFromSet(d)}else r?r.isInSet(l.marks)&&(h=[r]):h=l.marks;if(h&&h.length){let d=Math.min(u+l.nodeSize,t);for(let g=0;g<h.length;g++){let _=h[g],v;for(let S=0;S<i.length;S++){let b=i[S];b.step==o-1&&_.eq(i[S].style)&&(v=b)}v?(v.to=d,v.step=o):i.push({style:_,from:Math.max(u,e),to:d,step:o})}}}),i.forEach(l=>n.step(new ui(l.from,l.to,l.style)))}function cv(n,e,t,r=t.contentMatch,i=!0){let o=n.doc.nodeAt(e),l=[],u=e+1;for(let h=0;h<o.childCount;h++){let d=o.child(h),g=u+d.nodeSize,_=r.matchType(d.type);if(!_)l.push(new Zt(u,g,fe.empty));else{r=_;for(let v=0;v<d.marks.length;v++)t.allowsMarkType(d.marks[v].type)||n.step(new ui(u,g,d.marks[v]));if(i&&d.isText&&t.whitespace!="pre"){let v,S=/\r?\n|\r/g,b;for(;v=S.exec(d.text);)b||(b=new fe(ae.from(t.schema.text(" ",t.allowedMarks(d.marks))),0,0)),l.push(new Zt(u+v.index,u+v.index+v[0].length,b))}}u=g}if(!r.validEnd){let h=r.fillBefore(ae.empty,!0);n.replace(u,u,new fe(h,0,0))}for(let h=l.length-1;h>=0;h--)n.step(l[h])}function gN(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function mc(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),l=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,l,t))return r;if(r==0||i.type.spec.isolating||!gN(i,o,l))break}return null}function yN(n,e,t){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),u=i.after(o+1),h=l,d=u,g=ae.empty,_=0;for(let b=o,C=!1;b>t;b--)C||r.index(b)>0?(C=!0,g=ae.from(r.node(b).copy(g)),_++):h--;let v=ae.empty,S=0;for(let b=o,C=!1;b>t;b--)C||i.after(b+1)<i.end(b)?(C=!0,v=ae.from(i.node(b).copy(v)),S++):d++;n.step(new en(h,d,l,u,new fe(g.append(v),_,S),g.size-_,!0))}function uv(n,e,t=null,r=n){let i=_N(n,e),o=i&&vN(r,e);return o?i.map(yT).concat({type:e,attrs:t}).concat(o.map(yT)):null}function yT(n){return{type:n,attrs:null}}function _N(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,i,l)?o:null}function vN(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let h=(l.length?l[l.length-1]:e).contentMatch;for(let d=r;h&&d<i;d++)h=h.matchType(t.child(d).type);return!h||!h.validEnd?null:l}function EN(n,e,t){let r=ae.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ae.from(t[l].type.create(t[l].attrs,r))}let i=e.start,o=e.end;n.step(new en(i,o,i,o,new fe(r,0,0),t.length,!0))}function bN(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let h=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,h)&&SN(n.doc,n.mapping.slice(o).map(u),r)){let d=null;if(r.schema.linebreakReplacement){let S=r.whitespace=="pre",b=!!r.contentMatch.matchType(r.schema.linebreakReplacement);S&&!b?d=!1:!S&&b&&(d=!0)}d===!1&&XC(n,l,u,o),cv(n,n.mapping.slice(o).map(u,1),r,void 0,d===null);let g=n.mapping.slice(o),_=g.map(u,1),v=g.map(u+l.nodeSize,1);return n.step(new en(_,v,_+1,v-1,new fe(ae.from(r.create(h,null,l.marks)),0,0),1,!0)),d===!0&&YC(n,l,u,o),!1}})}function YC(n,e,t,r){e.forEach((i,o)=>{if(i.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(i.text);){let h=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function XC(n,e,t,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function SN(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function TN(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new en(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new fe(ae.from(l),0,0),1,!0))}function Zi(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,g=t-2;d>o;d--,g--){let _=i.node(d),v=i.index(d);if(_.type.spec.isolating)return!1;let S=_.content.cutByIndex(v,_.childCount),b=r&&r[g+1];b&&(S=S.replaceChild(0,b.type.create(b.attrs)));let C=r&&r[g]||_;if(!_.canReplace(v+1,_.childCount)||!C.type.validContent(S))return!1}let u=i.indexAfter(o),h=r&&r[0];return i.node(o).canReplaceWith(u,u,h?h.type:i.node(o+1).type)}function wN(n,e,t=1,r){let i=n.doc.resolve(e),o=ae.empty,l=ae.empty;for(let u=i.depth,h=i.depth-t,d=t-1;u>h;u--,d--){o=ae.from(i.node(u).copy(o));let g=r&&r[d];l=ae.from(g?g.type.create(g.attrs,l):i.node(u).copy(l))}n.step(new Zt(e,e,new fe(o.append(l),t,t),!0))}function ko(n,e){let t=n.resolve(e),r=t.index();return JC(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function CN(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function JC(n,e){return!!(n&&e&&!n.isLeaf&&CN(n,e))}function kp(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let o,l,u=r.index(i);if(i==r.depth?(o=r.nodeBefore,l=r.nodeAfter):t>0?(o=r.node(i+1),u++,l=r.node(i).maybeChild(u)):(o=r.node(i).maybeChild(u-1),l=r.node(i+1)),o&&!o.isTextblock&&JC(o,l)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function AN(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(i&&l.inlineContent){let g=l.whitespace=="pre",_=!!l.contentMatch.matchType(i);g&&!_?r=!1:!g&&_&&(r=!0)}let u=n.steps.length;if(r===!1){let g=n.doc.resolve(e+t);XC(n,g.node(),g.before(),u)}l.inlineContent&&cv(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let h=n.mapping.slice(u),d=h.map(e-t);if(n.step(new Zt(d,h.map(e+t,-1),fe.empty,!0)),r===!0){let g=n.doc.resolve(d);YC(n,g.node(),g.before(),n.steps.length)}return n}function RN(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function ZC(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,h=r.index(l)+(u>0?1:0),d=r.node(l),g=!1;if(o==1)g=d.canReplace(h,h,i);else{let _=d.contentMatchAt(h).findWrapping(i.firstChild.type);g=_&&d.canReplaceWith(h,h,_[0])}if(g)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function Ip(n,e,t=e,r=fe.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return eA(i,o,r)?new Zt(e,t,r):new kN(i,o,r).fit()}function eA(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class kN{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ae.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ae.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,u=i.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let h=new fe(o,l,u);return e>-1?new en(r.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||r.pos!=this.$to.pos?new Zt(r.pos,i.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=yy(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:h,match:d}=this.frontier[u],g,_=null;if(t==1&&(l?d.matchType(l.type)||(_=d.fillBefore(ae.from(l),!1)):o&&h.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:_};if(t==2&&l&&(g=d.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:g};if(o&&d.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=yy(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new fe(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=yy(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new fe(Pu(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new fe(Pu(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let C=0;C<o.length;C++)this.openFrontierNode(o[C]);let l=this.unplaced,u=r?r.content:l.content,h=l.openStart-e,d=0,g=[],{match:_,type:v}=this.frontier[t];if(i){for(let C=0;C<i.childCount;C++)g.push(i.child(C));_=_.matchFragment(i)}let S=u.size+e-(l.content.size-l.openEnd);for(;d<u.childCount;){let C=u.child(d),A=_.matchType(C.type);if(!A)break;d++,(d>1||h==0||C.content.size)&&(_=A,g.push(tA(C.mark(v.allowedMarks(C.marks)),d==1?h:0,d==u.childCount?S:-1)))}let b=d==u.childCount;b||(S=-1),this.placed=Vu(this.placed,t,ae.from(g)),this.frontier[t].match=_,b&&S<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,A=u;C<S;C++){let O=A.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),A=O.content}this.unplaced=b?e==0?fe.empty:new fe(Pu(l.content,e-1,1),e-1,S<0?l.openEnd:e-1):new fe(Pu(l.content,e,d),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!_y(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=_y(e,t,i,r,o);if(l){for(let u=t-1;u>=0;u--){let{match:h,type:d}=this.frontier[u],g=_y(e,u,d,h,!0);if(!g||g.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Vu(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Vu(this.placed,this.depth,ae.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ae.empty,!0);t.childCount&&(this.placed=Vu(this.placed,this.frontier.length,t))}}function Pu(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Pu(n.firstChild.content,e-1,t)))}function Vu(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Vu(n.lastChild.content,e-1,t)))}function yy(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function tA(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,tA(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ae.empty,!0)))),n.copy(r)}function _y(n,e,t,r,i){let o=n.node(e),l=i?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!IN(t,o.content,l)?u:null}function IN(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function xN(n){return n.spec.defining||n.spec.definingForContent}function ON(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(eA(i,o,r))return n.step(new Zt(e,t,r));let l=rA(i,n.doc.resolve(t));l[l.length-1]==0&&l.pop();let u=-(i.depth+1);l.unshift(u);for(let v=i.depth,S=i.pos-1;v>0;v--,S--){let b=i.node(v).type.spec;if(b.defining||b.definingAsContext||b.isolating)break;l.indexOf(v)>-1?u=v:i.before(v)==S&&l.splice(1,0,-v)}let h=l.indexOf(u),d=[],g=r.openStart;for(let v=r.content,S=0;;S++){let b=v.firstChild;if(d.push(b),S==r.openStart)break;v=b.content}for(let v=g-1;v>=0;v--){let S=d[v],b=xN(S.type);if(b&&!S.sameMarkup(i.node(Math.abs(u)-1)))g=v;else if(b||!S.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let S=(v+g+1)%(r.openStart+1),b=d[S];if(b)for(let C=0;C<l.length;C++){let A=l[(C+h)%l.length],O=!0;A<0&&(O=!1,A=-A);let z=i.node(A-1),Q=i.index(A-1);if(z.canReplaceWith(Q,Q,b.type,b.marks))return n.replace(i.before(A),O?o.after(A):t,new fe(nA(r.content,0,r.openStart,S),S,r.openEnd))}}let _=n.steps.length;for(let v=l.length-1;v>=0&&(n.replace(e,t,r),!(n.steps.length>_));v--){let S=l[v];S<0||(e=i.before(S),t=o.after(S))}}function nA(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(nA(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(ae.empty,!0))}return n}function DN(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=RN(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new fe(ae.from(r),0,0))}function MN(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=rA(r,i);for(let l=0;l<o.length;l++){let u=o[l],h=l==o.length-1;if(h&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(h||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&i.end(l)-t!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function rA(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class $l extends An{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Nt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Nt.fromReplace(e,this.pos,this.pos+1,new fe(ae.from(i),0,t.isLeaf?0:1))}getMap(){return nr.empty}invert(e){return new $l(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $l(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $l(t.pos,t.attr,t.value)}}An.jsonID("attr",$l);class ih extends An{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Nt.ok(r)}getMap(){return nr.empty}invert(e){return new ih(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ih(t.attr,t.value)}}An.jsonID("docAttr",ih);let Zl=class extends Error{};Zl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Zl.prototype=Object.create(Error.prototype);Zl.prototype.constructor=Zl;Zl.prototype.name="TransformError";class NN{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new rh}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Zl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=fe.empty){let i=Ip(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new fe(ae.from(r),0,0))}delete(e,t){return this.replace(e,t,fe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return ON(this,e,t,r),this}replaceRangeWith(e,t,r){return DN(this,e,t,r),this}deleteRange(e,t){return MN(this,e,t),this}lift(e,t){return yN(this,e,t),this}join(e,t=1){return AN(this,e,t),this}wrap(e,t){return EN(this,e,t),this}setBlockType(e,t=e,r,i=null){return bN(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return TN(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new $l(e,t,r)),this}setDocAttribute(e,t){return this.step(new ih(e,t)),this}addNodeMark(e,t){return this.step(new ro(e,t)),this}removeNodeMark(e,t){if(!(t instanceof st)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Jl(e,t)),this}split(e,t=1,r){return wN(this,e,t,r),this}addMark(e,t,r){return pN(this,e,t,r),this}removeMark(e,t,r){return mN(this,e,t,r),this}clearIncompatible(e,t,r){return cv(this,e,t,r),this}}const vy=Object.create(null);class Pe{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new PN(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=fe.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:h,$to:d}=l[u],g=e.mapping.slice(o);e.replaceRange(g.map(h.pos),g.map(d.pos),u?fe.empty:t),u==0&&ET(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:u}=i[o],h=e.mapping.slice(r),d=h.map(l.pos),g=h.map(u.pos);o?e.deleteRange(d,g):(e.replaceRangeWith(d,g,t),ET(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Ie(e):Ll(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=t<0?Ll(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Ll(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new or(e.node(0))}static atStart(e){return Ll(e,e,0,0,1)||new or(e)}static atEnd(e){return Ll(e,e,e.content.size,e.childCount,-1)||new or(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=vy[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in vy)throw new RangeError("Duplicate use of selection JSON ID "+e);return vy[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Ie.between(this.$anchor,this.$head).getBookmark()}}Pe.prototype.visible=!0;class PN{constructor(e,t){this.$from=e,this.$to=t}}let _T=!1;function vT(n){!_T&&!n.parent.inlineContent&&(_T=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Ie extends Pe{constructor(e,t=e){vT(e),vT(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Pe.near(r);let i=e.resolve(t.map(this.anchor));return new Ie(i.parent.inlineContent?i:r,r)}replace(e,t=fe.empty){if(super.replace(e,t),t==fe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ie&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new xp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ie(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=Pe.findFrom(t,r,!0)||Pe.findFrom(t,-r,!0);if(o)t=o.$head;else return Pe.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(Pe.findFrom(e,-r,!0)||Pe.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Ie(e,t)}}Pe.jsonID("text",Ie);class xp{constructor(e,t){this.anchor=e,this.head=t}map(e){return new xp(e.map(this.anchor),e.map(this.head))}resolve(e){return Ie.between(e.resolve(this.anchor),e.resolve(this.head))}}class Te extends Pe{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?Pe.near(o):new Te(o)}content(){return new fe(ae.from(this.node),0,0)}eq(e){return e instanceof Te&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new hv(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Te(e.resolve(t.anchor))}static create(e,t){return new Te(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Te.prototype.visible=!1;Pe.jsonID("node",Te);class hv{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new xp(r,r):new hv(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Te.isSelectable(r)?new Te(t):Pe.near(t)}}class or extends Pe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=fe.empty){if(t==fe.empty){e.delete(0,e.doc.content.size);let r=Pe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new or(e)}map(e){return new or(e)}eq(e){return e instanceof or}getBookmark(){return VN}}Pe.jsonID("all",or);const VN={map(){return this},resolve(n){return new or(n)}};function Ll(n,e,t,r,i,o=!1){if(e.inlineContent)return Ie.create(n,t);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let u=e.child(l);if(u.isAtom){if(!o&&Te.isSelectable(u))return Te.create(n,t-(i<0?u.nodeSize:0))}else{let h=Ll(n,u,t+i,i<0?u.childCount:0,i,o);if(h)return h}t+=u.nodeSize*i}return null}function ET(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Zt||i instanceof en))return;let o=n.mapping.maps[r],l;o.forEach((u,h,d,g)=>{l==null&&(l=g)}),n.setSelection(Pe.near(n.doc.resolve(l),t))}const bT=1,ST=2,TT=4;class LN extends NN{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|bT)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&bT)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ST,this}ensureMarks(e){return st.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ST)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||st.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(Pe.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=TT,this}get scrolledIntoView(){return(this.updated&TT)>0}}function wT(n,e){return!e||!n?n:n.bind(e)}class Lu{constructor(e,t,r){this.name=e,this.init=wT(t.init,r),this.apply=wT(t.apply,r)}}const UN=[new Lu("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Lu("selection",{init(n,e){return n.selection||Pe.atStart(e.doc)},apply(n){return n.selection}}),new Lu("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Lu("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Ey{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=UN.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Lu(r.key,r.spec.state,r))})}}class Fl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let h=i?i[l].n:0,d=i?i[l].state:this,g=h<t.length&&u.spec.appendTransaction.call(u,h?t.slice(h):t,d,r);if(g&&r.filterTransaction(g,l)){if(g.setMeta("appendedTransaction",e),!i){i=[];for(let _=0;_<this.config.plugins.length;_++)i.push(_<l?{state:r,n:t.length}:{state:this,n:0})}t.push(g),r=r.applyInner(g),o=!0}i&&(i[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Fl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new LN(this)}static create(e){let t=new Ey(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Fl(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Ey(this.schema,e.plugins),r=t.fields,i=new Fl(t);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ey(e.schema,e.plugins),o=new Fl(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=oo.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=Pe.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let h=r[u],d=h.spec.state;if(h.key==l.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[l.name]=d.fromJSON.call(h,e,t[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function iA(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=iA(i,e,{})),t[r]=i}return t}class Wn{constructor(e){this.spec=e,this.props={},e.props&&iA(e.props,this,this.props),this.key=e.key?e.key.key:sA("plugin")}getState(e){return e[this.key]}}const by=Object.create(null);function sA(n){return n in by?n+"$"+ ++by[n]:(by[n]=0,n+"$")}class vi{constructor(e="key"){this.key=sA(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const hn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ec=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let l_=null;const Wi=function(n,e,t){let r=l_||(l_=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},BN=function(){l_=null},Da=function(n,e,t,r){return t&&(CT(n,e,t,r,-1)||CT(n,e,t,r,1))},zN=/^(img|br|input|textarea|hr)$/i;function CT(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Ar(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Th(n)||zN.test(n.nodeName)||n.contentEditable=="false")return!1;e=hn(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Ar(n):0}else return!1}}function Ar(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function HN(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Ar(n)}else if(n.parentNode&&!Th(n))e=hn(n),n=n.parentNode;else return null}}function jN(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Th(n))e=hn(n)+1,n=n.parentNode;else return null}}function FN(n,e,t){for(let r=e==0,i=e==Ar(n);r||i;){if(n==t)return!0;let o=hn(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==Ar(n)}}function Th(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Op=function(n){return n.focusNode&&Da(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function ga(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function qN(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $N(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Ar(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Ar(r.startContainer),r.startOffset)}}}const mi=typeof navigator<"u"?navigator:null,AT=typeof document<"u"?document:null,Io=mi&&mi.userAgent||"",c_=/Edge\/(\d+)/.exec(Io),oA=/MSIE \d/.exec(Io),u_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Io),$n=!!(oA||u_||c_),lo=oA?document.documentMode:u_?+u_[1]:c_?+c_[1]:0,jr=!$n&&/gecko\/(\d+)/i.test(Io);jr&&+(/Firefox\/(\d+)/.exec(Io)||[0,0])[1];const h_=!$n&&/Chrome\/(\d+)/.exec(Io),Tn=!!h_,aA=h_?+h_[1]:0,Pn=!$n&&!!mi&&/Apple Computer/.test(mi.vendor),tc=Pn&&(/Mobile\/\w+/.test(Io)||!!mi&&mi.maxTouchPoints>2),wr=tc||(mi?/Mac/.test(mi.platform):!1),GN=mi?/Win/.test(mi.platform):!1,Qi=/Android \d/.test(Io),wh=!!AT&&"webkitFontSmoothing"in AT.documentElement.style,KN=wh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function WN(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ki(n,e){return typeof n=="number"?n:n[e]}function QN(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function RT(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=ec(l);continue}let u=l,h=u==o.body,d=h?WN(o):QN(u),g=0,_=0;if(e.top<d.top+Ki(r,"top")?_=-(d.top-e.top+Ki(i,"top")):e.bottom>d.bottom-Ki(r,"bottom")&&(_=e.bottom-e.top>d.bottom-d.top?e.top+Ki(i,"top")-d.top:e.bottom-d.bottom+Ki(i,"bottom")),e.left<d.left+Ki(r,"left")?g=-(d.left-e.left+Ki(i,"left")):e.right>d.right-Ki(r,"right")&&(g=e.right-d.right+Ki(i,"right")),g||_)if(h)o.defaultView.scrollBy(g,_);else{let S=u.scrollLeft,b=u.scrollTop;_&&(u.scrollTop+=_),g&&(u.scrollLeft+=g);let C=u.scrollLeft-S,A=u.scrollTop-b;e={left:e.left-C,top:e.top-A,right:e.right-C,bottom:e.bottom-A}}let v=h?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(v))break;l=v=="absolute"?l.offsetParent:ec(l)}}function YN(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(o,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let h=u.getBoundingClientRect();if(h.top>=t-20){r=u,i=h.top;break}}return{refDOM:r,refTop:i,stack:lA(n.dom)}}function lA(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=ec(r));return e}function XN({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;cA(t,r==0?0:r-e)}function cA(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Pl=null;function JN(n){if(n.setActive)return n.setActive();if(Pl)return n.focus(Pl);let e=lA(n);n.focus(Pl==null?{get preventScroll(){return Pl={preventScroll:!0},!0}}:void 0),Pl||(Pl=!1,cA(e,0))}function uA(n,e){let t,r=2e8,i,o=0,l=e.top,u=e.top,h,d;for(let g=n.firstChild,_=0;g;g=g.nextSibling,_++){let v;if(g.nodeType==1)v=g.getClientRects();else if(g.nodeType==3)v=Wi(g).getClientRects();else continue;for(let S=0;S<v.length;S++){let b=v[S];if(b.top<=l&&b.bottom>=u){l=Math.max(b.bottom,l),u=Math.min(b.top,u);let C=b.left>e.left?b.left-e.left:b.right<e.left?e.left-b.right:0;if(C<r){t=g,r=C,i=C&&t.nodeType==3?{left:b.right<e.left?b.right:b.left,top:e.top}:e,g.nodeType==1&&C&&(o=_+(e.left>=(b.left+b.right)/2?1:0));continue}}else b.top>e.top&&!h&&b.left<=e.left&&b.right>=e.left&&(h=g,d={left:Math.max(b.left,Math.min(b.right,e.left)),top:b.top});!t&&(e.left>=b.right&&e.top>=b.top||e.left>=b.left&&e.top>=b.bottom)&&(o=_+1)}}return!t&&h&&(t=h,i=d,r=0),t&&t.nodeType==3?ZN(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:uA(t,i)}function ZN(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=Qs(r,1);if(o.top!=o.bottom&&fv(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function fv(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function eP(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function tP(n,e,t){let{node:r,offset:i}=uA(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function nP(n,e,t,r){let i=-1;for(let o=e,l=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0),h;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((h=u.dom.getBoundingClientRect()).width||h.height)&&(u.node.isBlock&&u.parent&&(!l&&h.left>r.left||h.top>r.top?i=u.posBefore:(!l&&h.right<r.left||h.bottom<r.top)&&(i=u.posAfter),l=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(h.top+h.bottom)/2:r.left<(h.left+h.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function hA(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let l=n.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let h=0;h<u.length;h++){let d=u[h];if(fv(e,d))return hA(l,e,d)}}if((o=(o+1)%r)==i)break}return n}function rP(n,e){let t=n.dom.ownerDocument,r,i=0,o=$N(t,e.left,e.top);o&&({node:r,offset:i}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let d=n.dom.getBoundingClientRect();if(!fv(e,d)||(l=hA(n.dom,e,d),!l))return null}if(Pn)for(let d=l;r&&d;d=ec(d))d.draggable&&(r=void 0);if(l=eP(l,e),r){if(jr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let g=r.childNodes[i],_;g.nodeName=="IMG"&&(_=g.getBoundingClientRect()).right<=e.left&&_.bottom>e.top&&i++}let d;wh&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=nP(n,r,i,e))}u==null&&(u=tP(n,l,e));let h=n.docView.nearestDesc(l,!0);return{pos:u,inside:h?h.posAtStart-h.border:-1}}function kT(n){return n.top<n.bottom||n.left<n.right}function Qs(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(kT(r))return r}return Array.prototype.find.call(t,kT)||n.getBoundingClientRect()}const iP=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function fA(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=wh||jr;if(r.nodeType==3)if(l&&(iP.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let h=Qs(Wi(r,i,i),t);if(jr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=Qs(Wi(r,i-1,i-1),-1);if(d.top==h.top){let g=Qs(Wi(r,i,i+1),-1);if(g.top!=h.top)return Mu(g,g.left<d.left)}}return h}else{let h=i,d=i,g=t<0?1:-1;return t<0&&!i?(d++,g=-1):t>=0&&i==r.nodeValue.length?(h--,g=1):t<0?h--:d++,Mu(Qs(Wi(r,h,d),g),g<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==Ar(r))){let h=r.childNodes[i-1];if(h.nodeType==1)return Sy(h.getBoundingClientRect(),!1)}if(o==null&&i<Ar(r)){let h=r.childNodes[i];if(h.nodeType==1)return Sy(h.getBoundingClientRect(),!0)}return Sy(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==Ar(r))){let h=r.childNodes[i-1],d=h.nodeType==3?Wi(h,Ar(h)-(l?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(d)return Mu(Qs(d,1),!1)}if(o==null&&i<Ar(r)){let h=r.childNodes[i];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let d=h?h.nodeType==3?Wi(h,0,l?0:1):h.nodeType==1?h:null:null;if(d)return Mu(Qs(d,-1),!0)}return Mu(Qs(r.nodeType==3?Wi(r):r,-t),t>=0)}function Mu(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Sy(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function dA(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function sP(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return dA(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=fA(n,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Wi(u,0,u.nodeValue.length).getClientRects();else continue;for(let d=0;d<h.length;d++){let g=h[d];if(g.bottom>g.top+1&&(t=="up"?l.top-g.top>(g.bottom-l.top)*2:g.bottom-l.bottom>(l.bottom-g.top)*2))return!1}}return!0})}const oP=/[\u0590-\u08ac]/;function aP(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,u=n.domSelection();return u?!oP.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:l:dA(n,e,()=>{let{focusNode:h,focusOffset:d,anchorNode:g,anchorOffset:_}=n.domSelectionRange(),v=u.caretBidiLevel;u.modify("move",t,"character");let S=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:b,focusOffset:C}=n.domSelectionRange(),A=b&&!S.contains(b.nodeType==1?b:b.parentNode)||h==b&&d==C;try{u.collapse(g,_),h&&(h!=g||d!=_)&&u.extend&&u.extend(h,d)}catch{}return v!=null&&(u.caretBidiLevel=v),A}):r.pos==r.start()||r.pos==r.end()}let IT=null,xT=null,OT=!1;function lP(n,e,t){return IT==e&&xT==t?OT:(IT=e,xT=t,OT=t=="up"||t=="down"?sP(n,e,t):aP(n,e,t))}const kr=0,DT=1,_a=2,gi=3;class Ch{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=kr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>hn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let u=i.children[l];if(u.size){i=u;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof mA){i=e-o;break}o=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof pA&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?hn(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?hn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,u=0;;u++){let h=this.children[u],d=l+h.size;if(i==-1&&e<=d){let g=l+h.border;if(e>=g&&t<=d-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,g);e=l;for(let _=u;_>0;_--){let v=this.children[_-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){i=hn(v.dom)+1;break}e-=v.size}i==-1&&(i=0)}if(i>-1&&(d>t||u==this.children.length-1)){t=d;for(let g=u+1;g<this.children.length;g++){let _=this.children[g];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(-1)){o=hn(_.dom);break}t+=_.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=d}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let S=0,b=0;S<this.children.length;S++){let C=this.children[S],A=b+C.size;if(o>b&&l<A)return C.setSelection(e-b-C.border,t-b-C.border,r,i);b=A}let u=this.domFromPos(e,e?-1:1),h=t==e?u:this.domFromPos(t,t?-1:1),d=r.root.getSelection(),g=r.domSelectionRange(),_=!1;if((jr||Pn)&&e==t){let{node:S,offset:b}=u;if(S.nodeType==3){if(_=!!(b&&S.nodeValue[b-1]==`
`),_&&b==S.nodeValue.length)for(let C=S,A;C;C=C.parentNode){if(A=C.nextSibling){A.nodeName=="BR"&&(u=h={node:A.parentNode,offset:hn(A)+1});break}let O=C.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{let C=S.childNodes[b-1];_=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(jr&&g.focusNode&&g.focusNode!=h.node&&g.focusNode.nodeType==1){let S=g.focusNode.childNodes[g.focusOffset];S&&S.contentEditable=="false"&&(i=!0)}if(!(i||_&&Pn)&&Da(u.node,u.offset,g.anchorNode,g.anchorOffset)&&Da(h.node,h.offset,g.focusNode,g.focusOffset))return;let v=!1;if((d.extend||e==t)&&!_){d.collapse(u.node,u.offset);try{e!=t&&d.extend(h.node,h.offset),v=!0}catch{}}if(!v){if(e>t){let b=u;u=h,h=b}let S=document.createRange();S.setEnd(h.node,h.offset),S.setStart(u.node,u.offset),d.removeAllRanges(),d.addRange(S)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+o.border,h=l-o.border;if(e>=u&&t<=h){this.dirty=e==r||t==l?_a:DT,e==u&&t==h&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=gi:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?_a:gi}r=l}this.dirty=_a}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?_a:DT;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class pA extends Ch{constructor(e,t,r,i){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==kr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class cP extends Ch{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ma extends Ch{constructor(e,t,r,i,o){super(e,[],r,i),this.mark=t,this.spec=o}static create(e,t,r,i){let o=i.nodeViews[t.type.name],l=o&&o(t,i,r);return(!l||!l.dom)&&(l=za.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Ma(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&gi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=gi&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=kr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=kr}}slice(e,t,r){let i=Ma.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=d_(o,t,l,r)),e>0&&(o=d_(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class co extends Ch{constructor(e,t,r,i,o,l,u,h,d){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,o,l){let u=o.nodeViews[t.type.name],h,d=u&&u(t,o,()=>{if(!h)return l;if(h.parent)return h.parent.posBeforeChild(h)},r,i),g=d&&d.dom,_=d&&d.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:_}=za.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!_&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let v=g;return g=_A(g,r,t),d?h=new uP(e,t,r,i,g,_||null,v,d,o,l+1):t.isText?new Dp(e,t,r,i,g,v,o):new co(e,t,r,i,g,_||null,v,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ae.empty)}return e}matchesNode(e,t,r){return this.dirty==kr&&e.eq(this.node)&&Gd(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,h=new fP(this,l&&l.node,e);mP(this.node,this.innerDeco,(d,g,_)=>{d.spec.marks?h.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!_&&h.syncToMarks(g==this.node.childCount?st.none:this.node.child(g).marks,r,e),h.placeWidget(d,e,i)},(d,g,_,v)=>{h.syncToMarks(d.marks,r,e);let S;h.findNodeMatch(d,g,_,v)||u&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(S=h.findIndexWithChild(o.node))>-1&&h.updateNodeAt(d,g,_,S,e)||h.updateNextNode(d,g,_,e,v,i)||h.addNode(d,g,_,e,i),i+=d.nodeSize}),h.syncToMarks([],r,e),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==_a)&&(l&&this.protectLocalComposition(e,l),gA(this.contentDOM,this.children,e),tc&&gP(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ie)||r<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=yP(this.node.content,l,r-t,i-t);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new cP(this,o,t,i);e.input.compositionNodes.push(l),this.children=d_(this.children,r,r+i.length,e,l)}update(e,t,r,i){return this.dirty==gi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=kr}updateOuterDeco(e){if(Gd(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=yA(this.dom,this.nodeDOM,f_(this.outerDeco,this.node,t),f_(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function MT(n,e,t,r,i){_A(r,e,n);let o=new co(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Dp extends co{constructor(e,t,r,i,o,l,u){super(e,t,r,i,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==gi||this.dirty!=kr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=kr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=kr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new Dp(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=gi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class mA extends Ch{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==kr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uP extends co{constructor(e,t,r,i,o,l,u,h,d,g){super(e,t,r,i,o,l,u,d,g),this.spec=h}update(e,t,r,i){if(this.dirty==gi)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function gA(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=NT(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(l instanceof Ma){let h=r?r.previousSibling:n.lastChild;gA(l.contentDOM,l.children,t),r=h?h.nextSibling:n.firstChild}}for(;r;)r=NT(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const $u=function(n){n&&(this.nodeName=n)};$u.prototype=Object.create(null);const va=[new $u];function f_(n,e,t){if(n.length==0)return va;let r=t?va[0]:new $u,i=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&i.push(r=new $u(l.nodeName));for(let u in l){let h=l[u];h!=null&&(t&&i.length==1&&i.push(r=new $u(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+h:u=="style"?r.style=(r.style?r.style+";":"")+h:u!="nodeName"&&(r[u]=h))}}}return i}function yA(n,e,t,r){if(t==va&&r==va)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],u=t[o];if(o){let h;u&&u.nodeName==l.nodeName&&i!=n&&(h=i.parentNode)&&h.nodeName.toLowerCase()==l.nodeName||(h=document.createElement(l.nodeName),h.pmIsDeco=!0,h.appendChild(i),u=va[0]),i=h}hP(i,u||va[0],l)}return i}function hP(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function _A(n,e,t){return yA(n,n,va,f_(e,t,n.nodeType!=1))}function Gd(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function NT(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class fP{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dP(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;i<l&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=kr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let h=this.index;h<Math.min(this.index+3,this.top.children.length);h++){let d=this.top.children[h];if(d.matchesMark(e[o])&&!this.isLocked(d.dom)){u=h;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let h=Ma.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,h=Math.min(this.top.children.length,u+5);u<h;u++){let d=this.top.children[u];if(d.matchesNode(e,t,r)&&!this.preMatch.matched.has(d)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let l=this.top.children[i];return l.dirty==gi&&l.dom==l.contentDOM&&(l.dirty=_a),l.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,l){for(let u=this.index;u<this.top.children.length;u++){let h=this.top.children[u];if(h instanceof co){let d=this.preMatch.matched.get(h);if(d!=null&&d!=o)return!1;let g=h.dom,_,v=this.isLocked(g)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=gi&&Gd(t,h.outerDeco));if(!v&&h.update(e,t,r,i))return this.destroyBetween(this.index,u),h.dom!=g&&(this.changed=!0),this.index++,!0;if(!v&&(_=this.recreateWrapper(h,e,t,r,i,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=_,_.contentDOM&&(_.dirty=_a,_.updateChildren(i,l+1),_.dirty=kr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Gd(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=co.create(this.top,t,r,i,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let h of u.children)h.parent=u}return e.destroy(),u}addNode(e,t,r,i,o){let l=co.create(this.top,e,t,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new pA(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ma;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Dp)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Pn||Tn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new mA(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dP(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,l=[];e:for(;i>0;){let u;for(;;)if(r){let d=t.children[r-1];if(d instanceof Ma)t=d,r=d.children.length;else{u=d,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let h=u.node;if(h){if(h!=n.child(i-1))break;--i,o.set(u,i),l.push(u)}}return{index:i,matched:o,matches:l.reverse()}}function pP(n,e){return n.type.side-e.type.side}function mP(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let d=0;d<n.childCount;d++){let g=n.child(d);r(g,i,e.forChild(o,g),d),o+=g.nodeSize}return}let l=0,u=[],h=null;for(let d=0;;){let g,_;for(;l<i.length&&i[l].to==o;){let A=i[l++];A.widget&&(g?(_||(_=[g])).push(A):g=A)}if(g)if(_){_.sort(pP);for(let A=0;A<_.length;A++)t(_[A],d,!!h)}else t(g,d,!!h);let v,S;if(h)S=-1,v=h,h=null;else if(d<n.childCount)S=d,v=n.child(d++);else break;for(let A=0;A<u.length;A++)u[A].to<=o&&u.splice(A--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);let b=o+v.nodeSize;if(v.isText){let A=b;l<i.length&&i[l].from<A&&(A=i[l].from);for(let O=0;O<u.length;O++)u[O].to<A&&(A=u[O].to);A<b&&(h=v.cut(A-o),v=v.cut(0,A-o),b=A,S=-1)}else for(;l<i.length&&i[l].to<b;)l++;let C=v.isInline&&!v.isLeaf?u.filter(A=>!A.inline):u.slice();r(v,C,e.forChild(o,v),S),o=b}}function gP(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function yP(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let l=n.child(i++),u=o;if(o+=l.nodeSize,!l.isText)continue;let h=l.text;for(;i<n.childCount;){let d=n.child(i++);if(o+=d.nodeSize,!d.isText)break;h+=d.text}if(o>=t){if(o>=r&&h.slice(r-e.length-u,r-u)==e)return r-e.length;let d=u<r?h.lastIndexOf(e,r-u-1):-1;if(d>=0&&d+e.length+u>=t)return u+d;if(t==r&&h.length>=r+e.length-u&&h.slice(r-u,r-u+e.length)==e)return r}}return-1}function d_(n,e,t,r,i){let o=[];for(let l=0,u=0;l<n.length;l++){let h=n[l],d=u,g=u+=h.size;d>=t||g<=e?o.push(h):(d<e&&o.push(h.slice(0,e-d,r)),i&&(o.push(i),i=void 0),g>t&&o.push(h.slice(t-d,h.size,r)))}return o}function dv(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),h,d;if(Op(t)){for(h=l;i&&!i.node;)i=i.parent;let _=i.node;if(i&&_.isAtom&&Te.isSelectable(_)&&i.parent&&!(_.isInline&&FN(t.focusNode,t.focusOffset,i.dom))){let v=i.posBefore;d=new Te(l==v?u:r.resolve(v))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let _=l,v=l;for(let S=0;S<t.rangeCount;S++){let b=t.getRangeAt(S);_=Math.min(_,n.docView.posFromDOM(b.startContainer,b.startOffset,1)),v=Math.max(v,n.docView.posFromDOM(b.endContainer,b.endOffset,-1))}if(_<0)return null;[h,l]=v==n.state.selection.anchor?[v,_]:[_,v],u=r.resolve(l)}else h=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let g=r.resolve(h);if(!d){let _=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;d=pv(n,g,u,_)}return d}function vA(n){return n.editable?n.hasFocus():bA(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function es(n,e=!1){let t=n.state.selection;if(EA(n,t),!!vA(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Tn){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Da(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)vP(n);else{let{anchor:r,head:i}=t,o,l;PT&&!(t instanceof Ie)&&(t.$from.parent.inlineContent||(o=VT(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=VT(n,t.to))),n.docView.setSelection(r,i,n,e),PT&&(o&&LT(o),l&&LT(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_P(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const PT=Pn||Tn&&aA<63;function VT(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Pn&&i&&i.contentEditable=="false")return Ty(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Ty(i);if(o)return Ty(o)}}function Ty(n){return n.contentEditable="true",Pn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function LT(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function _P(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!vA(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function vP(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,hn(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&$n&&lo<=11&&(r.disabled=!0,r.disabled=!1)}function EA(n,e){if(e instanceof Te){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(UT(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else UT(n)}function UT(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function pv(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Ie.between(e,t,r)}function BT(n){return n.editable&&!n.hasFocus()?!1:bA(n)}function bA(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function EP(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Da(e.node,e.offset,t.anchorNode,t.anchorOffset)}function p_(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Pe.findFrom(o,e)}function Ys(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function zT(n,e,t){let r=n.state.selection;if(r instanceof Ie)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return Ys(n,new Ie(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=p_(n.state,e);return i&&i instanceof Te?Ys(n,i):!1}else if(!(wr&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?Te.isSelectable(o)?Ys(n,new Te(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):wh?Ys(n,new Ie(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Te&&r.node.isInline)return Ys(n,new Ie(e>0?r.$to:r.$from));{let i=p_(n.state,e);return i?Ys(n,i):!1}}}function Kd(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Gu(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Vl(n,e){return e<0?bP(n):SP(n)}function bP(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,l=!1;for(jr&&t.nodeType==1&&r<Kd(t)&&Gu(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Gu(u,-1))i=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(SA(t))break;{let u=t.previousSibling;for(;u&&Gu(u,-1);)i=t.parentNode,o=hn(u),u=u.previousSibling;if(u)t=u,r=Kd(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?m_(n,t,r):i&&m_(n,i,o)}function SP(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Kd(t),o,l;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Gu(u,1))o=t,l=++r;else break}else{if(SA(t))break;{let u=t.nextSibling;for(;u&&Gu(u,1);)o=u.parentNode,l=hn(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=Kd(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&m_(n,o,l)}function SA(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function TP(n,e){for(;n&&e==n.childNodes.length&&!Th(n);)e=hn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function wP(n,e){for(;n&&!e&&!Th(n);)e=hn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function m_(n,e,t){if(e.nodeType!=3){let o,l;(l=TP(e,t))?(e=l,t=0):(o=wP(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Op(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&es(n)},50)}function HT(n,e){let t=n.state.doc.resolve(e);if(!(Tn||GN)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function jT(n,e,t){let r=n.state.selection;if(r instanceof Ie&&!r.empty||t.indexOf("s")>-1||wr&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=p_(n.state,e);if(l&&l instanceof Te)return Ys(n,l)}if(!i.parent.inlineContent){let l=e<0?i:o,u=r instanceof or?Pe.near(l,e):Pe.findFrom(l,e);return u?Ys(n,u):!1}return!1}function FT(n,e){if(!(n.state.selection instanceof Ie))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function qT(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function CP(n){if(!Pn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;qT(n,r,"true"),setTimeout(()=>qT(n,r,"false"),20)}return!1}function AP(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function RP(n,e){let t=e.keyCode,r=AP(e);if(t==8||wr&&t==72&&r=="c")return FT(n,-1)||Vl(n,-1);if(t==46&&!e.shiftKey||wr&&t==68&&r=="c")return FT(n,1)||Vl(n,1);if(t==13||t==27)return!0;if(t==37||wr&&t==66&&r=="c"){let i=t==37?HT(n,n.state.selection.from)=="ltr"?-1:1:-1;return zT(n,i,r)||Vl(n,i)}else if(t==39||wr&&t==70&&r=="c"){let i=t==39?HT(n,n.state.selection.from)=="ltr"?1:-1:1;return zT(n,i,r)||Vl(n,i)}else{if(t==38||wr&&t==80&&r=="c")return jT(n,-1,r)||Vl(n,-1);if(t==40||wr&&t==78&&r=="c")return CP(n)||jT(n,1,r)||Vl(n,1);if(r==(wr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function mv(n,e){n.someProp("transformCopied",S=>{e=S(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let S=r.firstChild;t.push(S.type.name,S.attrs!=S.type.defaultAttrs?S.attrs:null),r=S.content}let l=n.someProp("clipboardSerializer")||za.fromSchema(n.state.schema),u=kA(),h=u.createElement("div");h.appendChild(l.serializeFragment(r,{document:u}));let d=h.firstChild,g,_=0;for(;d&&d.nodeType==1&&(g=RA[d.nodeName.toLowerCase()]);){for(let S=g.length-1;S>=0;S--){let b=u.createElement(g[S]);for(;h.firstChild;)b.appendChild(h.firstChild);h.appendChild(b),_++}d=h.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${o}${_?` -${_}`:""} ${JSON.stringify(t)}`);let v=n.someProp("clipboardTextSerializer",S=>S(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:v,slice:e}}function TA(n,e,t,r,i){let o=i.parent.type.spec.code,l,u;if(!t&&!e)return null;let h=e&&(r||o||!t);if(h){if(n.someProp("transformPastedText",v=>{e=v(e,o||r,n)}),o)return e?new fe(ae.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):fe.empty;let _=n.someProp("clipboardTextParser",v=>v(e,i,r,n));if(_)u=_;else{let v=i.marks(),{schema:S}=n.state,b=za.fromSchema(S);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(C=>{let A=l.appendChild(document.createElement("p"));C&&A.appendChild(b.serializeNode(S.text(C,v)))})}}else n.someProp("transformPastedHTML",_=>{t=_(t,n)}),l=OP(t),wh&&DP(l);let d=l&&l.querySelector("[data-pm-slice]"),g=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let _=+g[3];_>0;_--){let v=l.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;l=v}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||ao.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(h||g),context:i,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!kP.test(v.parentNode.nodeName)?{ignore:!0}:null}})),g)u=MP($T(u,+g[1],+g[2]),g[4]);else if(u=fe.maxOpen(IP(u.content,i),!0),u.openStart||u.openEnd){let _=0,v=0;for(let S=u.content.firstChild;_<u.openStart&&!S.type.spec.isolating;_++,S=S.firstChild);for(let S=u.content.lastChild;v<u.openEnd&&!S.type.spec.isolating;v++,S=S.lastChild);u=$T(u,_,v)}return n.someProp("transformPasted",_=>{u=_(u,n)}),u}const kP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function IP(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(u=>{if(!l)return;let h=i.findWrapping(u.type),d;if(!h)return l=null;if(d=l.length&&o.length&&CA(h,o,u,l[l.length-1],0))l[l.length-1]=d;else{l.length&&(l[l.length-1]=AA(l[l.length-1],o.length));let g=wA(u,h);l.push(g),i=i.matchType(g.type),o=h}}),l)return ae.from(l)}return n}function wA(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ae.from(n));return n}function CA(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=CA(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(ae.from(wA(t,n,i+1))))}}function AA(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,AA(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ae.empty,!0);return n.copy(t.append(r))}function g_(n,e,t,r,i,o){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(o=0),i<r-1&&(u=g_(u,e,t,r,i+1,o)),i>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=i).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(ae.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function $T(n,e,t){return e<n.openStart&&(n=new fe(g_(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new fe(g_(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const RA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let GT=null;function kA(){return GT||(GT=document.implementation.createHTMLDocument("title"))}let wy=null;function xP(n){let e=window.trustedTypes;return e?(wy||(wy=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),wy.createHTML(n)):n}function OP(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=kA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&RA[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=xP(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function DP(n){let e=n.querySelectorAll(Tn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function MP(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let h=t.nodes[r[u]];if(!h||h.hasRequiredAttrs())break;i=ae.from(h.create(r[u+1],i)),o++,l++}return new fe(i,o,l)}const Vn={},Ln={},NP={touchstart:!0,touchmove:!0};class PP{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function VP(n){for(let e in Vn){let t=Vn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{UP(n,r)&&!gv(n,r)&&(n.editable||!(r.type in Ln))&&t(n,r)},NP[e]?{passive:!0}:void 0)}Pn&&n.dom.addEventListener("input",()=>null),y_(n)}function io(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function LP(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function y_(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>gv(n,r))})}function gv(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function UP(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function BP(n,e){!gv(n,e)&&Vn[e.type]&&(n.editable||!(e.type in Ln))&&Vn[e.type](n,e)}Ln.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!xA(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Qi&&Tn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),tc&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,ga(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||RP(n,t)?t.preventDefault():io(n,"key")};Ln.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ln.keypress=(n,e)=>{let t=e;if(xA(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||wr&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Ie)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Mp(n){return{left:n.clientX,top:n.clientY}}function zP(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function yv(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,u=>l>o.depth?u(n,t,o.nodeAfter,o.before(l),i,!0):u(n,t,o.node(l),o.before(l),i,!1)))return!0;return!1}function Gl(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function HP(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Te.isSelectable(r)?(Gl(n,new Te(t)),!0):!1}function jP(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Te&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(Te.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(l);break}}return i!=null?(Gl(n,Te.create(n.state.doc,i)),!0):!1}function FP(n,e,t,r,i){return yv(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?jP(n,t):HP(n,t))}function qP(n,e,t,r){return yv(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function $P(n,e,t,r){return yv(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||GP(n,t,r)}function GP(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Gl(n,Ie.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(l.inlineContent)Gl(n,Ie.create(r,u+1,u+1+l.content.size));else if(Te.isSelectable(l))Gl(n,Te.create(r,u));else continue;return!0}}function _v(n){return Wd(n)}const IA=wr?"metaKey":"ctrlKey";Vn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=_v(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&zP(t,n.input.lastClick)&&!t[IA]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let l=n.posAtCoords(Mp(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new KP(n,l,t,!!r)):(o=="doubleClick"?qP:$P)(n,l.pos,l.inside,t)?t.preventDefault():io(n,"pointer"))};class KP{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[IA],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let g=e.state.doc.resolve(t.pos);o=g.parent,l=g.depth?g.before():0}const u=i?null:r.target,h=u?e.docView.nearestDesc(u,!0):null;this.target=h&&h.dom.nodeType==1?h.dom:null;let{selection:d}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||d instanceof Te&&d.from<=l&&d.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&jr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),io(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>es(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Mp(e))),this.updateAllowDefault(e),this.allowDefault||!t?io(this.view,"pointer"):FP(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Pn&&this.mightDrag&&!this.mightDrag.node.isAtom||Tn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Gl(this.view,Pe.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):io(this.view,"pointer")}move(e){this.updateAllowDefault(e),io(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Vn.touchstart=n=>{n.input.lastTouch=Date.now(),_v(n),io(n,"pointer")};Vn.touchmove=n=>{n.input.lastTouch=Date.now(),io(n,"pointer")};Vn.contextmenu=n=>_v(n);function xA(n,e){return n.composing?!0:Pn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const WP=Qi?5e3:-1;Ln.compositionstart=Ln.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Ie&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Wd(n,!0),n.markCursor=null;else if(Wd(n,!e.selection.empty),jr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}n.input.composing=!0}OA(n,WP)};Ln.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,OA(n,20))};function OA(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Wd(n),e))}function DA(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=YP());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function QP(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=HN(e.focusNode,e.focusOffset),r=jN(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function YP(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Wd(n,e=!1){if(!(Qi&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),DA(n),e||n.docView&&n.docView.dirty){let t=dv(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function XP(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const sh=$n&&lo<15||tc&&KN<604;Vn.copy=Ln.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=sh?null:t.clipboardData,l=r.content(),{dom:u,text:h}=mv(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",h)):XP(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function JP(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function ZP(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?oh(n,r.value,null,i,e):oh(n,r.textContent,r.innerHTML,i,e)},50)}function oh(n,e,t,r,i){let o=TA(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",h=>h(n,i,o||fe.empty)))return!0;if(!o)return!1;let l=JP(o),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function MA(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Ln.paste=(n,e)=>{let t=e;if(n.composing&&!Qi)return;let r=sh?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&oh(n,MA(r),r.getData("text/html"),i,t)?t.preventDefault():ZP(n,t)};class NA{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const PA=wr?"altKey":"ctrlKey";Vn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Mp(t)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Te?i.to-1:i.to))){if(r&&r.mightDrag)l=Te.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let _=n.docView.nearestDesc(t.target,!0);_&&_.node.type.spec.draggable&&_!=n.docView&&(l=Te.create(n.state.doc,_.posBefore))}}let u=(l||n.state.selection).content(),{dom:h,text:d,slice:g}=mv(n,u);(!t.dataTransfer.files.length||!Tn||aA>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(sh?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",sh||t.dataTransfer.setData("text/plain",d),n.dragging=new NA(g,!t[PA],l)};Vn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ln.dragover=Ln.dragenter=(n,e)=>e.preventDefault();Ln.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Mp(t));if(!i)return;let o=n.state.doc.resolve(i.pos),l=r&&r.slice;l?n.someProp("transformPasted",b=>{l=b(l,n)}):l=TA(n,MA(t.dataTransfer),sh?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&!t[PA]);if(n.someProp("handleDrop",b=>b(n,t,l||fe.empty,u))){t.preventDefault();return}if(!l)return;t.preventDefault();let h=l?ZC(n.state.doc,o.pos,l):o.pos;h==null&&(h=o.pos);let d=n.state.tr;if(u){let{node:b}=r;b?b.replace(d):d.deleteSelection()}let g=d.mapping.map(h),_=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,v=d.doc;if(_?d.replaceRangeWith(g,g,l.content.firstChild):d.replaceRange(g,g,l),d.doc.eq(v))return;let S=d.doc.resolve(g);if(_&&Te.isSelectable(l.content.firstChild)&&S.nodeAfter&&S.nodeAfter.sameMarkup(l.content.firstChild))d.setSelection(new Te(S));else{let b=d.mapping.map(h);d.mapping.maps[d.mapping.maps.length-1].forEach((C,A,O,z)=>b=z),d.setSelection(pv(n,S,d.doc.resolve(b)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))};Vn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&es(n)},20))};Vn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Vn.beforeinput=(n,e)=>{if(Tn&&Qi&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,ga(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Ln)Vn[n]=Ln[n];function ah(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Qd{constructor(e,t){this.toDOM=e,this.spec=t||Ra,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:l}=e.mapResult(t.from+i,this.side<0?-1:1);return l?null:new Rr(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Qd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ah(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class uo{constructor(e,t){this.attrs=e,this.spec=t||Ra}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new Rr(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof uo&&ah(this.attrs,e.attrs)&&ah(this.spec,e.spec)}static is(e){return e.type instanceof uo}destroy(){}}class vv{constructor(e,t){this.attrs=e,this.spec=t||Ra}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let l=e.mapResult(t.to+i,-1);return l.deleted||l.pos<=o.pos?null:new Rr(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof vv&&ah(this.attrs,e.attrs)&&ah(this.spec,e.spec)}destroy(){}}class Rr{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Rr(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Rr(e,e,new Qd(t,r))}static inline(e,t,r,i){return new Rr(e,t,new uo(r,i))}static node(e,t,r,i){return new Rr(e,t,new vv(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof uo}get widget(){return this.type instanceof Qd}}const Ul=[],Ra={};class jt{constructor(e,t){this.local=e.length?e:Ul,this.children=t.length?t:Ul}static create(e,t){return t.length?Yd(t,e,0,Ra):vn}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,i+u,o)}}map(e,t,r){return this==vn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Ra)}mapInner(e,t,r,i,o){let l;for(let u=0;u<this.local.length;u++){let h=this.local[u].map(e,r,i);h&&h.type.valid(t,h)?(l||(l=[])).push(h):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?e2(this.children,l||[],e,t,r,i,o):l?new jt(l.sort(ka),Ul):vn}add(e,t){return t.length?this==vn?jt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((u,h)=>{let d=h+r,g;if(g=LA(t,u,d)){for(i||(i=this.children.slice());o<i.length&&i[o]<h;)o+=3;i[o]==h?i[o+2]=i[o+2].addInner(u,g,d+1):i.splice(o,0,h,h+u.nodeSize,Yd(g,u,d+1,Ra)),o+=3}});let l=VA(o?UA(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new jt(l.length?this.local.concat(l).sort(ka):this.local,i||this.children)}remove(e){return e.length==0||this==vn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+t,h=r[o+1]+t;for(let g=0,_;g<e.length;g++)(_=e[g])&&_.from>u&&_.to<h&&(e[g]=null,(l||(l=[])).push(_));if(!l)continue;r==this.children&&(r=this.children.slice());let d=r[o+2].removeInner(l,u+1);d!=vn?r[o+2]=d:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<i.length;u++)i[u].eq(l,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new jt(i,r):vn}forChild(e,t){if(this==vn)return this;if(t.isLeaf)return jt.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+t.content.size;for(let u=0;u<this.local.length;u++){let h=this.local[u];if(h.from<l&&h.to>o&&h.type instanceof uo){let d=Math.max(o,h.from)-o,g=Math.min(l,h.to)-o;d<g&&(i||(i=[])).push(h.copy(d,g))}}if(i){let u=new jt(i.sort(ka),Ul);return r?new Js([u,r]):u}return r||vn}eq(e){if(this==e)return!0;if(!(e instanceof jt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ev(this.localsInner(e))}localsInner(e){if(this==vn)return Ul;if(e.inlineContent||!this.local.some(uo.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof uo||t.push(this.local[r]);return t}forEachSet(e){e(this)}}jt.empty=new jt([],[]);jt.removeOverlap=Ev;const vn=jt.empty;class Js{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Ra));return Js.from(r)}forChild(e,t){if(t.isLeaf)return jt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=vn&&(o instanceof Js?r=r.concat(o.members):r.push(o))}return Js.from(r)}eq(e){if(!(e instanceof Js)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?Ev(r?t:t.sort(ka)):Ul}static from(e){switch(e.length){case 0:return vn;case 1:return e[0];default:return new Js(e.every(t=>t instanceof jt)?e:e.reduce((t,r)=>t.concat(r instanceof jt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function e2(n,e,t,r,i,o,l){let u=n.slice();for(let d=0,g=o;d<t.maps.length;d++){let _=0;t.maps[d].forEach((v,S,b,C)=>{let A=C-b-(S-v);for(let O=0;O<u.length;O+=3){let z=u[O+1];if(z<0||v>z+g-_)continue;let Q=u[O]+g-_;S>=Q?u[O+1]=v<=Q?-2:-1:v>=g&&A&&(u[O]+=A,u[O+1]+=A)}_+=A}),g=t.maps[d].map(g,-1)}let h=!1;for(let d=0;d<u.length;d+=3)if(u[d+1]<0){if(u[d+1]==-2){h=!0,u[d+1]=-1;continue}let g=t.map(n[d]+o),_=g-i;if(_<0||_>=r.content.size){h=!0;continue}let v=t.map(n[d+1]+o,-1),S=v-i,{index:b,offset:C}=r.content.findIndex(_),A=r.maybeChild(b);if(A&&C==_&&C+A.nodeSize==S){let O=u[d+2].mapInner(t,A,g+1,n[d]+o+1,l);O!=vn?(u[d]=_,u[d+1]=S,u[d+2]=O):(u[d+1]=-2,h=!0)}else h=!0}if(h){let d=t2(u,n,e,t,i,o,l),g=Yd(d,r,0,l);e=g.local;for(let _=0;_<u.length;_+=3)u[_+1]<0&&(u.splice(_,3),_-=3);for(let _=0,v=0;_<g.children.length;_+=3){let S=g.children[_];for(;v<u.length&&u[v]<S;)v+=3;u.splice(v,0,g.children[_],g.children[_+1],g.children[_+2])}}return new jt(e.sort(ka),u)}function VA(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Rr(i.from+e,i.to+e,i.type))}return t}function t2(n,e,t,r,i,o,l){function u(h,d){for(let g=0;g<h.local.length;g++){let _=h.local[g].map(r,i,d);_?t.push(_):l.onRemove&&l.onRemove(h.local[g].spec)}for(let g=0;g<h.children.length;g+=3)u(h.children[g+2],h.children[g]+d+1)}for(let h=0;h<n.length;h+=3)n[h+1]==-1&&u(n[h+2],e[h]+o+1);return t}function LA(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((i||(i=[])).push(l),n[o]=null);return i}function UA(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Yd(n,e,t,r){let i=[],o=!1;e.forEach((u,h)=>{let d=LA(n,u,h+t);if(d){o=!0;let g=Yd(d,u,t+h+1,r);g!=vn&&i.push(h,h+u.nodeSize,g)}});let l=VA(o?UA(n):n,-t).sort(ka);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||i.length?new jt(l,i):vn}function ka(n,e){return n.from-e.from||n.to-e.to}function Ev(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),KT(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),KT(e,i,r.copy(o.from,r.to)));break}}}return e}function KT(n,e,t){for(;e<n.length&&ka(t,n[e])>0;)e++;n.splice(e,0,t)}function Cy(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=vn&&e.push(r)}),n.cursorWrapper&&e.push(jt.create(n.state.doc,[n.cursorWrapper.deco])),Js.from(e)}const n2={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},r2=$n&&lo<=11;class i2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class s2{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new i2,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);$n&&lo<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),r2&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,n2)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(BT(this.view)){if(this.suppressingSelectionUpdates)return es(this.view);if($n&&lo<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Da(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=ec(o))t.add(o);for(let o=e.anchorNode;o;o=ec(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&BT(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,h=[];if(e.editable)for(let g=0;g<t.length;g++){let _=this.registerMutation(t[g],h);_&&(o=o<0?_.from:Math.min(_.from,o),l=l<0?_.to:Math.max(_.to,l),_.typeOver&&(u=!0))}if(jr&&h.length){let g=h.filter(_=>_.nodeName=="BR");if(g.length==2){let[_,v]=g;_.parentNode&&_.parentNode.parentNode==v.parentNode?v.remove():_.remove()}else{let{focusNode:_}=this.currentSelection;for(let v of g){let S=v.parentNode;S&&S.nodeName=="LI"&&(!_||l2(e,_)!=S)&&v.remove()}}}let d=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Op(r)&&(d=dv(e))&&d.eq(Pe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,es(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),o2(e)),this.handleDOMChange(o,l,u,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||es(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let _=e.addedNodes[g];t.push(_),_.nodeType==3&&(this.lastChangedTextNode=_)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if($n&&lo<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:_,nextSibling:v}=e.addedNodes[g];(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(i=_),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(o=v)}let l=i&&i.parentNode==e.target?hn(i)+1:0,u=r.localPosFromDOM(e.target,l,-1),h=o&&o.parentNode==e.target?hn(o):e.target.childNodes.length,d=r.localPosFromDOM(e.target,h,1);return{from:u,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let WT=new WeakMap,QT=!1;function o2(n){if(!WT.has(n)&&(WT.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=jr,QT)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),QT=!0}}function YT(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Da(l.node,l.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function a2(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return YT(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?YT(n,t):null}function l2(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function c2(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:l,to:u}=n.docView.parseRange(e,t),h=n.domSelectionRange(),d,g=h.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(d=[{node:g,offset:h.anchorOffset}],Op(h)||d.push({node:h.focusNode,offset:h.focusOffset})),Tn&&n.input.lastKeyCode===8)for(let A=o;A>i;A--){let O=r.childNodes[A-1],z=O.pmViewDesc;if(O.nodeName=="BR"&&!z){o=A;break}if(!z||z.size)break}let _=n.state.doc,v=n.someProp("domParser")||ao.fromSchema(n.state.schema),S=_.resolve(l),b=null,C=v.parse(r,{topNode:S.parent,topMatch:S.parent.contentMatchAt(S.index()),topOpen:!0,from:i,to:o,preserveWhitespace:S.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:u2,context:S});if(d&&d[0].pos!=null){let A=d[0].pos,O=d[1]&&d[1].pos;O==null&&(O=A),b={anchor:A+l,head:O+l}}return{doc:C,sel:b,from:l,to:u}}function u2(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Pn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Pn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const h2=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function f2(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let k=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,D=dv(n,k);if(D&&!n.state.selection.eq(D)){if(Tn&&Qi&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",H=>H(n,ga(13,"Enter"))))return;let V=n.state.tr.setSelection(D);k=="pointer"?V.setMeta("pointer",!0):k=="key"&&V.scrollIntoView(),o&&V.setMeta("composition",o),n.dispatch(V)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let h=n.state.selection,d=c2(n,e,t),g=n.state.doc,_=g.slice(d.from,d.to),v,S;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(v=n.state.selection.to,S="end"):(v=n.state.selection.from,S="start"),n.input.lastKeyCode=null;let b=m2(_.content,d.doc.content,d.from,v,S);if(b&&n.input.domChangeCount++,(tc&&n.input.lastIOSEnter>Date.now()-225||Qi)&&i.some(k=>k.nodeType==1&&!h2.test(k.nodeName))&&(!b||b.endA>=b.endB)&&n.someProp("handleKeyDown",k=>k(n,ga(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!b)if(r&&h instanceof Ie&&!h.empty&&h.$head.sameParent(h.$anchor)&&!n.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))b={start:h.from,endA:h.to,endB:h.to};else{if(d.sel){let k=XT(n,n.state.doc,d.sel);if(k&&!k.eq(n.state.selection)){let D=n.state.tr.setSelection(k);o&&D.setMeta("composition",o),n.dispatch(D)}}return}n.state.selection.from<n.state.selection.to&&b.start==b.endB&&n.state.selection instanceof Ie&&(b.start>n.state.selection.from&&b.start<=n.state.selection.from+2&&n.state.selection.from>=d.from?b.start=n.state.selection.from:b.endA<n.state.selection.to&&b.endA>=n.state.selection.to-2&&n.state.selection.to<=d.to&&(b.endB+=n.state.selection.to-b.endA,b.endA=n.state.selection.to)),$n&&lo<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>d.from&&d.doc.textBetween(b.start-d.from-1,b.start-d.from+1)==" "&&(b.start--,b.endA--,b.endB--);let C=d.doc.resolveNoCache(b.start-d.from),A=d.doc.resolveNoCache(b.endB-d.from),O=g.resolve(b.start),z=C.sameParent(A)&&C.parent.inlineContent&&O.end()>=b.endA,Q;if((tc&&n.input.lastIOSEnter>Date.now()-225&&(!z||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!z&&C.pos<d.doc.content.size&&!C.sameParent(A)&&(Q=Pe.findFrom(d.doc.resolve(C.pos+1),1,!0))&&Q.head==A.pos)&&n.someProp("handleKeyDown",k=>k(n,ga(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>b.start&&p2(g,b.start,b.endA,C,A)&&n.someProp("handleKeyDown",k=>k(n,ga(8,"Backspace")))){Qi&&Tn&&n.domObserver.suppressSelectionUpdates();return}Tn&&b.endB==b.start&&(n.input.lastChromeDelete=Date.now()),Qi&&!z&&C.start()!=A.start()&&A.parentOffset==0&&C.depth==A.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==b.endA&&(b.endB-=2,A=d.doc.resolveNoCache(b.endB-d.from),setTimeout(()=>{n.someProp("handleKeyDown",function(k){return k(n,ga(13,"Enter"))})},20));let F=b.start,W=b.endA,X,N,x;if(z){if(C.pos==A.pos)$n&&lo<=11&&C.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>es(n),20)),X=n.state.tr.delete(F,W),N=g.resolve(b.start).marksAcross(g.resolve(b.endA));else if(b.endA==b.endB&&(x=d2(C.parent.content.cut(C.parentOffset,A.parentOffset),O.parent.content.cut(O.parentOffset,b.endA-O.start()))))X=n.state.tr,x.type=="add"?X.addMark(F,W,x.mark):X.removeMark(F,W,x.mark);else if(C.parent.child(C.index()).isText&&C.index()==A.index()-(A.textOffset?0:1)){let k=C.parent.textBetween(C.parentOffset,A.parentOffset);if(n.someProp("handleTextInput",D=>D(n,F,W,k)))return;X=n.state.tr.insertText(k,F,W)}}if(X||(X=n.state.tr.replace(F,W,d.doc.slice(b.start-d.from,b.endB-d.from))),d.sel){let k=XT(n,X.doc,d.sel);k&&!(Tn&&n.composing&&k.empty&&(b.start!=b.endB||n.input.lastChromeDelete<Date.now()-100)&&(k.head==F||k.head==X.mapping.map(W)-1)||$n&&k.empty&&k.head==F)&&X.setSelection(k)}N&&X.ensureMarks(N),o&&X.setMeta("composition",o),n.dispatch(X.scrollIntoView())}function XT(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:pv(n,e.resolve(t.anchor),e.resolve(t.head))}function d2(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,l,u,h;for(let g=0;g<r.length;g++)i=r[g].removeFromSet(i);for(let g=0;g<t.length;g++)o=t[g].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],l="add",h=g=>g.mark(u.addToSet(g.marks));else if(i.length==0&&o.length==1)u=o[0],l="remove",h=g=>g.mark(u.removeFromSet(g.marks));else return null;let d=[];for(let g=0;g<e.childCount;g++)d.push(h(e.child(g)));if(ae.from(d).eq(n))return{mark:u,type:l}}function p2(n,e,t,r,i){if(t-e<=i.pos-r.pos||Ay(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&t==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(Ay(o,!0,!0));return!l.parent.isTextblock||l.pos>t||Ay(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function Ay(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function m2(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let h=Math.max(0,o-Math.min(l,u));r-=l+h-o}if(l<o&&n.size<e.size){let h=r<=o&&r>=l?o-r:0;o-=h,o&&o<e.size&&JT(e.textBetween(o-1,o+1))&&(o+=h?1:-1),u=o+(u-l),l=o}else if(u<o){let h=r<=o&&r>=u?o-r:0;o-=h,o&&o<n.size&&JT(n.textBetween(o-1,o+1))&&(o+=h?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function JT(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class g2{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new PP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(rw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=tw(this),ew(this),this.nodeViews=nw(this),this.docView=MT(this.state.doc,ZT(this),Cy(this),this.dom,this),this.domObserver=new s2(this,(r,i,o,l)=>f2(this,r,i,o,l)),this.domObserver.start(),VP(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&y_(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(rw),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(DA(this),l=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let S=nw(this);_2(S,this.nodeViews)&&(this.nodeViews=S,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&y_(this),this.editable=tw(this),ew(this);let h=Cy(this),d=ZT(this),g=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",_=o||!this.docView.matchesNode(e.doc,d,h);(_||!e.selection.eq(i.selection))&&(l=!0);let v=g=="preserve"&&l&&this.dom.style.overflowAnchor==null&&YN(this);if(l){this.domObserver.stop();let S=_&&($n||Tn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&y2(i.selection,e.selection);if(_){let b=Tn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=QP(this)),(o||!this.docView.update(e.doc,d,h,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=MT(e.doc,d,h,this.dom,this)),b&&!this.trackWrites&&(S=!0)}S||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&EP(this))?es(this,S):(EA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():v&&XN(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Te){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&RT(this,t.getBoundingClientRect(),e)}else RT(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new NA(e.slice,e.move,i<0?void 0:Te.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(i=t?t(u):u))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if($n){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&JN(this.dom),es(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rP(this,e)}coordsAtPos(e,t=1){return fA(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return lP(this,t||this.state,e)}pasteHTML(e,t){return oh(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return oh(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return mv(this,e)}destroy(){this.docView&&(LP(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Cy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,BN())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return BP(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Pn&&this.root.nodeType===11&&qN(this.dom.ownerDocument)==this.dom&&a2(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function ZT(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Rr.node(0,n.state.doc.content.size,e)]}function ew(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Rr.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function tw(n){return!n.someProp("editable",e=>e(n.state)===!1)}function y2(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function nw(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function _2(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function rw(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var _o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},v2=typeof navigator<"u"&&/Mac/.test(navigator.platform),E2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var fn=0;fn<10;fn++)_o[48+fn]=_o[96+fn]=String(fn);for(var fn=1;fn<=24;fn++)_o[fn+111]="F"+fn;for(var fn=65;fn<=90;fn++)_o[fn]=String.fromCharCode(fn+32),Xd[fn]=String.fromCharCode(fn);for(var Ry in _o)Xd.hasOwnProperty(Ry)||(Xd[Ry]=_o[Ry]);function b2(n){var e=v2&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||E2&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Xd:_o)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const S2=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function T2(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,l;for(let u=0;u<e.length-1;u++){let h=e[u];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))S2?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function w2(n){let e=Object.create(null);for(let t in n)e[T2(t)]=n[t];return e}function ky(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function C2(n){return new Wn({props:{handleKeyDown:BA(n)}})}function BA(n){let e=w2(n);return function(t,r){let i=b2(r),o,l=e[ky(i,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[ky(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=_o[r.keyCode])&&o!=i){let u=e[ky(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const bv=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function zA(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const HA=(n,e,t)=>{let r=zA(n,t);if(!r)return!1;let i=Sv(r);if(!i){let l=r.blockRange(),u=l&&mc(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(YA(n,i,e,-1))return!0;if(r.parent.content.size==0&&(nc(o,"end")||Te.isSelectable(o)))for(let l=r.depth;;l--){let u=Ip(n.doc,r.before(l),r.after(l),fe.empty);if(u&&u.slice.size<u.to-u.from){if(e){let h=n.tr.step(u);h.setSelection(nc(o,"end")?Pe.findFrom(h.doc.resolve(h.mapping.map(i.pos,-1)),-1):Te.create(h.doc,i.pos-o.nodeSize)),e(h.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},A2=(n,e,t)=>{let r=zA(n,t);if(!r)return!1;let i=Sv(r);return i?jA(n,i,e):!1},R2=(n,e,t)=>{let r=qA(n,t);if(!r)return!1;let i=Tv(r);return i?jA(n,i,e):!1};function jA(n,e,t){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let g=i.lastChild;if(!g)return!1;i=g}let l=e.nodeAfter,u=l,h=e.pos+1;for(;!u.isTextblock;h++){if(u.type.spec.isolating)return!1;let g=u.firstChild;if(!g)return!1;u=g}let d=Ip(n.doc,o,h,fe.empty);if(!d||d.from!=o||d instanceof Zt&&d.slice.size>=h-o)return!1;if(t){let g=n.tr.step(d);g.setSelection(Ie.create(g.doc,o)),t(g.scrollIntoView())}return!0}function nc(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const FA=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=Sv(r)}let l=o&&o.nodeBefore;return!l||!Te.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Te.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function Sv(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function qA(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const $A=(n,e,t)=>{let r=qA(n,t);if(!r)return!1;let i=Tv(r);if(!i)return!1;let o=i.nodeAfter;if(YA(n,i,e,1))return!0;if(r.parent.content.size==0&&(nc(o,"start")||Te.isSelectable(o))){let l=Ip(n.doc,r.before(),r.after(),fe.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(nc(o,"start")?Pe.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):Te.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},GA=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=Tv(r)}let l=o&&o.nodeAfter;return!l||!Te.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Te.create(n.doc,o.pos)).scrollIntoView()),!0)};function Tv(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const k2=(n,e)=>{let t=n.selection,r=t instanceof Te,i;if(r){if(t.node.isTextblock||!ko(n.doc,t.from))return!1;i=t.from}else if(i=kp(n.doc,t.from,-1),i==null)return!1;if(e){let o=n.tr.join(i);r&&o.setSelection(Te.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},I2=(n,e)=>{let t=n.selection,r;if(t instanceof Te){if(t.node.isTextblock||!ko(n.doc,t.to))return!1;r=t.to}else if(r=kp(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},x2=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&mc(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},KA=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function wv(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const O2=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),l=wv(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let u=t.after(),h=n.tr.replaceWith(u,u,l.createAndFill());h.setSelection(Pe.near(h.doc.resolve(u),1)),e(h.scrollIntoView())}return!0},WA=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof or||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=wv(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(l,o.createAndFill());u.setSelection(Ie.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},QA=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Zi(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&mc(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function D2(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Te&&e.selection.node.isBlock)return!r.parentOffset||!Zi(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,h=!1,d=!1;for(let S=r.depth;;S--)if(r.node(S).isBlock){h=r.end(S)==r.pos+(r.depth-S),d=r.start(S)==r.pos-(r.depth-S),u=wv(r.node(S-1).contentMatchAt(r.indexAfter(S-1))),o.unshift(h&&u?{type:u}:null),l=S;break}else{if(S==1)return!1;o.unshift(null)}let g=e.tr;(e.selection instanceof Ie||e.selection instanceof or)&&g.deleteSelection();let _=g.mapping.map(r.pos),v=Zi(g.doc,_,o.length,o);if(v||(o[0]=u?{type:u}:null,v=Zi(g.doc,_,o.length,o)),g.split(_,o.length,o),!h&&d&&r.node(l).type!=u){let S=g.mapping.map(r.before(l)),b=g.doc.resolve(S);u&&r.node(l-1).canReplaceWith(b.index(),b.index()+1,u)&&g.setNodeMarkup(g.mapping.map(r.before(l)),u)}return t&&t(g.scrollIntoView()),!0}}const M2=D2(),N2=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection(Te.create(n.doc,i))),!0)};function P2(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||ko(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function YA(n,e,t,r){let i=e.nodeBefore,o=e.nodeAfter,l,u,h=i.type.spec.isolating||o.type.spec.isolating;if(!h&&P2(n,e,t))return!0;let d=!h&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(l=(u=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(t){let S=e.pos+o.nodeSize,b=ae.empty;for(let O=l.length-1;O>=0;O--)b=ae.from(l[O].create(null,b));b=ae.from(i.copy(b));let C=n.tr.step(new en(e.pos-1,S,e.pos,S,new fe(b,1,0),l.length,!0)),A=C.doc.resolve(S+2*l.length);A.nodeAfter&&A.nodeAfter.type==i.type&&ko(C.doc,A.pos)&&C.join(A.pos),t(C.scrollIntoView())}return!0}let g=o.type.spec.isolating||r>0&&h?null:Pe.findFrom(e,1),_=g&&g.$from.blockRange(g.$to),v=_&&mc(_);if(v!=null&&v>=e.depth)return t&&t(n.tr.lift(_,v).scrollIntoView()),!0;if(d&&nc(o,"start",!0)&&nc(i,"end")){let S=i,b=[];for(;b.push(S),!S.isTextblock;)S=S.lastChild;let C=o,A=1;for(;!C.isTextblock;C=C.firstChild)A++;if(S.canReplace(S.childCount,S.childCount,C.content)){if(t){let O=ae.empty;for(let Q=b.length-1;Q>=0;Q--)O=ae.from(b[Q].copy(O));let z=n.tr.step(new en(e.pos-b.length,e.pos+o.nodeSize,e.pos+A,e.pos+o.nodeSize-A,new fe(O,b.length,0),0,!0));t(z.scrollIntoView())}return!0}}return!1}function XA(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(Ie.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const V2=XA(-1),L2=XA(1);function U2(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,l=i.blockRange(o),u=l&&uv(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function iw(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(l,u,(h,d)=>{if(i)return!1;if(!(!h.isTextblock||h.hasMarkup(n,e)))if(h.type==n)i=!0;else{let g=t.doc.resolve(d),_=g.index();i=g.parent.canReplaceWith(_,_+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:h}}=t.selection.ranges[l];o.setBlockType(u,h,n,e)}r(o.scrollIntoView())}return!0}}function Cv(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}Cv(bv,HA,FA);Cv(bv,$A,GA);Cv(KA,WA,QA,M2);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function B2(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,l=i.blockRange(o);if(!l)return!1;let u=r?t.tr:null;return z2(u,l,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function z2(n,e,t,r=null){let i=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=l.resolve(e.start-2);o=new qd(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new qd(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=uv(o,t,r,e);return u?(n&&H2(n,e,u,i,t),!0):!1}function H2(n,e,t,r,i){let o=ae.empty;for(let g=t.length-1;g>=0;g--)o=ae.from(t[g].type.create(t[g].attrs,o));n.step(new en(e.start-(r?2:0),e.end,e.start,e.end,new fe(o,0,0),t.length,!0));let l=0;for(let g=0;g<t.length;g++)t[g].type==i&&(l=g+1);let u=t.length-l,h=e.start+t.length-(r?2:0),d=e.parent;for(let g=e.startIndex,_=e.endIndex,v=!0;g<_;g++,v=!1)!v&&Zi(n.doc,h,u)&&(n.split(h,u),h+=2*u),h+=d.child(g).nodeSize;return n}function j2(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?F2(e,t,n,o):q2(e,t,o):!0:!1}}function F2(n,e,t,r){let i=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new en(o-1,l,o,l,new fe(ae.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new qd(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const u=mc(r);if(u==null)return!1;i.lift(r,u);let h=i.doc.resolve(i.mapping.map(o,-1)-1);return ko(i.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&i.join(h.pos),e(i.scrollIntoView()),!0}function q2(n,e,t){let r=n.tr,i=t.parent;for(let S=t.end,b=t.endIndex-1,C=t.startIndex;b>C;b--)S-=i.child(b).nodeSize,r.delete(S-1,S+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,h=t.endIndex==i.childCount,d=o.node(-1),g=o.index(-1);if(!d.canReplace(g+(u?0:1),g+1,l.content.append(h?ae.empty:ae.from(i))))return!1;let _=o.pos,v=_+l.nodeSize;return r.step(new en(_-(u?1:0),v+(h?1:0),_+1,v-1,new fe((u?ae.empty:ae.from(i.copy(ae.empty))).append(h?ae.empty:ae.from(i.copy(ae.empty))),u?0:1,h?0:1),u?0:1)),e(r.scrollIntoView()),!0}function $2(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,h=u.child(l-1);if(h.type!=n)return!1;if(t){let d=h.lastChild&&h.lastChild.type==u.type,g=ae.from(d?n.create():null),_=new fe(ae.from(n.create(null,ae.from(u.type.create(null,g)))),d?3:1,0),v=o.start,S=o.end;t(e.tr.step(new en(v-(d?3:1),S,v,S,_,1,!0)).scrollIntoView())}return!0}}function Np(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,o=t.storedMarks,t}}}class Pp{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:o}=r,l=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([u,h])=>[u,(...g)=>{const _=h(...g)(l);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),_}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:l}=i,u=[],h=!!e,d=e||o.tr,g=()=>(!h&&t&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(d),u.every(v=>v===!0)),_={...Object.fromEntries(Object.entries(r).map(([v,S])=>[v,(...C)=>{const A=this.buildProps(d,t),O=S(...C)(A);return u.push(O),_}])),run:g};return _}createCan(e){const{rawCommands:t,state:r}=this,i=!1,o=e||r.tr,l=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(t).map(([h,d])=>[h,(...g)=>d(...g)({...l,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:l}=i,u={tr:e,editor:i,view:l,state:Np({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([h,d])=>[h,(...g)=>d(...g)(u)]))}};return u}}class G2{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function _e(n,e,t){return n.config[e]===void 0&&n.parent?_e(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?_e(n.parent,e,t):null}):n.config[e]}function Vp(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function JA(n){const e=[],{nodeExtensions:t,markExtensions:r}=Vp(n),i=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:i},h=_e(l,"addGlobalAttributes",u);if(!h)return;h().forEach(g=>{g.types.forEach(_=>{Object.entries(g.attributes).forEach(([v,S])=>{e.push({type:_,name:v,attribute:{...o,...S}})})})})}),i.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},h=_e(l,"addAttributes",u);if(!h)return;const d=h();Object.entries(d).forEach(([g,_])=>{const v={...o,..._};typeof(v==null?void 0:v.default)=="function"&&(v.default=v.default()),v!=null&&v.isRequired&&(v==null?void 0:v.default)===void 0&&delete v.default,e.push({type:l.name,name:g,attribute:v})})}),e}function nn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Un(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const u=o?String(o).split(" "):[],h=r[i]?r[i].split(" "):[],d=u.filter(g=>!h.includes(g));r[i]=[...h,...d].join(" ")}else if(i==="style"){const u=o?o.split(";").map(g=>g.trim()).filter(Boolean):[],h=r[i]?r[i].split(";").map(g=>g.trim()).filter(Boolean):[],d=new Map;h.forEach(g=>{const[_,v]=g.split(":").map(S=>S.trim());d.set(_,v)}),u.forEach(g=>{const[_,v]=g.split(":").map(S=>S.trim());d.set(_,v)}),r[i]=Array.from(d.entries()).map(([g,_])=>`${g}: ${_}`).join("; ")}else r[i]=o}),r},{})}function __(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Un(t,r),{})}function ZA(n){return typeof n=="function"}function Le(n,e=void 0,...t){return ZA(n)?e?n.bind(e)(...t):n(...t):n}function K2(n={}){return Object.keys(n).length===0&&n.constructor===Object}function W2(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function sw(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(t):W2(t.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...i}}}}function ow(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&K2(t)?!1:t!=null))}function Q2(n,e){var t;const r=JA(n),{nodeExtensions:i,markExtensions:o}=Vp(n),l=(t=i.find(d=>_e(d,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(i.map(d=>{const g=r.filter(O=>O.type===d.name),_={name:d.name,options:d.options,storage:d.storage,editor:e},v=n.reduce((O,z)=>{const Q=_e(z,"extendNodeSchema",_);return{...O,...Q?Q(d):{}}},{}),S=ow({...v,content:Le(_e(d,"content",_)),marks:Le(_e(d,"marks",_)),group:Le(_e(d,"group",_)),inline:Le(_e(d,"inline",_)),atom:Le(_e(d,"atom",_)),selectable:Le(_e(d,"selectable",_)),draggable:Le(_e(d,"draggable",_)),code:Le(_e(d,"code",_)),whitespace:Le(_e(d,"whitespace",_)),linebreakReplacement:Le(_e(d,"linebreakReplacement",_)),defining:Le(_e(d,"defining",_)),isolating:Le(_e(d,"isolating",_)),attrs:Object.fromEntries(g.map(O=>{var z;return[O.name,{default:(z=O==null?void 0:O.attribute)===null||z===void 0?void 0:z.default}]}))}),b=Le(_e(d,"parseHTML",_));b&&(S.parseDOM=b.map(O=>sw(O,g)));const C=_e(d,"renderHTML",_);C&&(S.toDOM=O=>C({node:O,HTMLAttributes:__(O,g)}));const A=_e(d,"renderText",_);return A&&(S.toText=A),[d.name,S]})),h=Object.fromEntries(o.map(d=>{const g=r.filter(A=>A.type===d.name),_={name:d.name,options:d.options,storage:d.storage,editor:e},v=n.reduce((A,O)=>{const z=_e(O,"extendMarkSchema",_);return{...A,...z?z(d):{}}},{}),S=ow({...v,inclusive:Le(_e(d,"inclusive",_)),excludes:Le(_e(d,"excludes",_)),group:Le(_e(d,"group",_)),spanning:Le(_e(d,"spanning",_)),code:Le(_e(d,"code",_)),attrs:Object.fromEntries(g.map(A=>{var O;return[A.name,{default:(O=A==null?void 0:A.attribute)===null||O===void 0?void 0:O.default}]}))}),b=Le(_e(d,"parseHTML",_));b&&(S.parseDOM=b.map(A=>sw(A,g)));const C=_e(d,"renderHTML",_);return C&&(S.toDOM=A=>C({mark:A,HTMLAttributes:__(A,g)})),[d.name,S]}));return new jC({topNode:l,nodes:u,marks:h})}function Iy(n,e){return e.nodes[n]||e.marks[n]||null}function aw(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Av(n,e){const t=za.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const Y2=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,o,l,u)=>{var h,d;const g=((d=(h=i.type.spec).toText)===null||d===void 0?void 0:d.call(h,{node:i,pos:o,parent:l,index:u}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?g:g.slice(0,Math.max(0,r-o))}),t};function Rv(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Lp{constructor(e){this.find=e.find,this.handler=e.handler}}const X2=(n,e)=>{if(Rv(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function ud(n){var e;const{editor:t,from:r,to:i,text:o,rules:l,plugin:u}=n,{view:h}=t;if(h.composing)return!1;const d=h.state.doc.resolve(r);if(d.parent.type.spec.code||!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(v=>v.type.spec.code))return!1;let g=!1;const _=Y2(d)+o;return l.forEach(v=>{if(g)return;const S=X2(_,v.find);if(!S)return;const b=h.state.tr,C=Np({state:h.state,transaction:b}),A={from:r-(S[0].length-o.length),to:i},{commands:O,chain:z,can:Q}=new Pp({editor:t,state:C});v.handler({state:C,range:A,match:S,commands:O,chain:z,can:Q})===null||!b.steps.length||(b.setMeta(u,{transform:b,from:r,to:i,text:o}),h.dispatch(b),g=!0)}),g}function J2(n){const{editor:e,rules:t}=n,r=new Wn({state:{init(){return null},apply(i,o,l){const u=i.getMeta(r);if(u)return u;const h=i.getMeta("applyInputRules");return!!h&&setTimeout(()=>{let{text:g}=h;typeof g=="string"?g=g:g=Av(ae.from(g),l.schema);const{from:_}=h,v=_+g.length;ud({editor:e,from:_,to:v,text:g,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,l,u){return ud({editor:e,from:o,to:l,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&ud({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?ud({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function Z2(n){return Object.prototype.toString.call(n).slice(8,-1)}function hd(n){return Z2(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Up(n,e){const t={...n};return hd(n)&&hd(e)&&Object.keys(e).forEach(r=>{hd(e[r])&&hd(n[r])?t[r]=Up(n[r],e[r]):t[r]=e[r]}),t}class vo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(_e(this,"addOptions",{name:this.name}))),this.storage=Le(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new vo(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Up(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new vo(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Le(_e(t,"addOptions",{name:t.name})),t.storage=Le(_e(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(d=>(d==null?void 0:d.type.name)===t.name))return!1;const h=l.find(d=>(d==null?void 0:d.type.name)===t.name);return h&&r.removeStoredMark(h),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function eV(n){return typeof n=="number"}class tV{constructor(e){this.find=e.find,this.handler=e.handler}}const nV=(n,e,t)=>{if(Rv(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=n,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function rV(n){const{editor:e,state:t,from:r,to:i,rule:o,pasteEvent:l,dropEvent:u}=n,{commands:h,chain:d,can:g}=new Pp({editor:e,state:t}),_=[];return t.doc.nodesBetween(r,i,(S,b)=>{if(!S.isTextblock||S.type.spec.code)return;const C=Math.max(r,b),A=Math.min(i,b+S.content.size),O=S.textBetween(C-b,A-b,void 0,"");nV(O,o.find,l).forEach(Q=>{if(Q.index===void 0)return;const F=C+Q.index+1,W=F+Q[0].length,X={from:t.tr.mapping.map(F),to:t.tr.mapping.map(W)},N=o.handler({state:t,range:X,match:Q,commands:h,chain:d,can:g,pasteEvent:l,dropEvent:u});_.push(N)})}),_.every(S=>S!==null)}let fd=null;const iV=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function sV(n){const{editor:e,rules:t}=n;let r=null,i=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const h=({state:g,from:_,to:v,rule:S,pasteEvt:b})=>{const C=g.tr,A=Np({state:g,transaction:C});if(!(!rV({editor:e,state:A,from:Math.max(_-1,0),to:v.b-1,rule:S,pasteEvent:b,dropEvent:u})||!C.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return t.map(g=>new Wn({view(_){const v=b=>{var C;r=!((C=_.dom.parentElement)===null||C===void 0)&&C.contains(b.target)?_.dom.parentElement:null,r&&(fd=e)},S=()=>{fd&&(fd=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",S),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",S)}}},props:{handleDOMEvents:{drop:(_,v)=>{if(o=r===_.dom.parentElement,u=v,!o){const S=fd;S&&setTimeout(()=>{const b=S.state.selection;b&&S.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(_,v)=>{var S;const b=(S=v.clipboardData)===null||S===void 0?void 0:S.getData("text/html");return l=v,i=!!(b!=null&&b.includes("data-pm-slice")),!1}}},appendTransaction:(_,v,S)=>{const b=_[0],C=b.getMeta("uiEvent")==="paste"&&!i,A=b.getMeta("uiEvent")==="drop"&&!o,O=b.getMeta("applyPasteRules"),z=!!O;if(!C&&!A&&!z)return;if(z){let{text:W}=O;typeof W=="string"?W=W:W=Av(ae.from(W),S.schema);const{from:X}=O,N=X+W.length,x=iV(W);return h({rule:g,state:S,from:X,to:{b:N},pasteEvt:x})}const Q=v.doc.content.findDiffStart(S.doc.content),F=v.doc.content.findDiffEnd(S.doc.content);if(!(!eV(Q)||!F||Q===F.b))return h({rule:g,state:S,from:Q,to:F,pasteEvt:l})}}))}function oV(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class ql{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=ql.resolve(e),this.schema=Q2(this.extensions,t),this.setupExtensions()}static resolve(e){const t=ql.sort(ql.flatten(e)),r=oV(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=_e(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=_e(r,"priority")||100,l=_e(i,"priority")||100;return o>l?-1:o<l?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Iy(t.name,this.schema)},i=_e(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=ql.sort([...this.extensions].reverse()),r=[],i=[],o=t.map(l=>{const u={name:l.name,options:l.options,storage:l.storage,editor:e,type:Iy(l.name,this.schema)},h=[],d=_e(l,"addKeyboardShortcuts",u);let g={};if(l.type==="mark"&&_e(l,"exitable",u)&&(g.ArrowRight=()=>vo.handleExit({editor:e,mark:l})),d){const C=Object.fromEntries(Object.entries(d()).map(([A,O])=>[A,()=>O({editor:e})]));g={...g,...C}}const _=C2(g);h.push(_);const v=_e(l,"addInputRules",u);aw(l,e.options.enableInputRules)&&v&&r.push(...v());const S=_e(l,"addPasteRules",u);aw(l,e.options.enablePasteRules)&&S&&i.push(...S());const b=_e(l,"addProseMirrorPlugins",u);if(b){const C=b();h.push(...C)}return h}).flat();return[J2({editor:e,rules:r}),...sV({editor:e,rules:i}),...o]}get attributes(){return JA(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Vp(this.extensions);return Object.fromEntries(t.filter(r=>!!_e(r,"addNodeView")).map(r=>{const i=this.attributes.filter(h=>h.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:nn(r.name,this.schema)},l=_e(r,"addNodeView",o);if(!l)return[];const u=(h,d,g,_,v)=>{const S=__(h,i);return l()({node:h,view:d,getPos:g,decorations:_,innerDecorations:v,editor:e,extension:r,HTMLAttributes:S})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Iy(e.name,this.schema)};e.type==="mark"&&(!((t=Le(_e(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=_e(e,"onBeforeCreate",r),o=_e(e,"onCreate",r),l=_e(e,"onUpdate",r),u=_e(e,"onSelectionUpdate",r),h=_e(e,"onTransaction",r),d=_e(e,"onFocus",r),g=_e(e,"onBlur",r),_=_e(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),h&&this.editor.on("transaction",h),d&&this.editor.on("focus",d),g&&this.editor.on("blur",g),_&&this.editor.on("destroy",_)})}}class Bn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(_e(this,"addOptions",{name:this.name}))),this.storage=Le(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Bn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Up(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Bn({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Le(_e(t,"addOptions",{name:t.name})),t.storage=Le(_e(t,"addStorage",{name:t.name,options:t.options})),t}}function eR(n,e,t){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:l={}}=t||{};let u="";return n.nodesBetween(r,i,(h,d,g,_)=>{var v;h.isBlock&&d>r&&(u+=o);const S=l==null?void 0:l[h.type.name];if(S)return g&&(u+=S({node:h,pos:d,parent:g,index:_,range:e})),!1;h.isText&&(u+=(v=h==null?void 0:h.text)===null||v===void 0?void 0:v.slice(Math.max(r,d)-d,i-d))}),u}function tR(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const aV=Bn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Wn({key:new vi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:o}=i,l=Math.min(...o.map(g=>g.$from.pos)),u=Math.max(...o.map(g=>g.$to.pos)),h=tR(t);return eR(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:h})}}})]}}),lV=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),cV=(n=!1)=>({commands:e})=>e.setContent("",n),uV=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:o,$to:l})=>{n.doc.nodesBetween(o.pos,l.pos,(u,h)=>{if(u.type.isText)return;const{doc:d,mapping:g}=e,_=d.resolve(g.map(h)),v=d.resolve(g.map(h+u.nodeSize)),S=_.blockRange(v);if(!S)return;const b=mc(S);if(u.type.isTextblock){const{defaultType:C}=_.parent.contentMatchAt(_.index());e.setNodeMarkup(S.start,C)}(b||b===0)&&e.lift(S,b)})}),!0},hV=n=>e=>n(e),fV=()=>({state:n,dispatch:e})=>WA(n,e),dV=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,o=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new Ie(r.doc.resolve(l-1))),!0},pV=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const u=i.before(o),h=i.after(o);n.delete(u,h).scrollIntoView()}return!0}return!1},mV=n=>({tr:e,state:t,dispatch:r})=>{const i=nn(n,t.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const h=o.before(l),d=o.after(l);e.delete(h,d).scrollIntoView()}return!0}return!1},gV=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},yV=()=>({state:n,dispatch:e})=>bv(n,e),_V=()=>({commands:n})=>n.keyboardShortcut("Enter"),vV=()=>({state:n,dispatch:e})=>O2(n,e);function Jd(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Rv(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function nR(n,e,t={}){return n.find(r=>r.type===e&&Jd(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function lw(n,e,t={}){return!!nR(n,e,t)}function kv(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(g=>g.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(g=>g.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!nR([...i.node.marks],e,t)))return;let l=i.index,u=n.start()+i.offset,h=l+1,d=u+i.node.nodeSize;for(;l>0&&lw([...n.parent.child(l-1).marks],e,t);)l-=1,u-=n.parent.child(l).nodeSize;for(;h<n.parent.childCount&&lw([...n.parent.child(h).marks],e,t);)d+=n.parent.child(h).nodeSize,h+=1;return{from:u,to:d}}function xo(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const EV=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const o=xo(n,r.schema),{doc:l,selection:u}=t,{$from:h,from:d,to:g}=u;if(i){const _=kv(h,o,e);if(_&&_.from<=d&&_.to>=g){const v=Ie.create(l,_.from,_.to);t.setSelection(v)}}return!0},bV=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function rR(n){return n instanceof Ie}function Ea(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function iR(n,e=null){if(!e)return null;const t=Pe.atStart(n),r=Pe.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,o=r.to;return e==="all"?Ie.create(n,Ea(0,i,o),Ea(n.content.size,i,o)):Ie.create(n,Ea(e,i,o),Ea(e,i,o))}function SV(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Iv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const TV=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Iv()||SV())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!rR(t.state.selection))return l(),!0;const u=iR(i.doc,n)||t.state.selection,h=t.state.selection.eq(u);return o&&(h||i.setSelection(u),h&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},wV=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),CV=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),sR=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&sR(r)}return n};function dd(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return sR(t)}function Zd(n,e,t){if(n instanceof oo||n instanceof ae)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ae.fromArray(n.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Zd("",e,t)}if(i){if(t.errorOnInvalidContent){let l=!1,u="";const h=new jC({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(l=!0,u=typeof d=="string"?d:d.outerHTML,null)}]}})});if(t.slice?ao.fromSchema(h).parseSlice(dd(n),t.parseOptions):ao.fromSchema(h).parse(dd(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=ao.fromSchema(e);return t.slice?o.parseSlice(dd(n),t.parseOptions).content:o.parse(dd(n),t.parseOptions)}return Zd("",e,t)}function AV(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Zt||i instanceof en))return;const o=n.mapping.maps[r];let l=0;o.forEach((u,h,d,g)=>{l===0&&(l=g)}),n.setSelection(Pe.near(n.doc.resolve(l),t))}const RV=n=>!("type"in n),kV=(n,e,t)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;try{u=Zd(e,o.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(l=t.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck})}catch(b){return o.emit("contentError",{editor:o,error:b,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:h,to:d}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},g=!0,_=!0;if((RV(u)?u:[u]).forEach(b=>{b.check(),g=g?b.isText&&b.marks.length===0:!1,_=_?b.isBlock:!1}),h===d&&_){const{parent:b}=r.doc.resolve(h);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(h-=1,d+=1)}let S;if(g){if(Array.isArray(e))S=e.map(b=>b.text||"").join("");else if(e instanceof ae){let b="";e.forEach(C=>{C.text&&(b+=C.text)}),S=b}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,h,d)}else S=u,r.replaceWith(h,d,S);t.updateSelection&&AV(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},IV=()=>({state:n,dispatch:e})=>k2(n,e),xV=()=>({state:n,dispatch:e})=>I2(n,e),OV=()=>({state:n,dispatch:e})=>HA(n,e),DV=()=>({state:n,dispatch:e})=>$A(n,e),MV=()=>({state:n,dispatch:e,tr:t})=>{try{const r=kp(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},NV=()=>({state:n,dispatch:e,tr:t})=>{try{const r=kp(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},PV=()=>({state:n,dispatch:e})=>A2(n,e),VV=()=>({state:n,dispatch:e})=>R2(n,e);function oR(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function LV(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,o,l;for(let u=0;u<e.length-1;u+=1){const h=e[u];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))Iv()||oR()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${h}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const UV=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const o=LV(n).split(/-(?!$)/),l=o.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),h=e.captureTransaction(()=>{t.someProp("handleKeyDown",d=>d(t,u))});return h==null||h.steps.forEach(d=>{const g=d.map(r.mapping);g&&i&&r.maybeStep(g)}),!0};function lh(n,e,t={}){const{from:r,to:i,empty:o}=n.selection,l=e?nn(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(_,v)=>{if(_.isText)return;const S=Math.max(r,v),b=Math.min(i,v+_.nodeSize);u.push({node:_,from:S,to:b})});const h=i-r,d=u.filter(_=>l?l.name===_.node.type.name:!0).filter(_=>Jd(_.node.attrs,t,{strict:!1}));return o?!!d.length:d.reduce((_,v)=>_+v.to-v.from,0)>=h}const BV=(n,e={})=>({state:t,dispatch:r})=>{const i=nn(n,t.schema);return lh(t,i,e)?x2(t,r):!1},zV=()=>({state:n,dispatch:e})=>QA(n,e),HV=n=>({state:e,dispatch:t})=>{const r=nn(n,e.schema);return j2(r)(e,t)},jV=()=>({state:n,dispatch:e})=>KA(n,e);function Bp(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function cw(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const FV=(n,e)=>({tr:t,state:r,dispatch:i})=>{let o=null,l=null;const u=Bp(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=nn(n,r.schema)),u==="mark"&&(l=xo(n,r.schema)),i&&t.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(d,g)=>{o&&o===d.type&&t.setNodeMarkup(g,void 0,cw(d.attrs,e)),l&&d.marks.length&&d.marks.forEach(_=>{l===_.type&&t.addMark(g,g+d.nodeSize,l.create(cw(_.attrs,e)))})})}),!0):!1},qV=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),$V=()=>({tr:n,dispatch:e})=>{if(e){const t=new or(n.doc);n.setSelection(t)}return!0},GV=()=>({state:n,dispatch:e})=>FA(n,e),KV=()=>({state:n,dispatch:e})=>GA(n,e),WV=()=>({state:n,dispatch:e})=>N2(n,e),QV=()=>({state:n,dispatch:e})=>L2(n,e),YV=()=>({state:n,dispatch:e})=>V2(n,e);function v_(n,e,t={},r={}){return Zd(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const XV=(n,e=!1,t={},r={})=>({editor:i,tr:o,dispatch:l,commands:u})=>{var h,d;const{doc:g}=o;if(t.preserveWhitespace!=="full"){const _=v_(n,i.schema,t,{errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:i.options.enableContentCheck});return l&&o.replaceWith(0,g.content.size,_).setMeta("preventUpdate",!e),!0}return l&&o.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:g.content.size},n,{parseOptions:t,errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:i.options.enableContentCheck})};function aR(n,e){const t=xo(e,n.schema),{from:r,to:i,empty:o}=n.selection,l=[];o?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,h=>{l.push(...h.marks)});const u=l.find(h=>h.type.name===t.name);return u?{...u.attrs}:{}}function JV(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function ZV(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function xv(n){return e=>ZV(e.$from,n)}function eL(n,e){const t={from:0,to:n.content.size};return eR(n,t,e)}function tL(n,e){const t=nn(e,n.schema),{from:r,to:i}=n.selection,o=[];n.doc.nodesBetween(r,i,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===t.name);return l?{...l.attrs}:{}}function nL(n,e){const t=Bp(typeof e=="string"?e:e.name,n.schema);return t==="node"?tL(n,e):t==="mark"?aR(n,e):{}}function lR(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const o=t.resolve(n),l=kv(o,i.type);l&&r.push({mark:i,...l})}):t.nodesBetween(n,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}function Rd(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function E_(n,e,t={}){const{empty:r,ranges:i}=n.selection,o=e?xo(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(_=>o?o.name===_.type.name:!0).find(_=>Jd(_.attrs,t,{strict:!1}));let l=0;const u=[];if(i.forEach(({$from:_,$to:v})=>{const S=_.pos,b=v.pos;n.doc.nodesBetween(S,b,(C,A)=>{if(!C.isText&&!C.marks.length)return;const O=Math.max(S,A),z=Math.min(b,A+C.nodeSize),Q=z-O;l+=Q,u.push(...C.marks.map(F=>({mark:F,from:O,to:z})))})}),l===0)return!1;const h=u.filter(_=>o?o.name===_.mark.type.name:!0).filter(_=>Jd(_.mark.attrs,t,{strict:!1})).reduce((_,v)=>_+v.to-v.from,0),d=u.filter(_=>o?_.mark.type!==o&&_.mark.type.excludes(o):!0).reduce((_,v)=>_+v.to-v.from,0);return(h>0?h+d:h)>=l}function rL(n,e,t={}){if(!e)return lh(n,null,t)||E_(n,null,t);const r=Bp(e,n.schema);return r==="node"?lh(n,e,t):r==="mark"?E_(n,e,t):!1}function uw(n,e){const{nodeExtensions:t}=Vp(e),r=t.find(l=>l.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Le(_e(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Ov(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(o=>{i!==!1&&(Ov(o,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function iL(n){return n instanceof Te}function sL(n,e,t){var r;const{selection:i}=e;let o=null;if(rR(i)&&(o=i.$cursor),o){const u=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(u)||!u.some(h=>h.type.excludes(t))}const{ranges:l}=i;return l.some(({$from:u,$to:h})=>{let d=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,h.pos,(g,_,v)=>{if(d)return!1;if(g.isInline){const S=!v||v.type.allowsMarkType(t),b=!!t.isInSet(g.marks)||!g.marks.some(C=>C.type.excludes(t));d=S&&b}return!d}),d})}const oL=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:o}=t,{empty:l,ranges:u}=o,h=xo(n,r.schema);if(i)if(l){const d=aR(r,h);t.addStoredMark(h.create({...d,...e}))}else u.forEach(d=>{const g=d.$from.pos,_=d.$to.pos;r.doc.nodesBetween(g,_,(v,S)=>{const b=Math.max(S,g),C=Math.min(S+v.nodeSize,_);v.marks.find(O=>O.type===h)?v.marks.forEach(O=>{h===O.type&&t.addMark(b,C,h.create({...O.attrs,...e}))}):t.addMark(b,C,h.create(e))})});return sL(r,t,h)},aL=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),lL=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const o=nn(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:u})=>iw(o,{...l,...e})(t)?!0:u.clearNodes()).command(({state:u})=>iw(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},cL=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Ea(n,0,r.content.size),o=Te.create(r,i);e.setSelection(o)}return!0},uL=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,l=Ie.atStart(r).from,u=Ie.atEnd(r).to,h=Ea(i,l,u),d=Ea(o,l,u),g=Ie.create(r,h,d);e.setSelection(g)}return!0},hL=n=>({state:e,dispatch:t})=>{const r=nn(n,e.schema);return $2(r)(e,t)};function hw(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const fL=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:o,doc:l}=e,{$from:u,$to:h}=o,d=i.extensionManager.attributes,g=Rd(d,u.node().type.name,u.node().attrs);if(o instanceof Te&&o.node.isBlock)return!u.parentOffset||!Zi(l,u.pos)?!1:(r&&(n&&hw(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const _=h.parentOffset===h.parent.content.size,v=u.depth===0?void 0:JV(u.node(-1).contentMatchAt(u.indexAfter(-1)));let S=_&&v?[{type:v,attrs:g}]:void 0,b=Zi(e.doc,e.mapping.map(u.pos),1,S);if(!S&&!b&&Zi(e.doc,e.mapping.map(u.pos),1,v?[{type:v}]:void 0)&&(b=!0,S=v?[{type:v,attrs:g}]:void 0),r){if(b&&(o instanceof Ie&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,S),v&&!_&&!u.parentOffset&&u.parent.type!==v)){const C=e.mapping.map(u.before()),A=e.doc.resolve(C);u.node(-1).canReplaceWith(A.index(),A.index()+1,v)&&e.setNodeMarkup(e.mapping.map(u.before()),v)}n&&hw(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return b},dL=(n,e={})=>({tr:t,state:r,dispatch:i,editor:o})=>{var l;const u=nn(n,r.schema),{$from:h,$to:d}=r.selection,g=r.selection.node;if(g&&g.isBlock||h.depth<2||!h.sameParent(d))return!1;const _=h.node(-1);if(_.type!==u)return!1;const v=o.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==u||h.index(-2)!==h.node(-2).childCount-1)return!1;if(i){let O=ae.empty;const z=h.index(-1)?1:h.index(-2)?2:3;for(let x=h.depth-z;x>=h.depth-3;x-=1)O=ae.from(h.node(x).copy(O));const Q=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,F={...Rd(v,h.node().type.name,h.node().attrs),...e},W=((l=u.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(F))||void 0;O=O.append(ae.from(u.createAndFill(null,W)||void 0));const X=h.before(h.depth-(z-1));t.replace(X,h.after(-Q),new fe(O,4-z,0));let N=-1;t.doc.nodesBetween(X,t.doc.content.size,(x,k)=>{if(N>-1)return!1;x.isTextblock&&x.content.size===0&&(N=k+1)}),N>-1&&t.setSelection(Ie.near(t.doc.resolve(N))),t.scrollIntoView()}return!0}const S=d.pos===h.end()?_.contentMatchAt(0).defaultType:null,b={...Rd(v,_.type.name,_.attrs),...e},C={...Rd(v,h.node().type.name,h.node().attrs),...e};t.delete(h.pos,d.pos);const A=S?[{type:u,attrs:b},{type:S,attrs:C}]:[{type:u,attrs:b}];if(!Zi(t.doc,h.pos,2))return!1;if(i){const{selection:O,storedMarks:z}=r,{splittableMarks:Q}=o.extensionManager,F=z||O.$to.parentOffset&&O.$from.marks();if(t.split(h.pos,2,A).scrollIntoView(),!F||!i)return!0;const W=F.filter(X=>Q.includes(X.type.name));t.ensureMarks(W)}return!0},xy=(n,e)=>{const t=xv(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ko(n.doc,t.pos)&&n.join(t.pos),!0},Oy=(n,e)=>{const t=xv(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ko(n.doc,r)&&n.join(r),!0},pL=(n,e,t,r={})=>({editor:i,tr:o,state:l,dispatch:u,chain:h,commands:d,can:g})=>{const{extensions:_,splittableMarks:v}=i.extensionManager,S=nn(n,l.schema),b=nn(e,l.schema),{selection:C,storedMarks:A}=l,{$from:O,$to:z}=C,Q=O.blockRange(z),F=A||C.$to.parentOffset&&C.$from.marks();if(!Q)return!1;const W=xv(X=>uw(X.type.name,_))(C);if(Q.depth>=1&&W&&Q.depth-W.depth<=1){if(W.node.type===S)return d.liftListItem(b);if(uw(W.node.type.name,_)&&S.validContent(W.node.content)&&u)return h().command(()=>(o.setNodeMarkup(W.pos,S),!0)).command(()=>xy(o,S)).command(()=>Oy(o,S)).run()}return!t||!F||!u?h().command(()=>g().wrapInList(S,r)?!0:d.clearNodes()).wrapInList(S,r).command(()=>xy(o,S)).command(()=>Oy(o,S)).run():h().command(()=>{const X=g().wrapInList(S,r),N=F.filter(x=>v.includes(x.type.name));return o.ensureMarks(N),X?!0:d.clearNodes()}).wrapInList(S,r).command(()=>xy(o,S)).command(()=>Oy(o,S)).run()},mL=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=t,l=xo(n,r.schema);return E_(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,e)},gL=(n,e,t={})=>({state:r,commands:i})=>{const o=nn(n,r.schema),l=nn(e,r.schema),u=lh(r,o,t);let h;return r.selection.$anchor.sameParent(r.selection.$head)&&(h=r.selection.$anchor.parent.attrs),u?i.setNode(l,h):i.setNode(o,{...h,...t})},yL=(n,e={})=>({state:t,commands:r})=>{const i=nn(n,t.schema);return lh(t,i,e)?r.lift(i):r.wrapIn(i,e)},_L=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){const l=n.tr,u=o.transform;for(let h=u.steps.length-1;h>=0;h-=1)l.step(u.steps[h].invert(u.docs[h]));if(o.text){const h=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,h))}else l.delete(o.from,o.to)}return!0}}return!1},vL=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},EL=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=t,h=xo(n,r.schema),{$from:d,empty:g,ranges:_}=u;if(!i)return!0;if(g&&l){let{from:v,to:S}=u;const b=(o=d.marks().find(A=>A.type===h))===null||o===void 0?void 0:o.attrs,C=kv(d,h,b);C&&(v=C.from,S=C.to),t.removeMark(v,S,h)}else _.forEach(v=>{t.removeMark(v.$from.pos,v.$to.pos,h)});return t.removeStoredMark(h),!0},bL=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let o=null,l=null;const u=Bp(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=nn(n,r.schema)),u==="mark"&&(l=xo(n,r.schema)),i&&t.selection.ranges.forEach(h=>{const d=h.$from.pos,g=h.$to.pos;let _,v,S,b;t.selection.empty?r.doc.nodesBetween(d,g,(C,A)=>{o&&o===C.type&&(S=Math.max(A,d),b=Math.min(A+C.nodeSize,g),_=A,v=C)}):r.doc.nodesBetween(d,g,(C,A)=>{A<d&&o&&o===C.type&&(S=Math.max(A,d),b=Math.min(A+C.nodeSize,g),_=A,v=C),A>=d&&A<=g&&(o&&o===C.type&&t.setNodeMarkup(A,void 0,{...C.attrs,...e}),l&&C.marks.length&&C.marks.forEach(O=>{if(l===O.type){const z=Math.max(A,d),Q=Math.min(A+C.nodeSize,g);t.addMark(z,Q,l.create({...O.attrs,...e}))}}))}),v&&(_!==void 0&&t.setNodeMarkup(_,void 0,{...v.attrs,...e}),l&&v.marks.length&&v.marks.forEach(C=>{l===C.type&&t.addMark(S,b,l.create({...C.attrs,...e}))}))}),!0):!1},SL=(n,e={})=>({state:t,dispatch:r})=>{const i=nn(n,t.schema);return U2(i,e)(t,r)},TL=(n,e={})=>({state:t,dispatch:r})=>{const i=nn(n,t.schema);return B2(i,e)(t,r)};var wL=Object.freeze({__proto__:null,blur:lV,clearContent:cV,clearNodes:uV,command:hV,createParagraphNear:fV,cut:dV,deleteCurrentNode:pV,deleteNode:mV,deleteRange:gV,deleteSelection:yV,enter:_V,exitCode:vV,extendMarkRange:EV,first:bV,focus:TV,forEach:wV,insertContent:CV,insertContentAt:kV,joinBackward:OV,joinDown:xV,joinForward:DV,joinItemBackward:MV,joinItemForward:NV,joinTextblockBackward:PV,joinTextblockForward:VV,joinUp:IV,keyboardShortcut:UV,lift:BV,liftEmptyBlock:zV,liftListItem:HV,newlineInCode:jV,resetAttributes:FV,scrollIntoView:qV,selectAll:$V,selectNodeBackward:GV,selectNodeForward:KV,selectParentNode:WV,selectTextblockEnd:QV,selectTextblockStart:YV,setContent:XV,setMark:oL,setMeta:aL,setNode:lL,setNodeSelection:cL,setTextSelection:uL,sinkListItem:hL,splitBlock:fL,splitListItem:dL,toggleList:pL,toggleMark:mL,toggleNode:gL,toggleWrap:yL,undoInputRule:_L,unsetAllMarks:vL,unsetMark:EL,updateAttributes:bL,wrapIn:SL,wrapInList:TL});const CL=Bn.create({name:"commands",addCommands(){return{...wL}}}),AL=Bn.create({name:"drop",addProseMirrorPlugins(){return[new Wn({key:new vi("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),RL=Bn.create({name:"editable",addProseMirrorPlugins(){return[new Wn({key:new vi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),kL=Bn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Wn({key:new vi("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),IL=Bn.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:h,doc:d}=u,{empty:g,$anchor:_}=h,{pos:v,parent:S}=_,b=_.parent.isTextblock&&v>0?u.doc.resolve(v-1):_,C=b.parent.type.spec.isolating,A=_.pos-_.parentOffset,O=C&&b.parent.childCount===1?A===_.pos:Pe.atStart(d).from===v;return!g||!S.type.isTextblock||S.textContent.length||!O||O&&_.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Iv()||oR()?o:i},addProseMirrorPlugins(){return[new Wn({key:new vi("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(C=>C.getMeta("composition")))return;const r=n.some(C=>C.docChanged)&&!e.doc.eq(t.doc),i=n.some(C=>C.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:u}=e.selection,h=Pe.atStart(e.doc).from,d=Pe.atEnd(e.doc).to;if(o||!(l===h&&u===d)||!Ov(t.doc))return;const v=t.tr,S=Np({state:t,transaction:v}),{commands:b}=new Pp({editor:this.editor,state:S});if(b.clearNodes(),!!v.steps.length)return v}})]}}),xL=Bn.create({name:"paste",addProseMirrorPlugins(){return[new Wn({key:new vi("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),OL=Bn.create({name:"tabindex",addProseMirrorPlugins(){return[new Wn({key:new vi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ya{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new ya(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ya(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ya(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,l=this.pos+r+(o?0:1),u=this.resolvedPos.doc.resolve(l);if(!i&&u.depth<=this.depth)return;const h=new ya(u,this.editor,i,i?t:null);i&&(h.actualDepth=this.depth+1),e.push(new ya(u,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const o=i.node.attrs,l=Object.keys(t);for(let u=0;u<l.length;u+=1){const h=l[u];if(o[h]!==t[h])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(t);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&o.every(h=>t[h]===l.node.attrs[h])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const DL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function ML(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}let NL=class extends G2{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=ML(DL,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=ZA(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(o=>{const l=typeof o=="string"?`${o}$`:o.key;r=t.filter(u=>!u.key.startsWith(l))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[RL,aV.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),CL,kL,IL,OL,AL,xL].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new ql(i,this)}createCommandManager(){this.commandManager=new Pp({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=v_(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(l){if(!(l instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(l.message))throw l;this.emit("contentError",{editor:this,error:l,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=v_(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=iR(t,this.options.autofocus);this.view=new g2(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Fl.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(l)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return nL(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return rL(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Av(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return eL(this.state.doc,{blockSeparator:t,textSerializers:{...tR(this.schema),...r}})}get isEmpty(){return Ov(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new ya(t,this)}get $doc(){return this.$pos(0)}};function rc(n){return new Lp({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Le(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const h=u.search(/\S/),d=t.from+u.indexOf(l),g=d+l.length;if(lR(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(C=>C===n.type&&C!==S.mark.type)).filter(S=>S.to>d).length)return null;g<t.to&&o.delete(g,t.to),d>t.from&&o.delete(t.from+h,d);const v=t.from+h+l.length;o.addMark(t.from+h,v,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function PL(n){return new Lp({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Le(n.getAttributes,void 0,r)||{},{tr:o}=e,l=t.from;let u=t.to;const h=n.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let g=l+d;g>u?g=u:u=g+r[1].length;const _=r[0][r[0].length-1];o.insertText(_,l+r[0].length-1),o.replaceWith(g,u,h)}else if(r[0]){const d=n.type.isInline?l:l-1;o.insert(d,n.type.create(i)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()}})}function b_(n){return new Lp({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),o=Le(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function ch(n){return new Lp({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const o=Le(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),h=l.doc.resolve(t.from).blockRange(),d=h&&uv(h,n.type,o);if(!d)return null;if(l.wrap(h,d),n.keepMarks&&n.editor){const{selection:_,storedMarks:v}=e,{splittableMarks:S}=n.editor.extensionManager,b=v||_.$to.parentOffset&&_.$from.marks();if(b){const C=b.filter(A=>S.includes(A.type.name));l.ensureMarks(C)}}if(n.keepAttributes){const _=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(_,o).run()}const g=l.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&ko(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,g))&&l.join(t.from-1)}})}let $r=class S_{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(_e(this,"addOptions",{name:this.name}))),this.storage=Le(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new S_(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Up(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new S_(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Le(_e(t,"addOptions",{name:t.name})),t.storage=Le(_e(t,"addStorage",{name:t.name,options:t.options})),t}};function ic(n){return new tV({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const o=Le(n.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],h=r[0];let d=t.to;if(u){const g=h.search(/\S/),_=t.from+h.indexOf(u),v=_+u.length;if(lR(t.from,t.to,e.doc).filter(b=>b.mark.type.excluded.find(A=>A===n.type&&A!==b.mark.type)).filter(b=>b.to>_).length)return null;v<t.to&&l.delete(v,t.to),_>t.from&&l.delete(t.from+g,_),d=t.from+g+u.length,l.addMark(t.from+g,d,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}function VL(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cR={exports:{}},Dy={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function LL(){if(fw)return Dy;fw=1;var n=Nn;function e(_,v){return _===v&&(_!==0||1/_===1/v)||_!==_&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(_,v){var S=v(),b=r({inst:{value:S,getSnapshot:v}}),C=b[0].inst,A=b[1];return o(function(){C.value=S,C.getSnapshot=v,h(C)&&A({inst:C})},[_,S,v]),i(function(){return h(C)&&A({inst:C}),_(function(){h(C)&&A({inst:C})})},[_]),l(S),S}function h(_){var v=_.getSnapshot;_=_.value;try{var S=v();return!t(_,S)}catch{return!0}}function d(_,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return Dy.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,Dy}cR.exports=LL();var Dv=cR.exports;const UL=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},BL=({contentComponent:n})=>{const e=Dv.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Nn.createElement(Nn.Fragment,null,Object.values(e))};function zL(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:rM.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class HL extends Nn.Component{constructor(e){var t;super(e),this.editorContentRef=Nn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=zL(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Nn.createElement(Nn.Fragment,null,Nn.createElement("div",{ref:UL(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Nn.createElement(BL,{contentComponent:e.contentComponent}))}}const jL=G.forwardRef((n,e)=>{const t=Nn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Nn.createElement(HL,{key:t,innerRef:e,...n})}),FL=Nn.memo(jL);var qL=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=r;i--!==0;){var l=o[i];if(!(l==="_owner"&&e.$$typeof)&&!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t},$L=VL(qL),uR={exports:{}},My={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function GL(){if(dw)return My;dw=1;var n=Nn,e=Dv;function t(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,h=n.useDebugValue;return My.useSyncExternalStoreWithSelector=function(d,g,_,v,S){var b=o(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=u(function(){function O(X){if(!z){if(z=!0,Q=X,X=v(X),S!==void 0&&C.hasValue){var N=C.value;if(S(N,X))return F=N}return F=X}if(N=F,r(Q,X))return N;var x=v(X);return S!==void 0&&S(N,x)?N:(Q=X,F=x)}var z=!1,Q,F,W=_===void 0?null:_;return[function(){return O(g())},W===null?void 0:function(){return O(W())}]},[g,_,v,S]);var A=i(d,b[0],b[1]);return l(function(){C.hasValue=!0,C.value=A},[A]),h(A),A},My}uR.exports=GL();var KL=uR.exports;const WL=typeof window<"u"?G.useLayoutEffect:G.useEffect;class QL{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function YL(n){var e;const[t]=G.useState(()=>new QL(n.editor)),r=KL.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:$L);return WL(()=>t.watch(n.editor),[n.editor,t]),G.useDebugValue(r),r}const XL=!1,T_=typeof window>"u",JL=T_||!!(typeof window<"u"&&window.next);class Mv{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?T_||JL?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new NL(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,o)=>{var l;return i===((l=t.extensions)===null||l===void 0?void 0:l[o])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Mv.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function ZL(n={},e=[]){const t=G.useRef(n);t.current=n;const[r]=G.useState(()=>new Mv(t)),i=Dv.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return G.useDebugValue(i),G.useEffect(r.onRender(e)),YL({editor:i,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&o===0?0:o+1}),i}const e4=G.createContext({editor:null});e4.Consumer;const t4=G.createContext({onDragStart:void 0}),n4=()=>G.useContext(t4);Nn.forwardRef((n,e)=>{const{onDragStart:t}=n4(),r=n.as||"div";return Nn.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const r4=({editor:n})=>n?ee.jsxs("div",{className:"tiptap-menu",children:[ee.jsx("button",{onClick:()=>n.chain().focus().toggleBold().run(),disabled:!n.can().chain().focus().toggleBold().run(),className:n.isActive("bold")?"is-active":"",children:"Bold"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleItalic().run(),disabled:!n.can().chain().focus().toggleItalic().run(),className:n.isActive("italic")?"is-active":"",children:"Italic"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleStrike().run(),disabled:!n.can().chain().focus().toggleStrike().run(),className:n.isActive("strike")?"is-active":"",children:"Strike"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleCode().run(),disabled:!n.can().chain().focus().toggleCode().run(),className:n.isActive("code")?"is-active":"",children:"Code"}),ee.jsx("button",{onClick:()=>n.chain().focus().unsetAllMarks().run(),children:"Clear marks"}),ee.jsx("button",{onClick:()=>n.chain().focus().clearNodes().run(),children:"Clear nodes"}),ee.jsx("button",{onClick:()=>n.chain().focus().setParagraph().run(),className:n.isActive("paragraph")?"is-active":"",children:"Paragraph"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),className:n.isActive("heading",{level:1})?"is-active":"",children:"H1"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleHeading({level:2}).run(),className:n.isActive("heading",{level:2})?"is-active":"",children:"H2"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleHeading({level:3}).run(),className:n.isActive("heading",{level:3})?"is-active":"",children:"H3"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleHeading({level:4}).run(),className:n.isActive("heading",{level:4})?"is-active":"",children:"H4"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleHeading({level:5}).run(),className:n.isActive("heading",{level:5})?"is-active":"",children:"H5"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleHeading({level:6}).run(),className:n.isActive("heading",{level:6})?"is-active":"",children:"H6"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleBulletList().run(),className:n.isActive("bulletList")?"is-active":"",children:"Bullet list"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleOrderedList().run(),className:n.isActive("orderedList")?"is-active":"",children:"Ordered list"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleCodeBlock().run(),className:n.isActive("codeBlock")?"is-active":"",children:"Code block"}),ee.jsx("button",{onClick:()=>n.chain().focus().toggleBlockquote().run(),className:n.isActive("blockquote")?"is-active":"",children:"Blockquote"}),ee.jsx("button",{onClick:()=>n.chain().focus().setHorizontalRule().run(),children:"Horizontal rule"}),ee.jsx("button",{onClick:()=>n.chain().focus().setHardBreak().run(),children:"Hard break"}),ee.jsx("button",{onClick:()=>n.chain().focus().undo().run(),disabled:!n.can().chain().focus().undo().run(),children:"Undo"}),ee.jsx("button",{onClick:()=>n.chain().focus().redo().run(),disabled:!n.can().chain().focus().redo().run(),children:"Redo"})]}):null,i4=({editor:n})=>n?ee.jsxs("div",{className:"tiptap-container",children:[ee.jsx(r4,{editor:n}),ee.jsx(FL,{id:"tip-tap",editor:n})]}):null,s4=()=>{};var pw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},o4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],u=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},fR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,u=l?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,g=o>>2,_=(o&3)<<4|u>>4;let v=(u&15)<<2|d>>6,S=d&63;h||(S=64,l||(v=64)),r.push(t[g],t[_],t[v],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):o4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||d==null||_==null)throw new a4;const v=o<<2|u>>4;if(r.push(v),d!==64){const S=u<<4&240|d>>2;if(r.push(S),_!==64){const b=d<<6&192|_;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class a4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l4=function(n){const e=hR(n);return fR.encodeByteArray(e,!0)},ep=function(n){return l4(n).replace(/\./g,"")},dR=function(n){try{return fR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=()=>c4().__FIREBASE_DEFAULTS__,h4=()=>{if(typeof process>"u"||typeof pw>"u")return;const n=pw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},f4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dR(n[1]);return e&&JSON.parse(e)},zp=()=>{try{return s4()||u4()||h4()||f4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pR=n=>{var e,t;return(t=(e=zp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},d4=n=>{const e=pR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},mR=()=>{var n;return(n=zp())===null||n===void 0?void 0:n.config},gR=n=>{var e;return(e=zp())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ep(JSON.stringify(t)),ep(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function y4(){var n;const e=(n=zp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function E4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b4(){const n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function S4(){return!y4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T4(){try{return typeof indexedDB=="object"}catch{return!1}}function w4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="FirebaseError";class us extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=C4,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ah.prototype.create)}}class Ah{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?A4(o,r):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new us(i,u,r)}}function A4(n,e){return n.replace(R4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const R4=/\{\$([^}]+)}/g;function k4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Na(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(mw(o)&&mw(l)){if(!Na(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function mw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Bu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function I4(n,e){const t=new x4(n,e);return t.subscribe.bind(t)}class x4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");O4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ny),i.error===void 0&&(i.error=Ny),i.complete===void 0&&(i.complete=Ny);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ny(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(n){return n&&n._delegate?n._delegate:n}class Pa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new p4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N4(e))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ma){return this.instances.has(e)}getOptions(e=ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ma){return this.component?this.component.multipleInstances?e:ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M4(n){return n===ma?void 0:n}function N4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const V4={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},L4=je.INFO,U4={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},B4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=U4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nv{constructor(e){this.name=e,this._logLevel=L4,this._logHandler=B4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const z4=(n,e)=>e.some(t=>n instanceof t);let gw,yw;function H4(){return gw||(gw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j4(){return yw||(yw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yR=new WeakMap,w_=new WeakMap,_R=new WeakMap,Py=new WeakMap,Pv=new WeakMap;function F4(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ho(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&yR.set(t,n)}).catch(()=>{}),Pv.set(e,n),e}function q4(n){if(w_.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});w_.set(n,e)}let C_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return w_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_R.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ho(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $4(n){C_=n(C_)}function G4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Vy(this),e,...t);return _R.set(r,e.sort?e.sort():[e]),ho(r)}:j4().includes(n)?function(...e){return n.apply(Vy(this),e),ho(yR.get(this))}:function(...e){return ho(n.apply(Vy(this),e))}}function K4(n){return typeof n=="function"?G4(n):(n instanceof IDBTransaction&&q4(n),z4(n,H4())?new Proxy(n,C_):n)}function ho(n){if(n instanceof IDBRequest)return F4(n);if(Py.has(n))return Py.get(n);const e=K4(n);return e!==n&&(Py.set(n,e),Pv.set(e,n)),e}const Vy=n=>Pv.get(n);function W4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),u=ho(l);return r&&l.addEventListener("upgradeneeded",h=>{r(ho(l.result),h.oldVersion,h.newVersion,ho(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const Q4=["get","getKey","getAll","getAllKeys","count"],Y4=["put","add","delete","clear"],Ly=new Map;function _w(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ly.get(e))return Ly.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Y4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Q4.includes(t)))return;const o=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[t](...u),i&&h.done]))[0]};return Ly.set(e,o),o}$4(n=>({...n,get:(e,t,r)=>_w(e,t)||n.get(e,t,r),has:(e,t)=>!!_w(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(J4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function J4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const A_="@firebase/app",vw="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Nv("@firebase/app"),Z4="@firebase/app-compat",eU="@firebase/analytics-compat",tU="@firebase/analytics",nU="@firebase/app-check-compat",rU="@firebase/app-check",iU="@firebase/auth",sU="@firebase/auth-compat",oU="@firebase/database",aU="@firebase/data-connect",lU="@firebase/database-compat",cU="@firebase/functions",uU="@firebase/functions-compat",hU="@firebase/installations",fU="@firebase/installations-compat",dU="@firebase/messaging",pU="@firebase/messaging-compat",mU="@firebase/performance",gU="@firebase/performance-compat",yU="@firebase/remote-config",_U="@firebase/remote-config-compat",vU="@firebase/storage",EU="@firebase/storage-compat",bU="@firebase/firestore",SU="@firebase/vertexai",TU="@firebase/firestore-compat",wU="firebase",CU="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="[DEFAULT]",AU={[A_]:"fire-core",[Z4]:"fire-core-compat",[tU]:"fire-analytics",[eU]:"fire-analytics-compat",[rU]:"fire-app-check",[nU]:"fire-app-check-compat",[iU]:"fire-auth",[sU]:"fire-auth-compat",[oU]:"fire-rtdb",[aU]:"fire-data-connect",[lU]:"fire-rtdb-compat",[cU]:"fire-fn",[uU]:"fire-fn-compat",[hU]:"fire-iid",[fU]:"fire-iid-compat",[dU]:"fire-fcm",[pU]:"fire-fcm-compat",[mU]:"fire-perf",[gU]:"fire-perf-compat",[yU]:"fire-rc",[_U]:"fire-rc-compat",[vU]:"fire-gcs",[EU]:"fire-gcs-compat",[bU]:"fire-fst",[TU]:"fire-fst-compat",[SU]:"fire-vertex","fire-js":"fire-js",[wU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new Map,RU=new Map,k_=new Map;function Ew(n,e){try{n.container.addComponent(e)}catch(t){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sc(n){const e=n.name;if(k_.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;k_.set(e,n);for(const t of tp.values())Ew(t,n);for(const t of RU.values())Ew(t,n);return!0}function Vv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new Ah("app","Firebase",kU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=CU;function vR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:R_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw fo.create("bad-app-name",{appName:String(i)});if(t||(t=mR()),!t)throw fo.create("no-options");const o=tp.get(i);if(o){if(Na(t,o.options)&&Na(r,o.config))return o;throw fo.create("duplicate-app",{appName:i})}const l=new P4(i);for(const h of k_.values())l.addComponent(h);const u=new IU(t,r,l);return tp.set(i,u),u}function ER(n=R_){const e=tp.get(n);if(!e&&n===R_&&mR())return vR();if(!e)throw fo.create("no-app",{appName:n});return e}function po(n,e,t){var r;let i=(r=AU[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(u.join(" "));return}sc(new Pa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="firebase-heartbeat-database",OU=1,uh="firebase-heartbeat-store";let Uy=null;function bR(){return Uy||(Uy=W4(xU,OU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uh)}catch(t){console.warn(t)}}}}).catch(n=>{throw fo.create("idb-open",{originalErrorMessage:n.message})})),Uy}async function DU(n){try{const t=(await bR()).transaction(uh),r=await t.objectStore(uh).get(SR(n));return await t.done,r}catch(e){if(e instanceof us)rs.warn(e.message);else{const t=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rs.warn(t.message)}}}async function bw(n,e){try{const r=(await bR()).transaction(uh,"readwrite");await r.objectStore(uh).put(e,SR(n)),await r.done}catch(t){if(t instanceof us)rs.warn(t.message);else{const r=fo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});rs.warn(r.message)}}}function SR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU=1024,NU=30;class PU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LU(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Sw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>NU){const l=UU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Sw(),{heartbeatsToSend:r,unsentEntries:i}=VU(this._heartbeatsCache.heartbeats),o=ep(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return rs.warn(t),""}}}function Sw(){return new Date().toISOString().substring(0,10)}function VU(n,e=MU){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Tw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Tw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class LU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T4()?w4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await DU(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return bw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return bw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Tw(n){return ep(JSON.stringify({version:2,heartbeats:n})).length}function UU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(n){sc(new Pa("platform-logger",e=>new X4(e),"PRIVATE")),sc(new Pa("heartbeat",e=>new PU(e),"PRIVATE")),po(A_,vw,n),po(A_,vw,"esm2017"),po("fire-js","")}BU("");var zU="firebase",HU="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po(zU,HU,"app");var ww=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mo,TR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function k(){}k.prototype=x.prototype,N.D=x.prototype,N.prototype=new k,N.prototype.constructor=N,N.C=function(D,V,H){for(var P=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)P[ot-2]=arguments[ot];return x.prototype[V].apply(D,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,x,k){k||(k=0);var D=Array(16);if(typeof x=="string")for(var V=0;16>V;++V)D[V]=x.charCodeAt(k++)|x.charCodeAt(k++)<<8|x.charCodeAt(k++)<<16|x.charCodeAt(k++)<<24;else for(V=0;16>V;++V)D[V]=x[k++]|x[k++]<<8|x[k++]<<16|x[k++]<<24;x=N.g[0],k=N.g[1],V=N.g[2];var H=N.g[3],P=x+(H^k&(V^H))+D[0]+3614090360&4294967295;x=k+(P<<7&4294967295|P>>>25),P=H+(V^x&(k^V))+D[1]+3905402710&4294967295,H=x+(P<<12&4294967295|P>>>20),P=V+(k^H&(x^k))+D[2]+606105819&4294967295,V=H+(P<<17&4294967295|P>>>15),P=k+(x^V&(H^x))+D[3]+3250441966&4294967295,k=V+(P<<22&4294967295|P>>>10),P=x+(H^k&(V^H))+D[4]+4118548399&4294967295,x=k+(P<<7&4294967295|P>>>25),P=H+(V^x&(k^V))+D[5]+1200080426&4294967295,H=x+(P<<12&4294967295|P>>>20),P=V+(k^H&(x^k))+D[6]+2821735955&4294967295,V=H+(P<<17&4294967295|P>>>15),P=k+(x^V&(H^x))+D[7]+4249261313&4294967295,k=V+(P<<22&4294967295|P>>>10),P=x+(H^k&(V^H))+D[8]+1770035416&4294967295,x=k+(P<<7&4294967295|P>>>25),P=H+(V^x&(k^V))+D[9]+2336552879&4294967295,H=x+(P<<12&4294967295|P>>>20),P=V+(k^H&(x^k))+D[10]+4294925233&4294967295,V=H+(P<<17&4294967295|P>>>15),P=k+(x^V&(H^x))+D[11]+2304563134&4294967295,k=V+(P<<22&4294967295|P>>>10),P=x+(H^k&(V^H))+D[12]+1804603682&4294967295,x=k+(P<<7&4294967295|P>>>25),P=H+(V^x&(k^V))+D[13]+4254626195&4294967295,H=x+(P<<12&4294967295|P>>>20),P=V+(k^H&(x^k))+D[14]+2792965006&4294967295,V=H+(P<<17&4294967295|P>>>15),P=k+(x^V&(H^x))+D[15]+1236535329&4294967295,k=V+(P<<22&4294967295|P>>>10),P=x+(V^H&(k^V))+D[1]+4129170786&4294967295,x=k+(P<<5&4294967295|P>>>27),P=H+(k^V&(x^k))+D[6]+3225465664&4294967295,H=x+(P<<9&4294967295|P>>>23),P=V+(x^k&(H^x))+D[11]+643717713&4294967295,V=H+(P<<14&4294967295|P>>>18),P=k+(H^x&(V^H))+D[0]+3921069994&4294967295,k=V+(P<<20&4294967295|P>>>12),P=x+(V^H&(k^V))+D[5]+3593408605&4294967295,x=k+(P<<5&4294967295|P>>>27),P=H+(k^V&(x^k))+D[10]+38016083&4294967295,H=x+(P<<9&4294967295|P>>>23),P=V+(x^k&(H^x))+D[15]+3634488961&4294967295,V=H+(P<<14&4294967295|P>>>18),P=k+(H^x&(V^H))+D[4]+3889429448&4294967295,k=V+(P<<20&4294967295|P>>>12),P=x+(V^H&(k^V))+D[9]+568446438&4294967295,x=k+(P<<5&4294967295|P>>>27),P=H+(k^V&(x^k))+D[14]+3275163606&4294967295,H=x+(P<<9&4294967295|P>>>23),P=V+(x^k&(H^x))+D[3]+4107603335&4294967295,V=H+(P<<14&4294967295|P>>>18),P=k+(H^x&(V^H))+D[8]+1163531501&4294967295,k=V+(P<<20&4294967295|P>>>12),P=x+(V^H&(k^V))+D[13]+2850285829&4294967295,x=k+(P<<5&4294967295|P>>>27),P=H+(k^V&(x^k))+D[2]+4243563512&4294967295,H=x+(P<<9&4294967295|P>>>23),P=V+(x^k&(H^x))+D[7]+1735328473&4294967295,V=H+(P<<14&4294967295|P>>>18),P=k+(H^x&(V^H))+D[12]+2368359562&4294967295,k=V+(P<<20&4294967295|P>>>12),P=x+(k^V^H)+D[5]+4294588738&4294967295,x=k+(P<<4&4294967295|P>>>28),P=H+(x^k^V)+D[8]+2272392833&4294967295,H=x+(P<<11&4294967295|P>>>21),P=V+(H^x^k)+D[11]+1839030562&4294967295,V=H+(P<<16&4294967295|P>>>16),P=k+(V^H^x)+D[14]+4259657740&4294967295,k=V+(P<<23&4294967295|P>>>9),P=x+(k^V^H)+D[1]+2763975236&4294967295,x=k+(P<<4&4294967295|P>>>28),P=H+(x^k^V)+D[4]+1272893353&4294967295,H=x+(P<<11&4294967295|P>>>21),P=V+(H^x^k)+D[7]+4139469664&4294967295,V=H+(P<<16&4294967295|P>>>16),P=k+(V^H^x)+D[10]+3200236656&4294967295,k=V+(P<<23&4294967295|P>>>9),P=x+(k^V^H)+D[13]+681279174&4294967295,x=k+(P<<4&4294967295|P>>>28),P=H+(x^k^V)+D[0]+3936430074&4294967295,H=x+(P<<11&4294967295|P>>>21),P=V+(H^x^k)+D[3]+3572445317&4294967295,V=H+(P<<16&4294967295|P>>>16),P=k+(V^H^x)+D[6]+76029189&4294967295,k=V+(P<<23&4294967295|P>>>9),P=x+(k^V^H)+D[9]+3654602809&4294967295,x=k+(P<<4&4294967295|P>>>28),P=H+(x^k^V)+D[12]+3873151461&4294967295,H=x+(P<<11&4294967295|P>>>21),P=V+(H^x^k)+D[15]+530742520&4294967295,V=H+(P<<16&4294967295|P>>>16),P=k+(V^H^x)+D[2]+3299628645&4294967295,k=V+(P<<23&4294967295|P>>>9),P=x+(V^(k|~H))+D[0]+4096336452&4294967295,x=k+(P<<6&4294967295|P>>>26),P=H+(k^(x|~V))+D[7]+1126891415&4294967295,H=x+(P<<10&4294967295|P>>>22),P=V+(x^(H|~k))+D[14]+2878612391&4294967295,V=H+(P<<15&4294967295|P>>>17),P=k+(H^(V|~x))+D[5]+4237533241&4294967295,k=V+(P<<21&4294967295|P>>>11),P=x+(V^(k|~H))+D[12]+1700485571&4294967295,x=k+(P<<6&4294967295|P>>>26),P=H+(k^(x|~V))+D[3]+2399980690&4294967295,H=x+(P<<10&4294967295|P>>>22),P=V+(x^(H|~k))+D[10]+4293915773&4294967295,V=H+(P<<15&4294967295|P>>>17),P=k+(H^(V|~x))+D[1]+2240044497&4294967295,k=V+(P<<21&4294967295|P>>>11),P=x+(V^(k|~H))+D[8]+1873313359&4294967295,x=k+(P<<6&4294967295|P>>>26),P=H+(k^(x|~V))+D[15]+4264355552&4294967295,H=x+(P<<10&4294967295|P>>>22),P=V+(x^(H|~k))+D[6]+2734768916&4294967295,V=H+(P<<15&4294967295|P>>>17),P=k+(H^(V|~x))+D[13]+1309151649&4294967295,k=V+(P<<21&4294967295|P>>>11),P=x+(V^(k|~H))+D[4]+4149444226&4294967295,x=k+(P<<6&4294967295|P>>>26),P=H+(k^(x|~V))+D[11]+3174756917&4294967295,H=x+(P<<10&4294967295|P>>>22),P=V+(x^(H|~k))+D[2]+718787259&4294967295,V=H+(P<<15&4294967295|P>>>17),P=k+(H^(V|~x))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+H&4294967295}r.prototype.u=function(N,x){x===void 0&&(x=N.length);for(var k=x-this.blockSize,D=this.B,V=this.h,H=0;H<x;){if(V==0)for(;H<=k;)i(this,N,H),H+=this.blockSize;if(typeof N=="string"){for(;H<x;)if(D[V++]=N.charCodeAt(H++),V==this.blockSize){i(this,D),V=0;break}}else for(;H<x;)if(D[V++]=N[H++],V==this.blockSize){i(this,D),V=0;break}}this.h=V,this.o+=x},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;var k=8*this.o;for(x=N.length-8;x<N.length;++x)N[x]=k&255,k/=256;for(this.u(N),N=Array(16),x=k=0;4>x;++x)for(var D=0;32>D;D+=8)N[k++]=this.g[x]>>>D&255;return N};function o(N,x){var k=u;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=x(N)}function l(N,x){this.h=x;for(var k=[],D=!0,V=N.length-1;0<=V;V--){var H=N[V]|0;D&&H==x||(k[V]=H,D=!1)}this.g=k}var u={};function h(N){return-128<=N&&128>N?o(N,function(x){return new l([x|0],0>x?-1:0)}):new l([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return _;if(0>N)return A(d(-N));for(var x=[],k=1,D=0;N>=k;D++)x[D]=N/k|0,k*=4294967296;return new l(x,0)}function g(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return A(g(N.substring(1),x));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(x,8)),D=_,V=0;V<N.length;V+=8){var H=Math.min(8,N.length-V),P=parseInt(N.substring(V,V+H),x);8>H?(H=d(Math.pow(x,H)),D=D.j(H).add(d(P))):(D=D.j(k),D=D.add(d(P)))}return D}var _=h(0),v=h(1),S=h(16777216);n=l.prototype,n.m=function(){if(C(this))return-A(this).m();for(var N=0,x=1,k=0;k<this.g.length;k++){var D=this.i(k);N+=(0<=D?D:4294967296+D)*x,x*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(b(this))return"0";if(C(this))return"-"+A(this).toString(N);for(var x=d(Math.pow(N,6)),k=this,D="";;){var V=F(k,x).g;k=O(k,V.j(x));var H=((0<k.g.length?k.g[0]:k.h)>>>0).toString(N);if(k=V,b(k))return H+D;for(;6>H.length;)H="0"+H;D=H+D}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function b(N){if(N.h!=0)return!1;for(var x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function C(N){return N.h==-1}n.l=function(N){return N=O(this,N),C(N)?-1:b(N)?0:1};function A(N){for(var x=N.g.length,k=[],D=0;D<x;D++)k[D]=~N.g[D];return new l(k,~N.h).add(v)}n.abs=function(){return C(this)?A(this):this},n.add=function(N){for(var x=Math.max(this.g.length,N.g.length),k=[],D=0,V=0;V<=x;V++){var H=D+(this.i(V)&65535)+(N.i(V)&65535),P=(H>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);D=P>>>16,H&=65535,P&=65535,k[V]=P<<16|H}return new l(k,k[k.length-1]&-2147483648?-1:0)};function O(N,x){return N.add(A(x))}n.j=function(N){if(b(this)||b(N))return _;if(C(this))return C(N)?A(this).j(A(N)):A(A(this).j(N));if(C(N))return A(this.j(A(N)));if(0>this.l(S)&&0>N.l(S))return d(this.m()*N.m());for(var x=this.g.length+N.g.length,k=[],D=0;D<2*x;D++)k[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<N.g.length;V++){var H=this.i(D)>>>16,P=this.i(D)&65535,ot=N.i(V)>>>16,at=N.i(V)&65535;k[2*D+2*V]+=P*at,z(k,2*D+2*V),k[2*D+2*V+1]+=H*at,z(k,2*D+2*V+1),k[2*D+2*V+1]+=P*ot,z(k,2*D+2*V+1),k[2*D+2*V+2]+=H*ot,z(k,2*D+2*V+2)}for(D=0;D<x;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=x;D<2*x;D++)k[D]=0;return new l(k,0)};function z(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function Q(N,x){this.g=N,this.h=x}function F(N,x){if(b(x))throw Error("division by zero");if(b(N))return new Q(_,_);if(C(N))return x=F(A(N),x),new Q(A(x.g),A(x.h));if(C(x))return x=F(N,A(x)),new Q(A(x.g),x.h);if(30<N.g.length){if(C(N)||C(x))throw Error("slowDivide_ only works with positive integers.");for(var k=v,D=x;0>=D.l(N);)k=W(k),D=W(D);var V=X(k,1),H=X(D,1);for(D=X(D,2),k=X(k,2);!b(D);){var P=H.add(D);0>=P.l(N)&&(V=V.add(k),H=P),D=X(D,1),k=X(k,1)}return x=O(N,V.j(x)),new Q(V,x)}for(V=_;0<=N.l(x);){for(k=Math.max(1,Math.floor(N.m()/x.m())),D=Math.ceil(Math.log(k)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),H=d(k),P=H.j(x);C(P)||0<P.l(N);)k-=D,H=d(k),P=H.j(x);b(H)&&(H=v),V=V.add(H),N=O(N,P)}return new Q(V,N)}n.A=function(N){return F(this,N).h},n.and=function(N){for(var x=Math.max(this.g.length,N.g.length),k=[],D=0;D<x;D++)k[D]=this.i(D)&N.i(D);return new l(k,this.h&N.h)},n.or=function(N){for(var x=Math.max(this.g.length,N.g.length),k=[],D=0;D<x;D++)k[D]=this.i(D)|N.i(D);return new l(k,this.h|N.h)},n.xor=function(N){for(var x=Math.max(this.g.length,N.g.length),k=[],D=0;D<x;D++)k[D]=this.i(D)^N.i(D);return new l(k,this.h^N.h)};function W(N){for(var x=N.g.length+1,k=[],D=0;D<x;D++)k[D]=N.i(D)<<1|N.i(D-1)>>>31;return new l(k,N.h)}function X(N,x){var k=x>>5;x%=32;for(var D=N.g.length-k,V=[],H=0;H<D;H++)V[H]=0<x?N.i(H+k)>>>x|N.i(H+k+1)<<32-x:N.i(H+k);return new l(V,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TR=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=g,mo=l}).apply(typeof ww<"u"?ww:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wR,zu,CR,kd,I_,AR,RR,kR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,E,T){return p==Array.prototype||p==Object.prototype||(p[E]=T.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var E=0;E<p.length;++E){var T=p[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(p,E){if(E)e:{var T=r;p=p.split(".");for(var I=0;I<p.length-1;I++){var q=p[I];if(!(q in T))break e;T=T[q]}p=p[p.length-1],I=T[p],E=E(I),E!=I&&E!=null&&e(T,p,{configurable:!0,writable:!0,value:E})}}function o(p,E){p instanceof String&&(p+="");var T=0,I=!1,q={next:function(){if(!I&&T<p.length){var Y=T++;return{value:E(Y,p[Y]),done:!1}}return I=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(p){return p||function(){return o(this,function(E,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(p){var E=typeof p;return E=E!="object"?E:p?Array.isArray(p)?"array":E:"null",E=="array"||E=="object"&&typeof p.length=="number"}function d(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function g(p,E,T){return p.call.apply(p.bind,arguments)}function _(p,E,T){if(!p)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,I),p.apply(E,q)}}return function(){return p.apply(E,arguments)}}function v(p,E,T){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:_,v.apply(null,arguments)}function S(p,E){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function b(p,E){function T(){}T.prototype=E.prototype,p.aa=E.prototype,p.prototype=new T,p.prototype.constructor=p,p.Qb=function(I,q,Y){for(var ce=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ce[$e-2]=arguments[$e];return E.prototype[q].apply(I,ce)}}function C(p){const E=p.length;if(0<E){const T=Array(E);for(let I=0;I<E;I++)T[I]=p[I];return T}return[]}function A(p,E){for(let T=1;T<arguments.length;T++){const I=arguments[T];if(h(I)){const q=p.length||0,Y=I.length||0;p.length=q+Y;for(let ce=0;ce<Y;ce++)p[q+ce]=I[ce]}else p.push(I)}}class O{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function z(p){return/^[\s\xa0]*$/.test(p)}function Q(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function F(p){return F[" "](p),p}F[" "]=function(){};var W=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function X(p,E,T){for(const I in p)E.call(T,p[I],I,p)}function N(p,E){for(const T in p)E.call(void 0,p[T],T,p)}function x(p){const E={};for(const T in p)E[T]=p[T];return E}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(p,E){let T,I;for(let q=1;q<arguments.length;q++){I=arguments[q];for(T in I)p[T]=I[T];for(let Y=0;Y<k.length;Y++)T=k[Y],Object.prototype.hasOwnProperty.call(I,T)&&(p[T]=I[T])}}function V(p){var E=1;p=p.split(":");const T=[];for(;0<E&&p.length;)T.push(p.shift()),E--;return p.length&&T.push(p.join(":")),T}function H(p){u.setTimeout(()=>{throw p},0)}function P(){var p=He;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class ot{constructor(){this.h=this.g=null}add(E,T){const I=at.get();I.set(E,T),this.h?this.h.next=I:this.g=I,this.h=I}}var at=new O(()=>new ne,p=>p.reset());class ne{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ue=!1,He=new ot,L=()=>{const p=u.Promise.resolve(void 0);pe=()=>{p.then(le)}};var le=()=>{for(var p;p=P();){try{p.h.call(p.g)}catch(T){H(T)}var E=at;E.j(p),100>E.h&&(E.h++,p.next=E.g,E.g=p)}ue=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const T=()=>{};u.addEventListener("test",T,E),u.removeEventListener("test",T,E)}catch{}return p}();function Re(p,E){if(de.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var T=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget){if(W){e:{try{F(E.nodeName);var q=!0;break e}catch{}q=!1}q||(E=null)}}else T=="mouseover"?E=p.fromElement:T=="mouseout"&&(E=p.toElement);this.relatedTarget=E,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Me[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Re.aa.h.call(this)}}b(Re,de);var Me={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Rt="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function _t(p,E,T,I,q){this.listener=p,this.proxy=null,this.src=E,this.type=T,this.capture=!!I,this.ha=q,this.key=++Qe,this.da=this.fa=!1}function tt(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function kn(p){this.src=p,this.g={},this.h=0}kn.prototype.add=function(p,E,T,I,q){var Y=p.toString();p=this.g[Y],p||(p=this.g[Y]=[],this.h++);var ce=ar(p,E,I,q);return-1<ce?(E=p[ce],T||(E.fa=!1)):(E=new _t(E,this.src,Y,!!I,q),E.fa=T,p.push(E)),E};function Ei(p,E){var T=E.type;if(T in p.g){var I=p.g[T],q=Array.prototype.indexOf.call(I,E,void 0),Y;(Y=0<=q)&&Array.prototype.splice.call(I,q,1),Y&&(tt(E),p.g[T].length==0&&(delete p.g[T],p.h--))}}function ar(p,E,T,I){for(var q=0;q<p.length;++q){var Y=p[q];if(!Y.da&&Y.listener==E&&Y.capture==!!T&&Y.ha==I)return q}return-1}var hs="closure_lm_"+(1e6*Math.random()|0),fs={};function bi(p,E,T,I,q){if(Array.isArray(E)){for(var Y=0;Y<E.length;Y++)bi(p,E[Y],T,I,q);return null}return T=Uh(T),p&&p[Rt]?p.K(E,T,d(I)?!!I.capture:!1,q):wc(p,E,T,!1,I,q)}function wc(p,E,T,I,q,Y){if(!E)throw Error("Invalid event type");var ce=d(q)?!!q.capture:!!q,$e=Cc(p);if($e||(p[hs]=$e=new kn(p)),T=$e.add(E,T,I,ce,Y),T.proxy)return T;if(I=$a(),T.proxy=I,I.src=p,I.listener=T,p.addEventListener)he||(q=ce),q===void 0&&(q=!1),p.addEventListener(E.toString(),I,q);else if(p.attachEvent)p.attachEvent(Ka(E.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function $a(){function p(T){return E.call(p.src,p.listener,T)}const E=am;return p}function Ga(p,E,T,I,q){if(Array.isArray(E))for(var Y=0;Y<E.length;Y++)Ga(p,E[Y],T,I,q);else I=d(I)?!!I.capture:!!I,T=Uh(T),p&&p[Rt]?(p=p.i,E=String(E).toString(),E in p.g&&(Y=p.g[E],T=ar(Y,T,I,q),-1<T&&(tt(Y[T]),Array.prototype.splice.call(Y,T,1),Y.length==0&&(delete p.g[E],p.h--)))):p&&(p=Cc(p))&&(E=p.g[E.toString()],p=-1,E&&(p=ar(E,T,I,q)),(T=-1<p?E[p]:null)&&Vo(T))}function Vo(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[Rt])Ei(E.i,p);else{var T=p.type,I=p.proxy;E.removeEventListener?E.removeEventListener(T,I,p.capture):E.detachEvent?E.detachEvent(Ka(T),I):E.addListener&&E.removeListener&&E.removeListener(I),(T=Cc(E))?(Ei(T,p),T.h==0&&(T.src=null,E[hs]=null)):tt(p)}}}function Ka(p){return p in fs?fs[p]:fs[p]="on"+p}function am(p,E){if(p.da)p=!0;else{E=new Re(E,this);var T=p.listener,I=p.ha||p.src;p.fa&&Vo(p),p=T.call(I,E)}return p}function Cc(p){return p=p[hs],p instanceof kn?p:null}var zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uh(p){return typeof p=="function"?p:(p[zn]||(p[zn]=function(E){return p.handleEvent(E)}),p[zn])}function Pt(){ve.call(this),this.i=new kn(this),this.M=this,this.F=null}b(Pt,ve),Pt.prototype[Rt]=!0,Pt.prototype.removeEventListener=function(p,E,T,I){Ga(this,p,E,T,I)};function $t(p,E){var T,I=p.F;if(I)for(T=[];I;I=I.F)T.push(I);if(p=p.M,I=E.type||E,typeof E=="string")E=new de(E,p);else if(E instanceof de)E.target=E.target||p;else{var q=E;E=new de(I,p),D(E,q)}if(q=!0,T)for(var Y=T.length-1;0<=Y;Y--){var ce=E.g=T[Y];q=Si(ce,I,!0,E)&&q}if(ce=E.g=p,q=Si(ce,I,!0,E)&&q,q=Si(ce,I,!1,E)&&q,T)for(Y=0;Y<T.length;Y++)ce=E.g=T[Y],q=Si(ce,I,!1,E)&&q}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var p=this.i,E;for(E in p.g){for(var T=p.g[E],I=0;I<T.length;I++)tt(T[I]);delete p.g[E],p.h--}}this.F=null},Pt.prototype.K=function(p,E,T,I){return this.i.add(String(p),E,!1,T,I)},Pt.prototype.L=function(p,E,T,I){return this.i.add(String(p),E,!0,T,I)};function Si(p,E,T,I){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();for(var q=!0,Y=0;Y<E.length;++Y){var ce=E[Y];if(ce&&!ce.da&&ce.capture==T){var $e=ce.listener,Lt=ce.ha||ce.src;ce.fa&&Ei(p.i,ce),q=$e.call(Lt,I)!==!1&&q}}return q&&!I.defaultPrevented}function Bh(p,E,T){if(typeof p=="function")T&&(p=v(p,T));else if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:u.setTimeout(p,E||0)}function Ac(p){p.g=Bh(()=>{p.g=null,p.i&&(p.i=!1,Ac(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class lm extends ve{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ac(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lo(p){ve.call(this),this.h=p,this.g={}}b(Lo,ve);var ds=[];function mn(p){X(p.g,function(E,T){this.g.hasOwnProperty(T)&&Vo(E)},p),p.g={}}Lo.prototype.N=function(){Lo.aa.N.call(this),mn(this)},Lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rc=u.JSON.stringify,Gr=u.JSON.parse,In=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function kc(){}kc.prototype.h=null;function zh(p){return p.h||(p.h=p.i())}function Hh(){}var Kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ps(){de.call(this,"d")}b(ps,de);function xr(){de.call(this,"c")}b(xr,de);var lr={},ms=null;function Wa(){return ms=ms||new Pt}lr.La="serverreachability";function Ic(p){de.call(this,lr.La,p)}b(Ic,de);function gs(p){const E=Wa();$t(E,new Ic(E))}lr.STAT_EVENT="statevent";function Qa(p,E){de.call(this,lr.STAT_EVENT,p),this.stat=E}b(Qa,de);function wt(p){const E=Wa();$t(E,new Qa(E,p))}lr.Ma="timingevent";function jh(p,E){de.call(this,lr.Ma,p),this.size=E}b(jh,de);function ys(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},E)}function _s(){this.g=!0}_s.prototype.xa=function(){this.g=!1};function Fh(p,E,T,I,q,Y){p.info(function(){if(p.g)if(Y)for(var ce="",$e=Y.split("&"),Lt=0;Lt<$e.length;Lt++){var Ge=$e[Lt].split("=");if(1<Ge.length){var Wt=Ge[0];Ge=Ge[1];var Ut=Wt.split("_");ce=2<=Ut.length&&Ut[1]=="type"?ce+(Wt+"="+Ge+"&"):ce+(Wt+"=redacted&")}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+I+") [attempt "+q+"]: "+E+`
`+T+`
`+ce})}function qh(p,E,T,I,q,Y,ce){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+q+"]: "+E+`
`+T+`
`+Y+" "+ce})}function vs(p,E,T,I){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+Gt(p,T)+(I?" "+I:"")})}function Wr(p,E){p.info(function(){return"TIMEOUT: "+E})}_s.prototype.info=function(){};function Gt(p,E){if(!p.g)return E;if(!E)return null;try{var T=JSON.parse(E);if(T){for(p=0;p<T.length;p++)if(Array.isArray(T[p])){var I=T[p];if(!(2>I.length)){var q=I[1];if(Array.isArray(q)&&!(1>q.length)){var Y=q[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ce=1;ce<q.length;ce++)q[ce]=""}}}}return Rc(T)}catch{return E}}var Vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uo;function Ya(){}b(Ya,kc),Ya.prototype.g=function(){return new XMLHttpRequest},Ya.prototype.i=function(){return{}},Uo=new Ya;function Qr(p,E,T,I){this.j=p,this.i=E,this.l=T,this.R=I||1,this.U=new Lo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xc}function xc(){this.i=null,this.g="",this.h=!1}var Es={},Bo={};function Or(p,E,T){p.L=1,p.v=jo(vt(E)),p.m=T,p.P=!0,wi(p,null)}function wi(p,E){p.F=Date.now(),ft(p),p.A=vt(p.v);var T=p.A,I=p.R;Array.isArray(I)||(I=[String(I)]),Ri(T.i,"t",I),p.C=0,T=p.j.J,p.h=new xc,p.g=sf(p.j,T?E:null,!p.m),0<p.O&&(p.M=new lm(v(p.Y,p,p.g),p.O)),E=p.U,T=p.g,I=p.ca;var q="readystatechange";Array.isArray(q)||(q&&(ds[0]=q.toString()),q=ds);for(var Y=0;Y<q.length;Y++){var ce=bi(T,q[Y],I||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=p.H?x(p.H):{},p.m?(p.u||(p.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,E)):(p.u="GET",p.g.ea(p.A,p.u,null,E)),gs(),Fh(p.i,p.u,p.A,p.l,p.R,p.m)}Qr.prototype.ca=function(p){p=p.target;const E=this.M;E&&dr(p)==3?E.j():this.Y(p)},Qr.prototype.Y=function(p){try{if(p==this.g)e:{const Ut=dr(this.g);var E=this.g.Ba();const Oi=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Yh(this.g)))){this.J||Ut!=4||E==7||(E==8||0>=Oi?gs(3):gs(2)),Xa(this);var T=this.g.Z();this.X=T;t:if(bs(this)){var I=Yh(this.g);p="";var q=I.length,Y=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),Qn(this);var ce="";break t}this.h.i=new u.TextDecoder}for(E=0;E<q;E++)this.h.h=!0,p+=this.h.i.decode(I[E],{stream:!(Y&&E==q-1)});I.length=0,this.h.g+=p,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=T==200,qh(this.i,this.u,this.A,this.l,this.R,Ut,T),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Lt=this.g;if(($e=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z($e)){var Ge=$e;break t}}Ge=null}if(T=Ge)vs(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yn(this,T);else{this.o=!1,this.s=3,wt(12),Hn(this),Qn(this);break e}}if(this.P){T=!0;let rn;for(;!this.J&&this.C<ce.length;)if(rn=Ss(this,ce),rn==Bo){Ut==4&&(this.s=4,wt(14),T=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Es){this.s=4,wt(15),vs(this.i,this.l,ce,"[Invalid Chunk]"),T=!1;break}else vs(this.i,this.l,rn,null),Yn(this,rn);if(bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||ce.length!=0||this.h.h||(this.s=1,wt(16),T=!1),this.o=this.o&&T,!T)vs(this.i,this.l,ce,"[Invalid Chunked Response]"),Hn(this),Qn(this);else if(0<ce.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Qo(Wt),Wt.M=!0,wt(11))}}else vs(this.i,this.l,ce,null),Yn(this,ce);Ut==4&&Hn(this),this.o&&!this.J&&(Ut==4?tf(this.j,this):(this.o=!1,ft(this)))}else pm(this.g),T==400&&0<ce.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Hn(this),Qn(this)}}}catch{}finally{}};function bs(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Ss(p,E){var T=p.C,I=E.indexOf(`
`,T);return I==-1?Bo:(T=Number(E.substring(T,I)),isNaN(T)?Es:(I+=1,I+T>E.length?Bo:(E=E.slice(I,I+T),p.C=I+T,E)))}Qr.prototype.cancel=function(){this.J=!0,Hn(this)};function ft(p){p.S=Date.now()+p.I,Oc(p,p.I)}function Oc(p,E){if(p.B!=null)throw Error("WatchDog timer not null");p.B=ys(v(p.ba,p),E)}function Xa(p){p.B&&(u.clearTimeout(p.B),p.B=null)}Qr.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Wr(this.i,this.A),this.L!=2&&(gs(),wt(17)),Hn(this),this.s=2,Qn(this)):Oc(this,this.S-p)};function Qn(p){p.j.G==0||p.J||tf(p.j,p)}function Hn(p){Xa(p);var E=p.M;E&&typeof E.ma=="function"&&E.ma(),p.M=null,mn(p.U),p.g&&(E=p.g,p.g=null,E.abort(),E.ma())}function Yn(p,E){try{var T=p.j;if(T.G!=0&&(T.g==p||Ts(T.h,p))){if(!p.K&&Ts(T.h,p)&&T.G==3){try{var I=T.Da.g.parse(E)}catch{I=null}if(Array.isArray(I)&&I.length==3){var q=I;if(q[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<p.F)al(T),sl(T);else break e;jc(T),wt(18)}}else T.za=q[1],0<T.za-T.T&&37500>q[2]&&T.F&&T.v==0&&!T.C&&(T.C=ys(v(T.Za,T),6e3));if(1>=$h(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else xi(T,11)}else if((p.K||T.g==p)&&al(T),!z(E))for(q=T.Da.g.parse(E),E=0;E<q.length;E++){let Ge=q[E];if(T.T=Ge[0],Ge=Ge[1],T.G==2)if(Ge[0]=="c"){T.K=Ge[1],T.ia=Ge[2];const Wt=Ge[3];Wt!=null&&(T.la=Wt,T.j.info("VER="+T.la));const Ut=Ge[4];Ut!=null&&(T.Aa=Ut,T.j.info("SVER="+T.Aa));const Oi=Ge[5];Oi!=null&&typeof Oi=="number"&&0<Oi&&(I=1.5*Oi,T.L=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const rn=p.g;if(rn){const ni=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var Y=I.h;Y.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ws(Y,Y.h),Y.h=null))}if(I.D){const qc=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;qc&&(I.ya=qc,Ye(I.I,I.D,qc))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-p.F,T.j.info("Handshake RTT: "+T.R+"ms")),I=T;var ce=p;if(I.qa=rf(I,I.J?I.ia:null,I.W),ce.K){cr(I.h,ce);var $e=ce,Lt=I.L;Lt&&($e.I=Lt),$e.B&&(Xa($e),ft($e)),I.g=ce}else Zh(I);0<T.i.length&&ol(T)}else Ge[0]!="stop"&&Ge[0]!="close"||xi(T,7);else T.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?xi(T,7):zc(T):Ge[0]!="noop"&&T.l&&T.l.ta(Ge),T.v=0)}}gs(4)}catch{}}var cm=class{constructor(p,E){this.g=p,this.map=E}};function Dc(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mc(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function $h(p){return p.h?1:p.g?p.g.size:0}function Ts(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function ws(p,E){p.g?p.g.add(E):p.h=E}function cr(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}Dc.prototype.cancel=function(){if(this.i=xn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function xn(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const T of p.g.values())E=E.concat(T.D);return E}return C(p.i)}function Gh(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var E=[],T=p.length,I=0;I<T;I++)E.push(p[I]);return E}E=[],T=0;for(I in p)E[T++]=p[I];return E}function um(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var E=[];p=p.length;for(var T=0;T<p;T++)E.push(T);return E}E=[],T=0;for(const I in p)E[T++]=I;return E}}}function zo(p,E){if(p.forEach&&typeof p.forEach=="function")p.forEach(E,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,E,void 0);else for(var T=um(p),I=Gh(p),q=I.length,Y=0;Y<q;Y++)E.call(void 0,I[Y],T&&T[Y],p)}var Nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ja(p,E){if(p){p=p.split("&");for(var T=0;T<p.length;T++){var I=p[T].indexOf("="),q=null;if(0<=I){var Y=p[T].substring(0,I);q=p[T].substring(I+1)}else Y=p[T];E(Y,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Ci(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ci){this.h=p.h,Cs(this,p.j),this.o=p.o,this.g=p.g,Ho(this,p.s),this.l=p.l;var E=p.i,T=new Yr;T.i=E.i,E.g&&(T.g=new Map(E.g),T.h=E.h),Za(this,T),this.m=p.m}else p&&(E=String(p).match(Nc))?(this.h=!1,Cs(this,E[1]||"",!0),this.o=As(E[2]||""),this.g=As(E[3]||"",!0),Ho(this,E[4]),this.l=As(E[5]||"",!0),Za(this,E[6]||"",!0),this.m=As(E[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}Ci.prototype.toString=function(){var p=[],E=this.j;E&&p.push(ur(E,Pc,!0),":");var T=this.g;return(T||E=="file")&&(p.push("//"),(E=this.o)&&p.push(ur(E,Pc,!0),"@"),p.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&p.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&p.push("/"),p.push(ur(T,T.charAt(0)=="/"?Vc:Kh,!0))),(T=this.i.toString())&&p.push("?",T),(T=this.m)&&p.push("#",ur(T,dm)),p.join("")};function vt(p){return new Ci(p)}function Cs(p,E,T){p.j=T?As(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function Ho(p,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);p.s=E}else p.s=null}function Za(p,E,T){E instanceof Yr?(p.i=E,Lc(p.i,p.h)):(T||(E=ur(E,fm)),p.i=new Yr(E,p.h))}function Ye(p,E,T){p.i.set(E,T)}function jo(p){return Ye(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function As(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ur(p,E,T){return typeof p=="string"?(p=encodeURI(p).replace(E,hm),T&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function hm(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Pc=/[#\/\?@]/g,Kh=/[#\?:]/g,Vc=/[#\?]/g,fm=/[#\?@]/g,dm=/#/g;function Yr(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function hr(p){p.g||(p.g=new Map,p.h=0,p.i&&Ja(p.i,function(E,T){p.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}n=Yr.prototype,n.add=function(p,E){hr(this),this.i=null,p=ki(this,p);var T=this.g.get(p);return T||this.g.set(p,T=[]),T.push(E),this.h+=1,this};function el(p,E){hr(p),E=ki(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Ai(p,E){return hr(p),E=ki(p,E),p.g.has(E)}n.forEach=function(p,E){hr(this),this.g.forEach(function(T,I){T.forEach(function(q){p.call(E,q,I,this)},this)},this)},n.na=function(){hr(this);const p=Array.from(this.g.values()),E=Array.from(this.g.keys()),T=[];for(let I=0;I<E.length;I++){const q=p[I];for(let Y=0;Y<q.length;Y++)T.push(E[I])}return T},n.V=function(p){hr(this);let E=[];if(typeof p=="string")Ai(this,p)&&(E=E.concat(this.g.get(ki(this,p))));else{p=Array.from(this.g.values());for(let T=0;T<p.length;T++)E=E.concat(p[T])}return E},n.set=function(p,E){return hr(this),this.i=null,p=ki(this,p),Ai(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=this.V(p),0<p.length?String(p[0]):E):E};function Ri(p,E,T){el(p,E),0<T.length&&(p.i=null,p.g.set(ki(p,E),C(T)),p.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(var T=0;T<E.length;T++){var I=E[T];const Y=encodeURIComponent(String(I)),ce=this.V(I);for(I=0;I<ce.length;I++){var q=Y;ce[I]!==""&&(q+="="+encodeURIComponent(String(ce[I]))),p.push(q)}}return this.i=p.join("&")};function ki(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function Lc(p,E){E&&!p.j&&(hr(p),p.i=null,p.g.forEach(function(T,I){var q=I.toLowerCase();I!=q&&(el(this,I),Ri(this,q,T))},p)),p.j=E}function Wh(p,E){const T=new _s;if(u.Image){const I=new Image;I.onload=S(fr,T,"TestLoadImage: loaded",!0,E,I),I.onerror=S(fr,T,"TestLoadImage: error",!1,E,I),I.onabort=S(fr,T,"TestLoadImage: abort",!1,E,I),I.ontimeout=S(fr,T,"TestLoadImage: timeout",!1,E,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else E(!1)}function Fo(p,E){const T=new _s,I=new AbortController,q=setTimeout(()=>{I.abort(),fr(T,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:I.signal}).then(Y=>{clearTimeout(q),Y.ok?fr(T,"TestPingServer: ok",!0,E):fr(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(q),fr(T,"TestPingServer: error",!1,E)})}function fr(p,E,T,I,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),I(T)}catch{}}function qo(){this.g=new In}function Xr(p,E,T){const I=T||"";try{zo(p,function(q,Y){let ce=q;d(q)&&(ce=Rc(q)),E.push(I+Y+"="+encodeURIComponent(ce))})}catch(q){throw E.push(I+"type="+encodeURIComponent("_badmap")),q}}function Rs(p){this.l=p.Ub||null,this.j=p.eb||!1}b(Rs,kc),Rs.prototype.g=function(){return new Ii(this.l,this.j)},Rs.prototype.i=function(p){return function(){return p}}({});function Ii(p,E){Pt.call(this),this.D=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ii,Pt),n=Ii.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=E,this.readyState=1,Zr(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(E.body=p),(this.D||u).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uc(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uc(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?Jr(this):Zr(this),this.readyState==3&&Uc(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Jr(this))},n.Qa=function(p){this.g&&(this.response=p,Jr(this))},n.ga=function(){this.g&&Jr(this)};function Jr(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Zr(p)}n.setRequestHeader=function(p,E){this.u.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,p.push(T[0]+": "+T[1]),T=E.next();return p.join(`\r
`)};function Zr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Bc(p){let E="";return X(p,function(T,I){E+=I,E+=":",E+=T,E+=`\r
`}),E}function Kt(p,E,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=Bc(T),typeof p=="string"?T!=null&&encodeURIComponent(String(T)):Ye(p,E,T))}function Ze(p){Pt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ze,Pt);var tl=/^https?$/i,$o=["POST","PUT"];n=Ze.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,E,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uo.g(),this.v=this.o?zh(this.o):zh(Uo),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(Y){Qh(this,Y);return}if(p=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var q in I)T.set(q,I[q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Y of I.keys())T.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call($o,E,void 0))||I||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of T)this.g.setRequestHeader(Y,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Go(this),this.u=!0,this.g.send(p),this.u=!1}catch(Y){Qh(this,Y)}};function Qh(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.m=5,nl(p),ei(p)}function nl(p){p.A||(p.A=!0,$t(p,"complete"),$t(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,$t(this,"complete"),$t(this,"abort"),ei(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ei(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rl(this):this.bb())},n.bb=function(){rl(this)};function rl(p){if(p.h&&typeof l<"u"&&(!p.v[1]||dr(p)!=4||p.Z()!=2)){if(p.u&&dr(p)==4)Bh(p.Ea,0,p);else if($t(p,"readystatechange"),dr(p)==4){p.h=!1;try{const ce=p.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var T;if(!(T=E)){var I;if(I=ce===0){var q=String(p.D).match(Nc)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),I=!tl.test(q?q.toLowerCase():"")}T=I}if(T)$t(p,"complete"),$t(p,"success");else{p.m=6;try{var Y=2<dr(p)?p.g.statusText:""}catch{Y=""}p.l=Y+" ["+p.Z()+"]",nl(p)}}finally{ei(p)}}}}function ei(p,E){if(p.g){Go(p);const T=p.g,I=p.v[0]?()=>{}:null;p.g=null,p.v=null,E||$t(p,"ready");try{T.onreadystatechange=I}catch{}}}function Go(p){p.I&&(u.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function dr(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),Gr(E)}};function Yh(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function pm(p){const E={};p=(p.g&&2<=dr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if(z(p[I]))continue;var T=V(p[I]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Y=E[q]||[];E[q]=Y,Y.push(T)}N(E,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(p,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[p]||E}function il(p){this.Aa=0,this.i=[],this.j=new _s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ko("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ko("baseRetryDelayMs",5e3,p),this.cb=Ko("retryDelaySeedMs",1e4,p),this.Wa=Ko("forwardChannelMaxRetries",2,p),this.wa=Ko("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Dc(p&&p.concurrentRequestLimit),this.Da=new qo,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=il.prototype,n.la=8,n.G=1,n.connect=function(p,E,T,I){wt(0),this.W=p,this.H=E||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.I=rf(this,null,this.W),ol(this)};function zc(p){if(Xh(p),p.G==3){var E=p.U++,T=vt(p.I);if(Ye(T,"SID",p.K),Ye(T,"RID",E),Ye(T,"TYPE","terminate"),Wo(p,T),E=new Qr(p,p.j,E),E.L=2,E.v=jo(vt(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(E.v.toString(),"")}catch{}!T&&u.Image&&(new Image().src=E.v,T=!0),T||(E.g=sf(E.j,null),E.g.ea(E.v)),E.F=Date.now(),ft(E)}nf(p)}function sl(p){p.g&&(Qo(p),p.g.cancel(),p.g=null)}function Xh(p){sl(p),p.u&&(u.clearTimeout(p.u),p.u=null),al(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function ol(p){if(!Mc(p.h)&&!p.s){p.s=!0;var E=p.Ga;pe||L(),ue||(pe(),ue=!0),He.add(E,p),p.B=0}}function mm(p,E){return $h(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=E.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=ys(v(p.Ga,p,E),Fc(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const q=new Qr(this,this.j,p);let Y=this.o;if(this.S&&(Y?(Y=x(Y),D(Y,this.S)):Y=this.S),this.m!==null||this.O||(q.H=Y,Y=null),this.P)e:{for(var E=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(E+=I,4096<E){E=T;break e}if(E===4096||T===this.i.length-1){E=T+1;break e}}E=1e3}else E=1e3;E=Jh(this,q,E),T=vt(this.I),Ye(T,"RID",p),Ye(T,"CVER",22),this.D&&Ye(T,"X-HTTP-Session-Id",this.D),Wo(this,T),Y&&(this.O?E="headers="+encodeURIComponent(String(Bc(Y)))+"&"+E:this.m&&Kt(T,this.m,Y)),ws(this.h,q),this.Ua&&Ye(T,"TYPE","init"),this.P?(Ye(T,"$req",E),Ye(T,"SID","null"),q.T=!0,Or(q,T,null)):Or(q,T,E),this.G=2}}else this.G==3&&(p?Hc(this,p):this.i.length==0||Mc(this.h)||Hc(this))};function Hc(p,E){var T;E?T=E.l:T=p.U++;const I=vt(p.I);Ye(I,"SID",p.K),Ye(I,"RID",T),Ye(I,"AID",p.T),Wo(p,I),p.m&&p.o&&Kt(I,p.m,p.o),T=new Qr(p,p.j,T,p.B+1),p.m===null&&(T.H=p.o),E&&(p.i=E.D.concat(p.i)),E=Jh(p,T,1e3),T.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),ws(p.h,T),Or(T,I,E)}function Wo(p,E){p.H&&X(p.H,function(T,I){Ye(E,I,T)}),p.l&&zo({},function(T,I){Ye(E,I,T)})}function Jh(p,E,T){T=Math.min(p.i.length,T);var I=p.l?v(p.l.Na,p.l,p):null;e:{var q=p.i;let Y=-1;for(;;){const ce=["count="+T];Y==-1?0<T?(Y=q[0].g,ce.push("ofs="+Y)):Y=0:ce.push("ofs="+Y);let $e=!0;for(let Lt=0;Lt<T;Lt++){let Ge=q[Lt].g;const Wt=q[Lt].map;if(Ge-=Y,0>Ge)Y=Math.max(0,q[Lt].g-100),$e=!1;else try{Xr(Wt,ce,"req"+Ge+"_")}catch{I&&I(Wt)}}if($e){I=ce.join("&");break e}}}return p=p.i.splice(0,T),E.D=p,I}function Zh(p){if(!p.g&&!p.u){p.Y=1;var E=p.Fa;pe||L(),ue||(pe(),ue=!0),He.add(E,p),p.v=0}}function jc(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=ys(v(p.Fa,p),Fc(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,ef(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=ys(v(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),sl(this),ef(this))};function Qo(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function ef(p){p.g=new Qr(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var E=vt(p.qa);Ye(E,"RID","rpc"),Ye(E,"SID",p.K),Ye(E,"AID",p.T),Ye(E,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ye(E,"TO",p.ja),Ye(E,"TYPE","xmlhttp"),Wo(p,E),p.m&&p.o&&Kt(E,p.m,p.o),p.L&&(p.g.I=p.L);var T=p.g;p=p.ia,T.L=1,T.v=jo(vt(E)),T.m=null,T.P=!0,wi(T,p)}n.Za=function(){this.C!=null&&(this.C=null,sl(this),jc(this),wt(19))};function al(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function tf(p,E){var T=null;if(p.g==E){al(p),Qo(p),p.g=null;var I=2}else if(Ts(p.h,E))T=E.D,cr(p.h,E),I=1;else return;if(p.G!=0){if(E.o)if(I==1){T=E.m?E.m.length:0,E=Date.now()-E.F;var q=p.B;I=Wa(),$t(I,new jh(I,T)),ol(p)}else Zh(p);else if(q=E.s,q==3||q==0&&0<E.X||!(I==1&&mm(p,E)||I==2&&jc(p)))switch(T&&0<T.length&&(E=p.h,E.i=E.i.concat(T)),q){case 1:xi(p,5);break;case 4:xi(p,10);break;case 3:xi(p,6);break;default:xi(p,2)}}}function Fc(p,E){let T=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(T*=2),T*E}function xi(p,E){if(p.j.info("Error code "+E),E==2){var T=v(p.fb,p),I=p.Xa;const q=!I;I=new Ci(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Cs(I,"https"),jo(I),q?Wh(I.toString(),T):Fo(I.toString(),T)}else wt(2);p.G=0,p.l&&p.l.sa(E),nf(p),Xh(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function nf(p){if(p.G=0,p.ka=[],p.l){const E=xn(p.h);(E.length!=0||p.i.length!=0)&&(A(p.ka,E),A(p.ka,p.i),p.h.i.length=0,C(p.i),p.i.length=0),p.l.ra()}}function rf(p,E,T){var I=T instanceof Ci?vt(T):new Ci(T);if(I.g!="")E&&(I.g=E+"."+I.g),Ho(I,I.s);else{var q=u.location;I=q.protocol,E=E?E+"."+q.hostname:q.hostname,q=+q.port;var Y=new Ci(null);I&&Cs(Y,I),E&&(Y.g=E),q&&Ho(Y,q),T&&(Y.l=T),I=Y}return T=p.D,E=p.ya,T&&E&&Ye(I,T,E),Ye(I,"VER",p.la),Wo(p,I),I}function sf(p,E,T){if(E&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Ca&&!p.pa?new Ze(new Rs({eb:T})):new Ze(p.pa),E.Ha(p.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function of(){}n=of.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ll(){}ll.prototype.g=function(p,E){return new On(p,E)};function On(p,E){Pt.call(this),this.g=new il(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(p?p["X-WebChannel-Client-Profile"]=E.va:p={"X-WebChannel-Client-Profile":E.va}),this.g.S=p,(p=E&&E.Sb)&&!z(p)&&(this.g.m=p),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!z(E)&&(this.g.D=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new ti(this)}b(On,Pt),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){zc(this.g)},On.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var T={};T.__data__=p,p=T}else this.u&&(T={},T.__data__=Rc(p),p=T);E.i.push(new cm(E.Ya++,p)),E.G==3&&ol(E)},On.prototype.N=function(){this.g.l=null,delete this.j,zc(this.g),delete this.g,On.aa.N.call(this)};function af(p){ps.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const T in E){p=T;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}b(af,ps);function lf(){xr.call(this),this.status=1}b(lf,xr);function ti(p){this.g=p}b(ti,of),ti.prototype.ua=function(){$t(this.g,"a")},ti.prototype.ta=function(p){$t(this.g,new af(p))},ti.prototype.sa=function(p){$t(this.g,new lf)},ti.prototype.ra=function(){$t(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,kR=function(){return new ll},RR=function(){return Wa()},AR=lr,I_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vt.NO_ERROR=0,Vt.TIMEOUT=8,Vt.HTTP_ERROR=6,kd=Vt,Ti.COMPLETE="complete",CR=Ti,Hh.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,zu=Hh,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,wR=Ze}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});const Cw="@firebase/firestore",Aw="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new Nv("@firebase/firestore");function Bl(){return Eo.logLevel}function jU(n){Eo.setLogLevel(n)}function me(n,...e){if(Eo.logLevel<=je.DEBUG){const t=e.map(Lv);Eo.debug(`Firestore (${yc}): ${n}`,...t)}}function is(n,...e){if(Eo.logLevel<=je.ERROR){const t=e.map(Lv);Eo.error(`Firestore (${yc}): ${n}`,...t)}}function oc(n,...e){if(Eo.logLevel<=je.WARN){const t=e.map(Lv);Eo.warn(`Firestore (${yc}): ${n}`,...t)}}function Lv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: `+n;throw is(e),new Error(e)}function et(n,e){n||Ae()}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends us{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(En.UNAUTHENTICATED))}shutdown(){}}class qU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $U{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ts,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ts)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string"),new IR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new En(e)}}class GU{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class KU{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new GU(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WU{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,rr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){et(this.o===void 0);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Rw(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et(typeof t.token=="string"),this.R=t.token,new Rw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=QU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Ue(n,e){return n<e?-1:n>e?1:0}function x_(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ue(r,i);{const o=xR(),l=YU(o.encode(kw(n,t)),o.encode(kw(e,t)));return l!==0?l:Ue(r,i)}}t+=r>65535?2:1}return Ue(n.length,e.length)}function kw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function YU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ue(n[t],e[t]);return Ue(n.length,e.length)}function ac(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=-62135596800,xw=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*xw);return new Ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Iw)throw new ge(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xw}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Iw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Ft(0,0))}static max(){return new ke(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="__name__";class ci{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(),r===void 0?r=e.length-t:r>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=ci.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ue(e.length,t.length)}static compareSegments(e,t){const r=ci.isNumericId(e),i=ci.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ci.extractNumericId(e).compare(ci.extractNumericId(t)):x_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class ut extends ci{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ut(t)}static emptyPath(){return new ut([])}}const XU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends ci{construct(e,t,r){return new dn(e,t,r)}static isValidIdentifier(e){return XU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ow}static keyField(){return new dn([Ow])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ge(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ge(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ge(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(r+=u,i++):(o(),i++)}if(o(),l)throw new ge(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(ut.fromString(e))}static fromName(e){return new Se(ut.fromString(e).popFirst(5))}static empty(){return new Se(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new ut(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=-1;function JU(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Ft(t+1,0):new Ft(t,r));return new bo(i,Se.empty(),e)}function ZU(n){return new bo(n.readTime,n.key,hh)}class bo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bo(ke.min(),Se.empty(),hh)}static max(){return new bo(ke.max(),Se.empty(),hh)}}function eB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==tB)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,o=0,l=!1;e.forEach(u=>{++i,u.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const o=e.length,l=new Array(o);let u=0;for(let h=0;h<o;h++){const d=h;t(e[d]).next(g=>{l[d]=g,++u,u===o&&r(l)},g=>i(g))}})}static doWhile(e,t){return new ie((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function rB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Hp.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=-1;function jp(n){return n==null}function np(n){return n===0&&1/n==-1/0}function iB(n){return typeof n=="number"&&Number.isInteger(n)&&!np(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="";function sB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dw(e)),e=oB(n.get(t),e);return Dw(e)}function oB(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case DR:t+="";break;default:t+=o}}return t}function Dw(n){return n+DR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??un.RED,this.left=i??un.EMPTY,this.right=o??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new un(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return un.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,r,i,o){return this}insert(e,t,r){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nw(this.data.getIterator())}getIteratorFrom(e){return new Nw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class Nw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new sr([])}unionWith(e){let t=new qt(dn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ac(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new NR("Invalid base64 string: "+o):o}}(e);return new pn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const aB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(n){if(et(!!n),typeof n=="string"){let e=0;const t=aB.exec(n);if(et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function To(n){return typeof n=="string"?pn.fromBase64String(n):pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="server_timestamp",VR="__type__",LR="__previous_value__",UR="__local_write_time__";function Bv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[VR])===null||t===void 0?void 0:t.stringValue)===PR}function Fp(n){const e=n.mapValue.fields[LR];return Bv(e)?Fp(e):e}function fh(n){const e=So(n.mapValue.fields[UR].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,t,r,i,o,l,u,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d}}const rp="(default)";class dh{constructor(e,t){this.projectId=e,this.database=t||rp}static empty(){return new dh("","")}get isDefaultDatabase(){return this.database===rp}isEqual(e){return e instanceof dh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="__type__",cB="__max__",gd={mapValue:{}},zR="__vector__",ip="value";function wo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bv(n)?4:hB(n)?9007199254740991:uB(n)?10:11:Ae()}function yi(n,e){if(n===e)return!0;const t=wo(n);if(t!==wo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fh(n).isEqual(fh(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=So(i.timestampValue),u=So(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return To(i.bytesValue).isEqual(To(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return At(i.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return At(i.integerValue)===At(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=At(i.doubleValue),u=At(o.doubleValue);return l===u?np(l)===np(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return ac(n.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Mw(l)!==Mw(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!yi(l[h],u[h])))return!1;return!0}(n,e);default:return Ae()}}function ph(n,e){return(n.values||[]).find(t=>yi(t,e))!==void 0}function lc(n,e){if(n===e)return 0;const t=wo(n),r=wo(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(o,l){const u=At(o.integerValue||o.doubleValue),h=At(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return Pw(n.timestampValue,e.timestampValue);case 4:return Pw(fh(n),fh(e));case 5:return x_(n.stringValue,e.stringValue);case 6:return function(o,l){const u=To(o),h=To(l);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),h=l.split("/");for(let d=0;d<u.length&&d<h.length;d++){const g=Ue(u[d],h[d]);if(g!==0)return g}return Ue(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const u=Ue(At(o.latitude),At(l.latitude));return u!==0?u:Ue(At(o.longitude),At(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Vw(n.arrayValue,e.arrayValue);case 10:return function(o,l){var u,h,d,g;const _=o.fields||{},v=l.fields||{},S=(u=_[ip])===null||u===void 0?void 0:u.arrayValue,b=(h=v[ip])===null||h===void 0?void 0:h.arrayValue,C=Ue(((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0,((g=b==null?void 0:b.values)===null||g===void 0?void 0:g.length)||0);return C!==0?C:Vw(S,b)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===gd.mapValue&&l===gd.mapValue)return 0;if(o===gd.mapValue)return 1;if(l===gd.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),d=l.fields||{},g=Object.keys(d);h.sort(),g.sort();for(let _=0;_<h.length&&_<g.length;++_){const v=x_(h[_],g[_]);if(v!==0)return v;const S=lc(u[h[_]],d[g[_]]);if(S!==0)return S}return Ue(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function Pw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=So(n),r=So(e),i=Ue(t.seconds,r.seconds);return i!==0?i:Ue(t.nanos,r.nanos)}function Vw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=lc(t[i],r[i]);if(o)return o}return Ue(t.length,r.length)}function cc(n){return O_(n)}function O_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=So(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return To(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=O_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${O_(t.fields[l])}`;return i+"}"}(n.mapValue):Ae()}function Id(n){switch(wo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fp(n);return e?16+Id(e):16;case 5:return 2*n.stringValue.length;case 6:return To(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Id(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Oo(r.fields,(o,l)=>{i+=o.length+Id(l)}),i}(n.mapValue);default:throw Ae()}}function Lw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function D_(n){return!!n&&"integerValue"in n}function zv(n){return!!n&&"arrayValue"in n}function Uw(n){return!!n&&"nullValue"in n}function Bw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xd(n){return!!n&&"mapValue"in n}function uB(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[BR])===null||t===void 0?void 0:t.stringValue)===zR}function Ku(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Oo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ku(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ku(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(t)}setAll(e){let t=dn.emptyPath(),r={},i=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}l?r[u.lastSegment()]=Ku(l):i.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Oo(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new qn(Ku(this.value))}}function HR(n){const e=[];return Oo(n.fields,(t,r)=>{const i=new dn([t]);if(xd(r)){const o=HR(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,t,r,i,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Sn(e,0,ke.min(),ke.min(),ke.min(),qn.empty(),0)}static newFoundDocument(e,t,r,i){return new Sn(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new Sn(e,2,t,ke.min(),ke.min(),qn.empty(),0)}static newUnknownDocument(e,t){return new Sn(e,3,t,ke.min(),ke.min(),qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t){this.position=e,this.inclusive=t}}function zw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=Se.comparator(Se.fromName(l.referenceValue),t.key):r=lc(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t="asc"){this.field=e,this.dir=t}}function fB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{}class Mt extends jR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new pB(e,t,r):t==="array-contains"?new yB(e,r):t==="in"?new _B(e,r):t==="not-in"?new vB(e,r):t==="array-contains-any"?new EB(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new mB(e,r):new gB(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(lc(t,this.value)):t!==null&&wo(this.value)===wo(t)&&this.matchesComparison(lc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends jR{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Fr(e,t)}matches(e){return FR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function FR(n){return n.op==="and"}function qR(n){return dB(n)&&FR(n)}function dB(n){for(const e of n.filters)if(e instanceof Fr)return!1;return!0}function M_(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+cc(n.value);if(qR(n))return n.filters.map(e=>M_(e)).join(",");{const e=n.filters.map(t=>M_(t)).join(",");return`${n.op}(${e})`}}function $R(n,e){return n instanceof Mt?function(r,i){return i instanceof Mt&&r.op===i.op&&r.field.isEqual(i.field)&&yi(r.value,i.value)}(n,e):n instanceof Fr?function(r,i){return i instanceof Fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,u)=>o&&$R(l,i.filters[u]),!0):!1}(n,e):void Ae()}function GR(n){return n instanceof Mt?function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`}(n):n instanceof Fr?function(t){return t.op.toString()+" {"+t.getFilters().map(GR).join(" ,")+"}"}(n):"Filter"}class pB extends Mt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class mB extends Mt{constructor(e,t){super(e,"in",t),this.keys=KR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gB extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=KR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function KR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class yB extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zv(t)&&ph(t.arrayValue,this.value)}}class _B extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ph(this.value.arrayValue,t)}}class vB extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ph(this.value.arrayValue,t)}}class EB extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ph(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,t=null,r=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function jw(n,e=null,t=[],r=[],i=null,o=null,l=null){return new bB(n,e,t,r,i,o,l)}function Hv(n){const e=Oe(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>M_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),jp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cc(r)).join(",")),e.le=t}return e.le}function jv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$R(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hw(n.startAt,e.startAt)&&Hw(n.endAt,e.endAt)}function N_(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t=null,r=[],i=[],o=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function SB(n,e,t,r,i,o,l,u){return new kh(n,e,t,r,i,o,l,u)}function Fv(n){return new kh(n)}function Fw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function WR(n){return n.collectionGroup!==null}function Wu(n){const e=Oe(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new qt(dn.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new op(o,r))}),t.has(dn.keyField().canonicalString())||e.he.push(new op(dn.keyField(),r))}return e.he}function hi(n){const e=Oe(n);return e.Pe||(e.Pe=TB(e,Wu(n))),e.Pe}function TB(n,e){if(n.limitType==="F")return jw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new op(i.field,o)});const t=n.endAt?new sp(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new sp(n.startAt.position,n.startAt.inclusive):null;return jw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function P_(n,e){const t=n.filters.concat([e]);return new kh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function V_(n,e,t){return new kh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qp(n,e){return jv(hi(n),hi(e))&&n.limitType===e.limitType}function QR(n){return`${Hv(hi(n))}|lt:${n.limitType}`}function zl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>GR(i)).join(", ")}]`),jp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cc(i)).join(",")),`Target(${r})`}(hi(n))}; limitType=${n.limitType})`}function $p(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Se.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Wu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,u,h){const d=zw(l,u,h);return l.inclusive?d<=0:d<0}(r.startAt,Wu(r),i)||r.endAt&&!function(l,u,h){const d=zw(l,u,h);return l.inclusive?d>=0:d>0}(r.endAt,Wu(r),i))}(n,e)}function wB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YR(n){return(e,t)=>{let r=!1;for(const i of Wu(n)){const o=CB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function CB(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(o,l,u){const h=l.data.field(o),d=u.data.field(o);return h!==null&&d!==null?lc(h,d):Ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return MR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=new yt(Se.comparator);function ss(){return AB}const XR=new yt(Se.comparator);function Hu(...n){let e=XR;for(const t of n)e=e.insert(t.key,t);return e}function JR(n){let e=XR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ba(){return Qu()}function ZR(){return Qu()}function Qu(){return new Ha(n=>n.toString(),(n,e)=>n.isEqual(e))}const RB=new yt(Se.comparator),kB=new qt(Se.comparator);function Fe(...n){let e=kB;for(const t of n)e=e.add(t);return e}const IB=new qt(Ue);function xB(){return IB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:np(e)?"-0":e}}function ek(n){return{integerValue:""+n}}function OB(n,e){return iB(e)?ek(e):qv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this._=void 0}}function DB(n,e,t){return n instanceof ap?function(i,o){const l={fields:{[VR]:{stringValue:PR},[UR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Bv(o)&&(o=Fp(o)),o&&(l.fields[LR]=o),{mapValue:l}}(t,e):n instanceof mh?nk(n,e):n instanceof gh?rk(n,e):function(i,o){const l=tk(i,o),u=qw(l)+qw(i.Ie);return D_(l)&&D_(i.Ie)?ek(u):qv(i.serializer,u)}(n,e)}function MB(n,e,t){return n instanceof mh?nk(n,e):n instanceof gh?rk(n,e):t}function tk(n,e){return n instanceof lp?function(r){return D_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ap extends Gp{}class mh extends Gp{constructor(e){super(),this.elements=e}}function nk(n,e){const t=ik(e);for(const r of n.elements)t.some(i=>yi(i,r))||t.push(r);return{arrayValue:{values:t}}}class gh extends Gp{constructor(e){super(),this.elements=e}}function rk(n,e){let t=ik(e);for(const r of n.elements)t=t.filter(i=>!yi(i,r));return{arrayValue:{values:t}}}class lp extends Gp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function qw(n){return At(n.integerValue||n.doubleValue)}function ik(n){return zv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function NB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mh&&i instanceof mh||r instanceof gh&&i instanceof gh?ac(r.elements,i.elements,yi):r instanceof lp&&i instanceof lp?yi(r.Ie,i.Ie):r instanceof ap&&i instanceof ap}(n.transform,e.transform)}class PB{constructor(e,t){this.version=e,this.transformResults=t}}class zr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zr}static exists(e){return new zr(void 0,e)}static updateTime(e){return new zr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Od(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kp{}function sk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $v(n.key,zr.none()):new Ih(n.key,n.data,zr.none());{const t=n.data,r=qn.empty();let i=new qt(dn.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Do(n.key,r,new sr(i.toArray()),zr.none())}}function VB(n,e,t){n instanceof Ih?function(i,o,l){const u=i.value.clone(),h=Gw(i.fieldTransforms,o,l.transformResults);u.setAll(h),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Do?function(i,o,l){if(!Od(i.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Gw(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(ok(i)),h.setAll(u),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Yu(n,e,t,r){return n instanceof Ih?function(o,l,u,h){if(!Od(o.precondition,l))return u;const d=o.value.clone(),g=Kw(o.fieldTransforms,h,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Do?function(o,l,u,h){if(!Od(o.precondition,l))return u;const d=Kw(o.fieldTransforms,h,l),g=l.data;return g.setAll(ok(o)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(o,l,u){return Od(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function LB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=tk(r.transform,i||null);o!=null&&(t===null&&(t=qn.empty()),t.set(r.field,o))}return t||null}function $w(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ac(r,i,(o,l)=>NB(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ih extends Kp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Do extends Kp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ok(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gw(n,e,t){const r=new Map;et(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,u=e.data.field(o.field);r.set(o.field,MB(l,u,t[i]))}return r}function Kw(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,DB(o,l,e))}return r}class $v extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UB extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&VB(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ZR();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(i.key)?null:u;const h=sk(l,u);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fe())}isEqual(e){return this.batchId===e.batchId&&ac(this.mutations,e.mutations,(t,r)=>$w(t,r))&&ac(this.baseMutations,e.baseMutations,(t,r)=>$w(t,r))}}class Gv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){et(e.mutations.length===r.length);let i=function(){return RB}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Gv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,We;function jB(n){switch(n){case se.OK:return Ae();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ae()}}function ak(n){if(n===void 0)return is("GRPC error has no .code"),se.UNKNOWN;switch(n){case Ot.OK:return se.OK;case Ot.CANCELLED:return se.CANCELLED;case Ot.UNKNOWN:return se.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return se.INTERNAL;case Ot.UNAVAILABLE:return se.UNAVAILABLE;case Ot.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Ot.NOT_FOUND:return se.NOT_FOUND;case Ot.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Ot.ABORTED:return se.ABORTED;case Ot.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Ot.DATA_LOSS:return se.DATA_LOSS;default:return Ae()}}(We=Ot||(Ot={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=new mo([4294967295,4294967295],0);function Ww(n){const e=xR().encode(n),t=new TR;return t.update(e),new Uint8Array(t.digest())}function Qw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new mo([t,r],0),new mo([i,o],0)]}class Kv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(r<0)throw new ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=mo.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(mo.fromNumber(r)));return i.compare(FB)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Ww(e),[r,i]=Qw(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,i,o);if(!this.Re(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Kv(o,i,t);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const t=Ww(e),[r,i]=Qw(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,i,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,xh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wp(ke.min(),i,new yt(Ue),ss(),Fe())}}class xh{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new xh(r,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class lk{constructor(e,t){this.targetId=e,this.ge=t}}class ck{constructor(e,t,r=pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Yw{constructor(){this.pe=0,this.ye=Xw(),this.we=pn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Fe(),t=Fe(),r=Fe();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ae()}}),new xh(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=Xw()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,et(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class qB{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ss(),this.$e=yd(),this.Ue=yd(),this.Ke=new yt(Ue)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const o=i.target;if(N_(o))if(r===0){const l=new Se(o.path);this.ze(t,l,Sn.newNoDocument(l,ke.min()))}else et(r===1);else{const l=this.et(t);if(l!==r){const u=this.tt(e),h=u?this.nt(u,e,l):1;if(h!==0){this.Ye(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,d)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,u;try{l=To(r).toUint8Array()}catch(h){if(h instanceof NR)return oc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Kv(l,i,o)}catch(h){return oc(h instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ee===0?null:u}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(t,o,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&N_(u.target)){const h=new Se(u.target.path);this._t(h).has(l)||this.ut(l,h)||this.ze(l,h,Sn.newNoDocument(h,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let r=Fe();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(h=>{const d=this.Xe(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const i=new Wp(e,t,this.Ke,this.Qe,r);return this.Qe=ss(),this.$e=yd(),this.Ue=yd(),this.Ke=new yt(Ue),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Yw,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new qt(Ue),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new qt(Ue),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Yw),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function yd(){return new yt(Se.comparator)}function Xw(){return new yt(Se.comparator)}const $B={asc:"ASCENDING",desc:"DESCENDING"},GB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KB={and:"AND",or:"OR"};class WB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function L_(n,e){return n.useProto3Json||jp(e)?e:{value:e}}function cp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QB(n,e){return cp(n,e.toTimestamp())}function fi(n){return et(!!n),ke.fromTimestamp(function(t){const r=So(t);return new Ft(r.seconds,r.nanos)}(n))}function Wv(n,e){return U_(n,e).canonicalString()}function U_(n,e){const t=function(i){return new ut(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hk(n){const e=ut.fromString(n);return et(gk(e)),e}function B_(n,e){return Wv(n.databaseId,e.path)}function By(n,e){const t=hk(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(dk(t))}function fk(n,e){return Wv(n.databaseId,e)}function YB(n){const e=hk(n);return e.length===4?ut.emptyPath():dk(e)}function z_(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dk(n){return et(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Jw(n,e,t){return{name:B_(n,e),fields:t.value.mapValue.fields}}function XB(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,g){return d.useProto3Json?(et(g===void 0||typeof g=="string"),pn.fromBase64String(g||"")):(et(g===void 0||g instanceof Buffer||g instanceof Uint8Array),pn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(d){const g=d.code===void 0?se.UNKNOWN:ak(d.code);return new ge(g,d.message||"")}(l);t=new ck(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=By(n,r.document.name),o=fi(r.document.updateTime),l=r.document.createTime?fi(r.document.createTime):ke.min(),u=new qn({mapValue:{fields:r.document.fields}}),h=Sn.newFoundDocument(i,o,l,u),d=r.targetIds||[],g=r.removedTargetIds||[];t=new Dd(d,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=By(n,r.document),o=r.readTime?fi(r.readTime):ke.min(),l=Sn.newNoDocument(i,o),u=r.removedTargetIds||[];t=new Dd([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=By(n,r.document),o=r.removedTargetIds||[];t=new Dd([],o,i,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new HB(i,o),u=r.targetId;t=new lk(u,l)}}return t}function JB(n,e){let t;if(e instanceof Ih)t={update:Jw(n,e.key,e.value)};else if(e instanceof $v)t={delete:B_(n,e.key)};else if(e instanceof Do)t={update:Jw(n,e.key,e.data),updateMask:a9(e.fieldMask)};else{if(!(e instanceof UB))return Ae();t={verify:B_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const u=l.transform;if(u instanceof ap)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof mh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof gh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof lp)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:QB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae()}(n,e.precondition)),t}function ZB(n,e){return n&&n.length>0?(et(e!==void 0),n.map(t=>function(i,o){let l=i.updateTime?fi(i.updateTime):fi(o);return l.isEqual(ke.min())&&(l=fi(o)),new PB(l,i.transformResults||[])}(t,e))):[]}function e9(n,e){return{documents:[fk(n,e.path)]}}function t9(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fk(n,i);const o=function(d){if(d.length!==0)return mk(Fr.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(d){if(d.length!==0)return d.map(g=>function(v){return{field:Hl(v.field),direction:i9(v.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=L_(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ht:t,parent:i}}function n9(n){let e=YB(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){et(r===1);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(_){const v=pk(_);return v instanceof Fr&&qR(v)?v.getFilters():[v]}(t.where));let l=[];t.orderBy&&(l=function(_){return _.map(v=>function(b){return new op(jl(b.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(t.orderBy));let u=null;t.limit&&(u=function(_){let v;return v=typeof _=="object"?_.value:_,jp(v)?null:v}(t.limit));let h=null;t.startAt&&(h=function(_){const v=!!_.before,S=_.values||[];return new sp(S,v)}(t.startAt));let d=null;return t.endAt&&(d=function(_){const v=!_.before,S=_.values||[];return new sp(S,v)}(t.endAt)),SB(e,i,l,o,u,"F",h,d)}function r9(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jl(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jl(t.unaryFilter.field);return Mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=jl(t.unaryFilter.field);return Mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=jl(t.unaryFilter.field);return Mt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return Mt.create(jl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Fr.create(t.compositeFilter.filters.map(r=>pk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function i9(n){return $B[n]}function s9(n){return GB[n]}function o9(n){return KB[n]}function Hl(n){return{fieldPath:n.canonicalString()}}function jl(n){return dn.fromServerFormat(n.fieldPath)}function mk(n){return n instanceof Mt?function(t){if(t.op==="=="){if(Bw(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NAN"}};if(Uw(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Bw(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NAN"}};if(Uw(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(t.field),op:s9(t.op),value:t.value}}}(n):n instanceof Fr?function(t){const r=t.getFilters().map(i=>mk(i));return r.length===1?r[0]:{compositeFilter:{op:o9(t.op),filters:r}}}(n):Ae()}function a9(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,r,i,o=ke.min(),l=ke.min(),u=pn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new so(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.Tt=e}}function c9(n){const e=n9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?V_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this.Tn=new h9}addToCollectionParentIndex(e,t){return this.Tn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(bo.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class h9{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qt(ut.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yk=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(yk,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new uc(0)}static Kn(){return new uc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="LruGarbageCollector",f9=1048576;function t1([n,e],[t,r]){const i=Ue(n,t);return i===0?Ue(e,r):i}class d9{constructor(e){this.Hn=e,this.buffer=new qt(t1),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();t1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class p9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){me(e1,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vc(t)?me(e1,"Ignoring IndexedDB error during garbage collection: ",t):await _c(t)}await this.er(3e5)})}}class m9{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Hp.ae);const r=new d9(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Zw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zw):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,l,u,h,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,l=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,u=Date.now(),this.removeTargets(e,r,t))).next(_=>(o=_,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(d=Date.now(),Bl()<=je.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${_} documents in `+(d-h)+`ms
Total Duration: ${d-g}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:_})))}}function g9(n,e){return new m9(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(){this.changes=new Ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Yu(r.mutation,i,sr.empty(),Ft.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fe()){const i=ba();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Hu();return o.forEach((u,h)=>{l=l.insert(u,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ba();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fe()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,r,i){let o=ss();const l=Qu(),u=function(){return Qu()}();return t.forEach((h,d)=>{const g=r.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof Do)?o=o.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),Yu(g.mutation,d,g.mutation.getFieldMask(),Ft.now())):l.set(d.key,sr.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((d,g)=>l.set(d,g)),t.forEach((d,g)=>{var _;return u.set(d,new _9(g,(_=l.get(d))!==null&&_!==void 0?_:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Qu();let i=new yt((l,u)=>l-u),o=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let g=r.get(h)||sr.empty();g=u.applyToLocalView(d,g),r.set(h,g);const _=(i.get(u.batchId)||Fe()).add(h);i=i.insert(u.batchId,_)})}).next(()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),d=h.key,g=h.value,_=ZR();g.forEach(v=>{if(!o.has(v)){const S=sk(t.get(v),r.get(v));S!==null&&_.set(v,S),o=o.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(e,d,_))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return Se.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ie.resolve(ba());let u=hh,h=o;return l.next(d=>ie.forEach(d,(g,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(g)?ie.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,h,d,Fe())).next(g=>({batchId:u,changes:JR(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let i=Hu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Hu();return this.indexManager.getCollectionParents(e,o).next(u=>ie.forEach(u,h=>{const d=function(_,v){return new kh(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((_,v)=>{l=l.insert(_,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Sn.newInvalidDocument(g)))});let u=Hu();return l.forEach((h,d)=>{const g=o.get(h);g!==void 0&&Yu(g.mutation,d,sr.empty(),Ft.now()),$p(t,d)&&(u=u.insert(h,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ie.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:fi(i.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:c9(i.bundledQuery),readTime:fi(i.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(){this.overlays=new yt(Se.comparator),this.Rr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ba();return ie.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=ba(),o=t.length+1,l=new Se(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new yt((d,g)=>d-g);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=o.get(d.largestBatchId);g===null&&(g=ba(),o=o.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const u=ba(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,g)=>u.set(d,g)),!(u.size()>=i)););return ie.resolve(u)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new zB(t,r));let o=this.Rr.get(t);o===void 0&&(o=Fe(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.Vr=new qt(Jt.mr),this.gr=new qt(Jt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Jt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Jt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Se(new ut([])),r=new Jt(t,e),i=new Jt(t,e+1),o=[];return this.gr.forEachInRange([r,i],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Se(new ut([])),r=new Jt(t,e),i=new Jt(t,e+1);let o=Fe();return this.gr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Jt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Se.comparator(e.key,t.key)||Ue(e.Cr,t.Cr)}static pr(e,t){return Ue(e.Cr,t.Cr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new qt(Jt.mr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new BB(o,t,r,i);this.mutationQueue.push(l);for(const u of i)this.Mr=this.Mr.add(new Jt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Uv:this.Fr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Jt(t,0),i=new Jt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],l=>{const u=this.Or(l.Cr);o.push(u)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qt(Ue);return t.forEach(i=>{const o=new Jt(i,0),l=new Jt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{r=r.add(u.Cr)})}),ie.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Se.isDocumentKey(o)||(o=o.child(""));const l=new Jt(new Se(o),0);let u=new qt(Ue);return this.Mr.forEachWhile(h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.Cr)),!0)},l),ie.resolve(this.Br(u))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){et(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ie.forEach(t.mutations,i=>{const o=new Jt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Jt(t,0),i=this.Mr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e){this.kr=e,this.docs=function(){return new yt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=ss();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sn.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ss();const l=t.path,u=new Se(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:d,value:{document:g}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||eB(ZU(g),r)<=0||(i.has(g.key)||$p(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ae()}qr(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new C9(this)}getSize(e){return ie.resolve(this.size)}}class C9 extends y9{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e){this.persistence=e,this.Qr=new Ha(t=>Hv(t),jv),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Qv,this.targetCount=0,this.Kr=uc.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ie.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.zn(t),ie.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),ie.waitFor(o).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Hp(0),this.zr=!1,this.zr=!0,this.jr=new S9,this.referenceDelegate=e(this),this.Hr=new A9(this),this.indexManager=new u9,this.remoteDocumentCache=function(i){return new w9(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new l9(t),this.Yr=new E9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new T9(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const i=new R9(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return ie.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class R9 extends nB{constructor(e){super(),this.currentSequenceNumber=e}}class Yv{constructor(e){this.persistence=e,this.ti=new Qv,this.ni=null}static ri(e){return new Yv(e)}get ii(){if(this.ni)return this.ni;throw Ae()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ie.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ii,r=>{const i=Se.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,ke.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ie.or([()=>ie.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class up{constructor(e,t){this.persistence=e,this.oi=new Ha(r=>sB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=g9(this,t)}static ri(e,t){return new up(e,t)}Zr(){}Xr(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ie.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?ie.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,l=>this.ar(e,l,t).next(u=>{u||(r++,o.removeEntry(l,ke.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ie.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Id(e.data.value)),t}ar(e,t,r){return ie.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Fe(),i=Fe();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Xv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return S4()?8:rB(wn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new k9;return this._s(e,t,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,t,l,u.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Bl()<=je.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ie.resolve()):(Bl()<=je.DEBUG&&me("QueryEngine","Query:",zl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Bl()<=je.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(t))):ie.resolve())}rs(e,t){if(Fw(t))return ie.resolve(null);let r=hi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=V_(t,null,"F"),r=hi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Fe(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const d=this.cs(t,u);return this.ls(t,d,l,h.readTime)?this.rs(e,V_(t,null,"F")):this.hs(e,d,t,h)}))})))}ss(e,t,r,i){return Fw(t)||i.isEqual(ke.min())?ie.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(t,o);return this.ls(t,l,r,i)?ie.resolve(null):(Bl()<=je.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zl(t)),this.hs(e,l,t,JU(i,hh)).next(u=>u))})}cs(e,t){let r=new qt(YR(e));return t.forEach((i,o)=>{$p(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return Bl()<=je.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",zl(t)),this.ns.getDocumentsMatchingQuery(e,t,bo.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="LocalStore",x9=3e8;class O9{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new yt(Ue),this.Is=new Ha(o=>Hv(o),jv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v9(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function D9(n,e,t,r){return new O9(n,e,t,r)}async function vk(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let h=Fe();for(const d of i){l.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}for(const d of o){u.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(d=>({Rs:d,removedBatchIds:l,addedBatchIds:u}))})})}function M9(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(u,h,d,g){const _=d.batch,v=_.keys();let S=ie.resolve();return v.forEach(b=>{S=S.next(()=>g.getEntry(h,b)).next(C=>{const A=d.docVersions.get(b);et(A!==null),C.version.compareTo(A)<0&&(_.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),g.addEntry(C)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(h,_))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Fe();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Ek(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function N9(n,e){const t=Oe(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const u=[];e.targetChanges.forEach((g,_)=>{const v=i.get(_);if(!v)return;u.push(t.Hr.removeMatchingKeys(o,g.removedDocuments,_).next(()=>t.Hr.addMatchingKeys(o,g.addedDocuments,_)));let S=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(pn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,r)),i=i.insert(_,S),function(C,A,O){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=x9?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(v,S,g)&&u.push(t.Hr.updateTargetData(o,S))});let h=ss(),d=Fe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(P9(o,l,e.documentUpdates).next(g=>{h=g.Vs,d=g.fs})),!r.isEqual(ke.min())){const g=t.Hr.getLastRemoteSnapshotVersion(o).next(_=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return ie.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,d)).next(()=>h)}).then(o=>(t.Ts=i,o))}function P9(n,e,t){let r=Fe(),i=Fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=ss();return t.forEach((u,h)=>{const d=o.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(ke.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):me(Jv,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)}),{Vs:l,fs:i}})}function V9(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Uv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function L9(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,ie.resolve(i)):t.Hr.allocateTargetId(r).next(l=>(i=new so(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function H_(n,e,t){const r=Oe(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!vc(l))throw l;me(Jv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function n1(n,e,t){const r=Oe(n);let i=ke.min(),o=Fe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,d,g){const _=Oe(h),v=_.Is.get(g);return v!==void 0?ie.resolve(_.Ts.get(v)):_.Hr.getTargetData(d,g)}(r,l,hi(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(h=>{o=h})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?i:ke.min(),t?o:Fe())).next(u=>(U9(r,wB(e),u),{documents:u,gs:o})))}function U9(n,e,t){let r=n.Es.get(e)||ke.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class r1{constructor(){this.activeTargetIds=xB()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B9{constructor(){this.ho=new r1,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new r1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="ConnectivityMonitor";class s1{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(i1,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){me(i1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d=null;function j_(){return _d===null?_d=function(){return 268435456+Math.round(2147483648*Math.random())}():_d++,"0x"+_d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="RestConnection",H9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j9{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===rp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){const l=j_(),u=this.bo(e,t.toUriEncodedString());me(zy,`Sending RPC '${e}' ${l}:`,u,r);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,i,o),this.vo(e,u,h,r).then(d=>(me(zy,`Received RPC '${e}' ${l}: `,d),d),d=>{throw oc(zy,`RPC '${e}' ${l} failed with error: `,d,"url: ",u,"request:",r),d})}Co(e,t,r,i,o,l){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){const r=H9[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class q9 extends j9{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const o=j_();return new Promise((l,u)=>{const h=new wR;h.setWithCredentials(!0),h.listenOnce(CR.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case kd.NO_ERROR:const g=h.getResponseJson();me(_n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case kd.TIMEOUT:me(_n,`RPC '${e}' ${o} timed out`),u(new ge(se.DEADLINE_EXCEEDED,"Request time out"));break;case kd.HTTP_ERROR:const _=h.getStatus();if(me(_n,`RPC '${e}' ${o} failed with status:`,_,"response text:",h.getResponseText()),_>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const b=function(A){const O=A.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(O)>=0?O:se.UNKNOWN}(S.status);u(new ge(b,S.message))}else u(new ge(se.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ge(se.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{me(_n,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);me(_n,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",d,r,15)})}Wo(e,t,r){const i=j_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=kR(),u=RR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");me(_n,`Creating RPC '${e}' stream ${i}: ${g}`,h);const _=l.createWebChannel(g,h);let v=!1,S=!1;const b=new F9({Fo:A=>{S?me(_n,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(v||(me(_n,`Opening RPC '${e}' stream ${i} transport.`),_.open(),v=!0),me(_n,`RPC '${e}' stream ${i} sending:`,A),_.send(A))},Mo:()=>_.close()}),C=(A,O,z)=>{A.listen(O,Q=>{try{z(Q)}catch(F){setTimeout(()=>{throw F},0)}})};return C(_,zu.EventType.OPEN,()=>{S||(me(_n,`RPC '${e}' stream ${i} transport opened.`),b.Qo())}),C(_,zu.EventType.CLOSE,()=>{S||(S=!0,me(_n,`RPC '${e}' stream ${i} transport closed`),b.Uo())}),C(_,zu.EventType.ERROR,A=>{S||(S=!0,oc(_n,`RPC '${e}' stream ${i} transport errored:`,A),b.Uo(new ge(se.UNAVAILABLE,"The operation could not be completed")))}),C(_,zu.EventType.MESSAGE,A=>{var O;if(!S){const z=A.data[0];et(!!z);const Q=z,F=(Q==null?void 0:Q.error)||((O=Q[0])===null||O===void 0?void 0:O.error);if(F){me(_n,`RPC '${e}' stream ${i} received error:`,F);const W=F.status;let X=function(k){const D=Ot[k];if(D!==void 0)return ak(D)}(W),N=F.message;X===void 0&&(X=se.INTERNAL,N="Unknown error status: "+W+" with message "+F.message),S=!0,b.Uo(new ge(X,N)),_.close()}else me(_n,`RPC '${e}' stream ${i} received:`,z),b.Ko(z)}}),C(u,AR.STAT_EVENT,A=>{A.stat===I_.PROXY?me(_n,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===I_.NOPROXY&&me(_n,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.$o()},0),b}}function Hy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n){return new WB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="PersistentStream";class Sk{constructor(e,t,r,i,o,l,u,h){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new bk(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new ge(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return me(o1,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(me(o1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $9 extends Sk{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=XB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ke.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ke.min():l.readTime?fi(l.readTime):ke.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=z_(this.serializer),t.addTarget=function(o,l){let u;const h=l.target;if(u=N_(h)?{documents:e9(o,h)}:{query:t9(o,h).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=uk(o,l.resumeToken);const d=L_(o,l.expectedCount);d!==null&&(u.expectedCount=d)}else if(l.snapshotVersion.compareTo(ke.min())>0){u.readTime=cp(o,l.snapshotVersion.toTimestamp());const d=L_(o,l.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=r9(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=z_(this.serializer),t.removeTarget=e,this.I_(t)}}class G9 extends Sk{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=ZB(e.writeResults,e.commitTime),r=fi(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=z_(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>JB(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{}class W9 extends K9{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new ge(se.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,U_(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(se.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,U_(t,r),i,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(se.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Q9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(is(t),this.N_=!1):me("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="RemoteStore";class Y9{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{ja(this)&&(me(Va,"Restarting streams for network reachability change."),await async function(h){const d=Oe(h);d.W_.add(4),await Oh(d),d.j_.set("Unknown"),d.W_.delete(4),await Yp(d)}(this))})}),this.j_=new Q9(r,i)}}async function Yp(n){if(ja(n))for(const e of n.G_)await e(!0)}async function Oh(n){for(const e of n.G_)await e(!1)}function Tk(n,e){const t=Oe(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),n0(t)?t0(t):Ec(t).c_()&&e0(t,e))}function Zv(n,e){const t=Oe(n),r=Ec(t);t.K_.delete(e),r.c_()&&wk(t,e),t.K_.size===0&&(r.c_()?r.P_():ja(t)&&t.j_.set("Unknown"))}function e0(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ec(n).y_(e)}function wk(n,e){n.H_.Ne(e),Ec(n).w_(e)}function t0(n){n.H_=new qB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Ec(n).start(),n.j_.B_()}function n0(n){return ja(n)&&!Ec(n).u_()&&n.K_.size>0}function ja(n){return Oe(n).W_.size===0}function Ck(n){n.H_=void 0}async function X9(n){n.j_.set("Online")}async function J9(n){n.K_.forEach((e,t)=>{e0(n,e)})}async function Z9(n,e){Ck(n),n0(n)?(n.j_.q_(e),t0(n)):n.j_.set("Unknown")}async function ez(n,e,t){if(n.j_.set("Online"),e instanceof ck&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const u of o.targetIds)i.K_.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.K_.delete(u),i.H_.removeTarget(u))}(n,e)}catch(r){me(Va,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hp(n,r)}else if(e instanceof Dd?n.H_.We(e):e instanceof lk?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ke.min()))try{const r=await Ek(n.localStore);t.compareTo(r)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.K_.get(d);g&&o.K_.set(d,g.withResumeToken(h.resumeToken,l))}}),u.targetMismatches.forEach((h,d)=>{const g=o.K_.get(h);if(!g)return;o.K_.set(h,g.withResumeToken(pn.EMPTY_BYTE_STRING,g.snapshotVersion)),wk(o,h);const _=new so(g.target,h,d,g.sequenceNumber);e0(o,_)}),o.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){me(Va,"Failed to raise snapshot:",r),await hp(n,r)}}async function hp(n,e,t){if(!vc(e))throw e;n.W_.add(1),await Oh(n),n.j_.set("Offline"),t||(t=()=>Ek(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(Va,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Yp(n)})}function Ak(n,e){return e().catch(t=>hp(n,t,e))}async function Xp(n){const e=Oe(n),t=Co(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Uv;for(;tz(e);)try{const i=await V9(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,nz(e,i)}catch(i){await hp(e,i)}Rk(e)&&kk(e)}function tz(n){return ja(n)&&n.U_.length<10}function nz(n,e){n.U_.push(e);const t=Co(n);t.c_()&&t.S_&&t.b_(e.mutations)}function Rk(n){return ja(n)&&!Co(n).u_()&&n.U_.length>0}function kk(n){Co(n).start()}async function rz(n){Co(n).C_()}async function iz(n){const e=Co(n);for(const t of n.U_)e.b_(t.mutations)}async function sz(n,e,t){const r=n.U_.shift(),i=Gv.from(r,e,t);await Ak(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Xp(n)}async function oz(n,e){e&&Co(n).S_&&await async function(r,i){if(function(l){return jB(l)&&l!==se.ABORTED}(i.code)){const o=r.U_.shift();Co(r).h_(),await Ak(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Xp(r)}}(n,e),Rk(n)&&kk(n)}async function a1(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),me(Va,"RemoteStore received new credentials");const r=ja(t);t.W_.add(3),await Oh(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Yp(t)}async function az(n,e){const t=Oe(n);e?(t.W_.delete(2),await Yp(t)):e||(t.W_.add(2),await Oh(t),t.j_.set("Unknown"))}function Ec(n){return n.J_||(n.J_=function(t,r,i){const o=Oe(t);return o.M_(),new $9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:X9.bind(null,n),No:J9.bind(null,n),Lo:Z9.bind(null,n),p_:ez.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),n0(n)?t0(n):n.j_.set("Unknown")):(await n.J_.stop(),Ck(n))})),n.J_}function Co(n){return n.Y_||(n.Y_=function(t,r,i){const o=Oe(t);return o.M_(),new G9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:rz.bind(null,n),Lo:oz.bind(null,n),D_:iz.bind(null,n),v_:sz.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Xp(n)):(await n.Y_.stop(),n.U_.length>0&&(me(Va,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,u=new r0(e,t,l,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i0(n,e){if(is("AsyncQueue",`${e}: ${n}`),vc(n))return new ge(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{static emptySet(e){return new Kl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Hu(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Kl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.Z_=new yt(Se.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ae():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class hc{constructor(e,t,r,i,o,l,u,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new hc(e,t,Kl.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class cz{constructor(){this.queries=c1(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=Oe(t),o=i.queries;i.queries=c1(),o.forEach((l,u)=>{for(const h of u.ta)h.onError(r)})})(this,new ge(se.ABORTED,"Firestore shutting down"))}}function c1(){return new Ha(n=>QR(n),qp)}async function Ik(n,e){const t=Oe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new lz,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(i,!0);break;case 1:o.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=i0(l,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&s0(t)}async function xk(n,e){const t=Oe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function uz(n,e){const t=Oe(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const u of l.ta)u.oa(i)&&(r=!0);l.ea=i}}r&&s0(t)}function hz(n,e,t){const r=Oe(n),i=r.queries.get(e);if(i)for(const o of i.ta)o.onError(t);r.queries.delete(e)}function s0(n){n.ia.forEach(e=>{e.next()})}var F_,u1;(u1=F_||(F_={}))._a="default",u1.Cache="cache";class Ok{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==F_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.key=e}}class Mk{constructor(e){this.key=e}}class fz{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Fe(),this.mutatedKeys=Fe(),this.ya=YR(e),this.wa=new Kl(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new l1,i=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,_)=>{const v=i.get(g),S=$p(this.query,_)?_:null,b=!!v&&this.mutatedKeys.has(v.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let A=!1;v&&S?v.data.isEqual(S.data)?b!==C&&(r.track({type:3,doc:S}),A=!0):this.va(v,S)||(r.track({type:2,doc:S}),A=!0,(h&&this.ya(S,h)>0||d&&this.ya(S,d)<0)&&(u=!0)):!v&&S?(r.track({type:0,doc:S}),A=!0):v&&!S&&(r.track({type:1,doc:v}),A=!0,(h||d)&&(u=!0)),A&&(S?(l=l.add(S),o=C?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:u,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,_)=>function(S,b){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return C(S)-C(b)}(g.type,_.type)||this.ya(g.doc,_.doc)),this.Ca(r),i=i!=null&&i;const u=t&&!i?this.Fa():[],h=this.pa.size===0&&this.current&&!i?1:0,d=h!==this.ga;return this.ga=h,l.length!==0||d?{snapshot:new hc(this.query,e.wa,o,l,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new l1,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Fe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Mk(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Dk(r))}),t}Oa(e){this.fa=e.gs,this.pa=Fe();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return hc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const o0="SyncEngine";class dz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pz{constructor(e){this.key=e,this.Ba=!1}}class mz{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Ha(u=>QR(u),qp),this.qa=new Map,this.Qa=new Set,this.$a=new yt(Se.comparator),this.Ua=new Map,this.Ka=new Qv,this.Wa={},this.Ga=new Map,this.za=uc.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function gz(n,e,t=!0){const r=Bk(n);let i;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await Nk(r,e,t,!0),i}async function yz(n,e){const t=Bk(n);await Nk(t,e,!0,!1)}async function Nk(n,e,t,r){const i=await L9(n.localStore,hi(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await _z(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&Tk(n.remoteStore,i),u}async function _z(n,e,t,r,i){n.Ha=(_,v,S)=>async function(C,A,O,z){let Q=A.view.ba(O);Q.ls&&(Q=await n1(C.localStore,A.query,!1).then(({documents:N})=>A.view.ba(N,Q)));const F=z&&z.targetChanges.get(A.targetId),W=z&&z.targetMismatches.get(A.targetId)!=null,X=A.view.applyChanges(Q,C.isPrimaryClient,F,W);return f1(C,A.targetId,X.Ma),X.snapshot}(n,_,v,S);const o=await n1(n.localStore,e,!0),l=new fz(e,o.gs),u=l.ba(o.documents),h=xh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=l.applyChanges(u,n.isPrimaryClient,h);f1(n,t,d.Ma);const g=new dz(e,t,l);return n.ka.set(e,g),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),d.snapshot}async function vz(n,e,t){const r=Oe(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(l=>!qp(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await H_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Zv(r.remoteStore,i.targetId),q_(r,i.targetId)}).catch(_c)):(q_(r,i.targetId),await H_(r.localStore,i.targetId,!0))}async function Ez(n,e){const t=Oe(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zv(t.remoteStore,r.targetId))}async function bz(n,e,t){const r=kz(n);try{const i=await function(l,u){const h=Oe(l),d=Ft.now(),g=u.reduce((S,b)=>S.add(b.key),Fe());let _,v;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>{let b=ss(),C=Fe();return h.ds.getEntries(S,g).next(A=>{b=A,b.forEach((O,z)=>{z.isValidDocument()||(C=C.add(O))})}).next(()=>h.localDocuments.getOverlayedDocuments(S,b)).next(A=>{_=A;const O=[];for(const z of u){const Q=LB(z,_.get(z.key).overlayedDocument);Q!=null&&O.push(new Do(z.key,Q,HR(Q.value.mapValue),zr.exists(!0)))}return h.mutationQueue.addMutationBatch(S,d,O,u)}).next(A=>{v=A;const O=A.applyToLocalDocumentSet(_,C);return h.documentOverlayCache.saveOverlays(S,A.batchId,O)})}).then(()=>({batchId:v.batchId,changes:JR(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,u,h){let d=l.Wa[l.currentUser.toKey()];d||(d=new yt(Ue)),d=d.insert(u,h),l.Wa[l.currentUser.toKey()]=d}(r,i.batchId,t),await Dh(r,i.changes),await Xp(r.remoteStore)}catch(i){const o=i0(i,"Failed to persist write");t.reject(o)}}async function Pk(n,e){const t=Oe(n);try{const r=await N9(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Ua.get(o);l&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Ba=!0:i.modifiedDocuments.size>0?et(l.Ba):i.removedDocuments.size>0&&(et(l.Ba),l.Ba=!1))}),await Dh(t,r,e)}catch(r){await _c(r)}}function h1(n,e,t){const r=Oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&i.push(u.snapshot)}),function(l,u){const h=Oe(l);h.onlineState=u;let d=!1;h.queries.forEach((g,_)=>{for(const v of _.ta)v.sa(u)&&(d=!0)}),d&&s0(h)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Sz(n,e,t){const r=Oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ua.get(e),o=i&&i.key;if(o){let l=new yt(Se.comparator);l=l.insert(o,Sn.newNoDocument(o,ke.min()));const u=Fe().add(o),h=new Wp(ke.min(),new Map,new yt(Ue),l,u);await Pk(r,h),r.$a=r.$a.remove(o),r.Ua.delete(e),a0(r)}else await H_(r.localStore,e,!1).then(()=>q_(r,e,t)).catch(_c)}async function Tz(n,e){const t=Oe(n),r=e.batch.batchId;try{const i=await M9(t.localStore,e);Lk(t,r,null),Vk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Dh(t,i)}catch(i){await _c(i)}}async function wz(n,e,t){const r=Oe(n);try{const i=await function(l,u){const h=Oe(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return h.mutationQueue.lookupMutationBatch(d,u).next(_=>(et(_!==null),g=_.keys(),h.mutationQueue.removeMutationBatch(d,_))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>h.localDocuments.getDocuments(d,g))})}(r.localStore,e);Lk(r,e,t),Vk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Dh(r,i)}catch(i){await _c(i)}}function Vk(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function Lk(n,e,t){const r=Oe(n);let i=r.Wa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function q_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||Uk(n,r)})}function Uk(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Zv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),a0(n))}function f1(n,e,t){for(const r of t)r instanceof Dk?(n.Ka.addReference(r.key,e),Cz(n,r)):r instanceof Mk?(me(o0,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||Uk(n,r.key)):Ae()}function Cz(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(me(o0,"New document in limbo: "+t),n.Qa.add(r),a0(n))}function a0(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Se(ut.fromString(e)),r=n.za.next();n.Ua.set(r,new pz(t)),n.$a=n.$a.insert(t,r),Tk(n.remoteStore,new so(hi(Fv(t.path)),r,"TargetPurposeLimboResolution",Hp.ae))}}async function Dh(n,e,t){const r=Oe(n),i=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,h)=>{l.push(r.Ha(h,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){const _=d?!d.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(d){i.push(d);const _=Xv.Yi(h.targetId,d);o.push(_)}}))}),await Promise.all(l),r.La.p_(i),await async function(h,d){const g=Oe(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ie.forEach(d,v=>ie.forEach(v.Hi,S=>g.persistence.referenceDelegate.addReference(_,v.targetId,S)).next(()=>ie.forEach(v.Ji,S=>g.persistence.referenceDelegate.removeReference(_,v.targetId,S)))))}catch(_){if(!vc(_))throw _;me(Jv,"Failed to update sequence numbers: "+_)}for(const _ of d){const v=_.targetId;if(!_.fromCache){const S=g.Ts.get(v),b=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(b);g.Ts=g.Ts.insert(v,C)}}}(r.localStore,o))}async function Az(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){me(o0,"User change. New user:",e.toKey());const r=await vk(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(h=>{h.reject(new ge(se.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dh(t,r.Rs)}}function Rz(n,e){const t=Oe(n),r=t.Ua.get(e);if(r&&r.Ba)return Fe().add(r.key);{let i=Fe();const o=t.qa.get(e);if(!o)return i;for(const l of o){const u=t.ka.get(l);i=i.unionWith(u.view.Sa)}return i}}function Bk(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sz.bind(null,e),e.La.p_=uz.bind(null,e.eventManager),e.La.Ja=hz.bind(null,e.eventManager),e}function kz(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wz.bind(null,e),e}class fp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qp(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return D9(this.persistence,new I9,e.initialUser,this.serializer)}Xa(e){return new _k(Yv.ri,this.serializer)}Za(e){return new B9}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fp.provider={build:()=>new fp};class Iz extends fp{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){et(this.persistence.referenceDelegate instanceof up);const r=this.persistence.referenceDelegate.garbageCollector;return new p9(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new _k(r=>up.ri(r,t),this.serializer)}}class $_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Az.bind(null,this.syncEngine),await az(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cz}()}createDatastore(e){const t=Qp(e.databaseInfo.databaseId),r=function(o){return new q9(o)}(e.databaseInfo);return function(o,l,u,h){return new W9(o,l,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,u){return new Y9(r,i,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>h1(this.syncEngine,t,0),function(){return s1.D()?new s1:new z9}())}createSyncEngine(e,t){return function(i,o,l,u,h,d,g){const _=new mz(i,o,l,u,h,d);return g&&(_.ja=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Oe(i);me(Va,"RemoteStore shutting down."),o.W_.add(5),await Oh(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}$_.provider={build:()=>new $_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="FirestoreClient";class xz{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=OR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{me(Ao,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(me(Ao,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=i0(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jy(n,e){n.asyncQueue.verifyOperationInProgress(),me(Ao,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function d1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Oz(n);me(Ao,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>a1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>a1(e.remoteStore,i)),n._onlineComponents=e}async function Oz(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Ao,"Using user provided OfflineComponentProvider");try{await jy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===se.FAILED_PRECONDITION||i.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;oc("Error using user provided cache. Falling back to memory cache: "+t),await jy(n,new fp)}}else me(Ao,"Using default OfflineComponentProvider"),await jy(n,new Iz(void 0));return n._offlineComponents}async function Hk(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Ao,"Using user provided OnlineComponentProvider"),await d1(n,n._uninitializedComponentsProvider._online)):(me(Ao,"Using default OnlineComponentProvider"),await d1(n,new $_))),n._onlineComponents}function Dz(n){return Hk(n).then(e=>e.syncEngine)}async function jk(n){const e=await Hk(n),t=e.eventManager;return t.onListen=gz.bind(null,e.syncEngine),t.onUnlisten=vz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ez.bind(null,e.syncEngine),t}function Mz(n,e,t={}){const r=new ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,h,d){const g=new zk({next:v=>{g.su(),l.enqueueAndForget(()=>xk(o,_));const S=v.docs.has(u);!S&&v.fromCache?d.reject(new ge(se.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&v.fromCache&&h&&h.source==="server"?d.reject(new ge(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),_=new Ok(Fv(u.path),g,{includeMetadataChanges:!0,Ta:!0});return Ik(o,_)}(await jk(n),n.asyncQueue,e,t,r)),r.promise}function Nz(n,e,t={}){const r=new ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,h,d){const g=new zk({next:v=>{g.su(),l.enqueueAndForget(()=>xk(o,_)),v.fromCache&&h.source==="server"?d.reject(new ge(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),_=new Ok(u,g,{includeMetadataChanges:!0,Ta:!0});return Ik(o,_)}(await jk(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(n,e,t){if(!t)throw new ge(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Pz(n,e,t,r){if(e===!0&&r===!0)throw new ge(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function m1(n){if(!Se.isDocumentKey(n))throw new ge(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g1(n){if(Se.isDocumentKey(n))throw new ge(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function as(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jp(n);throw new ge(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="firestore.googleapis.com",y1=!0;class _1{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$k,this.ssl=y1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:y1;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<f9)throw new ge(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FU;switch(r.type){case"firstParty":return new KU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=p1.get(t);r&&(me("ComponentProvider","Removing Datastore"),p1.delete(t),r.terminate())}(this),Promise.resolve()}}function Vz(n,e,t,r={}){var i;const o=(n=as(n,Zp))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o.host!==$k&&o.host!==u&&oc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:r});if(!Na(h,l)&&(n._setSettings(h),r.mockUserToken)){let d,g;if(typeof r.mockUserToken=="string")d=r.mockUserToken,g=En.MOCK_USER;else{d=m4(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ge(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new En(_)}n._authCredentials=new qU(new IR(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bc(this.firestore,e,this._query)}}class Gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class go extends bc{constructor(e,t,r){super(e,t,Fv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Se(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function qr(n,e,...t){if(n=Cn(n),qk("collection","path",e),n instanceof Zp){const r=ut.fromString(e,...t);return g1(r),new go(n,null,r)}{if(!(n instanceof Gn||n instanceof go))throw new ge(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return g1(r),new go(n.firestore,null,r)}}function em(n,e,...t){if(n=Cn(n),arguments.length===1&&(e=OR.newId()),qk("doc","path",e),n instanceof Zp){const r=ut.fromString(e,...t);return m1(r),new Gn(n,null,new Se(r))}{if(!(n instanceof Gn||n instanceof go))throw new ge(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return m1(r),new Gn(n.firestore,n instanceof go?n.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="AsyncQueue";class E1{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new bk(this,"async_queue_retry"),this.Su=()=>{const r=Hy();r&&me(v1,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Hy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Hy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new ts;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!vc(e))throw e;me(v1,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw is("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=r0.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&Ae()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Sc extends Zp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new E1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E1(e),this._firestoreClient=void 0,await e}}}function Lz(n,e){const t=typeof n=="object"?n:ER(),r=typeof n=="string"?n:rp,i=Vv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=d4("firestore");o&&Vz(i,...o)}return i}function l0(n){if(n._terminated)throw new ge(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Uz(n),n._firestoreClient}function Uz(n){var e,t,r;const i=n._freezeSettings(),o=function(u,h,d,g){return new lB(u,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Fk(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new xz(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fc(pn.fromBase64String(e))}catch(t){throw new ge(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fc(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=/^__.*__$/;class zz{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ih(e,this.data,t,this.fieldTransforms)}}class Gk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Do(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class f0{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new f0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return dp(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Kk(this.Lu)&&Bz.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Hz{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qp(e)}ju(e,t,r,i=!1){return new f0({Lu:e,methodName:t,zu:r,path:dn.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function d0(n){const e=n._freezeSettings(),t=Qp(n._databaseId);return new Hz(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jz(n,e,t,r,i,o={}){const l=n.ju(o.merge||o.mergeFields?2:0,e,t,i);p0("Data must be an object, but it was:",l,r);const u=Wk(r,l);let h,d;if(o.merge)h=new sr(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const _ of o.mergeFields){const v=G_(e,_,t);if(!l.contains(v))throw new ge(se.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Yk(g,v)||g.push(v)}h=new sr(g),d=l.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,d=l.fieldTransforms;return new zz(new qn(u),h,d)}class nm extends c0{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nm}}function Fz(n,e,t,r){const i=n.ju(1,e,t);p0("Data must be an object, but it was:",i,r);const o=[],l=qn.empty();Oo(r,(h,d)=>{const g=m0(e,h,t);d=Cn(d);const _=i.Uu(g);if(d instanceof nm)o.push(g);else{const v=Mh(d,_);v!=null&&(o.push(g),l.set(g,v))}});const u=new sr(o);return new Gk(l,u,i.fieldTransforms)}function qz(n,e,t,r,i,o){const l=n.ju(1,e,t),u=[G_(e,r,t)],h=[i];if(o.length%2!=0)throw new ge(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(G_(e,o[v])),h.push(o[v+1]);const d=[],g=qn.empty();for(let v=u.length-1;v>=0;--v)if(!Yk(d,u[v])){const S=u[v];let b=h[v];b=Cn(b);const C=l.Uu(S);if(b instanceof nm)d.push(S);else{const A=Mh(b,C);A!=null&&(d.push(S),g.set(S,A))}}const _=new sr(d);return new Gk(g,_,l.fieldTransforms)}function $z(n,e,t,r=!1){return Mh(t,n.ju(r?4:3,e))}function Mh(n,e){if(Qk(n=Cn(n)))return p0("Unsupported field value:",e,n),Wk(n,e);if(n instanceof c0)return function(r,i){if(!Kk(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const u of r){let h=Mh(u,i.Ku(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ft.fromDate(r);return{timestampValue:cp(i.serializer,o)}}if(r instanceof Ft){const o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cp(i.serializer,o)}}if(r instanceof u0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fc)return{bytesValue:uk(i.serializer,r._byteString)};if(r instanceof Gn){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof h0)return function(l,u){return{mapValue:{fields:{[BR]:{stringValue:zR},[ip]:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw u.Wu("VectorValues must only contain numeric values.");return qv(u.serializer,d)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Jp(r)}`)}(n,e)}function Wk(n,e){const t={};return MR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(n,(r,i)=>{const o=Mh(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Qk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof u0||n instanceof fc||n instanceof Gn||n instanceof c0||n instanceof h0)}function p0(n,e,t){if(!Qk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Jp(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function G_(n,e,t){if((e=Cn(e))instanceof tm)return e._internalPath;if(typeof e=="string")return m0(n,e);throw dp("Field path arguments must be of type string or ",n,!1,void 0,t)}const Gz=new RegExp("[~\\*/\\[\\]]");function m0(n,e,t){if(e.search(Gz)>=0)throw dp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tm(...e.split("."))._internalPath}catch{throw dp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dp(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new ge(se.INVALID_ARGUMENT,u+n+h)}function Yk(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(g0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Kz extends Xk{data(){return super.data()}}function g0(n,e){return typeof e=="string"?m0(n,e):e instanceof tm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class y0{}class Qz extends y0{}function Fa(n,e,...t){let r=[];e instanceof y0&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof _0).length,u=o.filter(h=>h instanceof rm).length;if(l>1||l>0&&u>0)throw new ge(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class rm extends Qz{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rm(e,t,r)}_apply(e){const t=this._parse(e);return Jk(e._query,t),new bc(e.firestore,e.converter,P_(e._query,t))}_parse(e){const t=d0(e.firestore);return function(o,l,u,h,d,g,_){let v;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ge(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){S1(_,g);const b=[];for(const C of _)b.push(b1(h,o,C));v={arrayValue:{values:b}}}else v=b1(h,o,_)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||S1(_,g),v=$z(u,l,_,g==="in"||g==="not-in");return Mt.create(d,g,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function qa(n,e,t){const r=e,i=g0("where",n);return rm._create(i,r,t)}class _0 extends y0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _0(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const u=o.getFlattenedFilters();for(const h of u)Jk(l,h),l=P_(l,h)}(e._query,t),new bc(e.firestore,e.converter,P_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function b1(n,e,t){if(typeof(t=Cn(t))=="string"){if(t==="")throw new ge(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WR(e)&&t.indexOf("/")!==-1)throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!Se.isDocumentKey(r))throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lw(n,new Se(r))}if(t instanceof Gn)return Lw(n,t._key);throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jp(t)}.`)}function S1(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jk(n,e){const t=function(i,o){for(const l of i)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ge(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Yz{convertValue(e,t="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(To(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Oo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ip].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>At(l.doubleValue));return new h0(o)}convertGeoPoint(e){return new u0(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Fp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fh(e));default:return null}}convertTimestamp(e){const t=So(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);et(gk(r));const i=new dh(r.get(1),r.get(3)),o=new Se(r.popFirst(5));return i.isEqual(t)||is(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zk extends Xk{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(g0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Md extends Zk{data(e={}){return super.data(e)}}class Jz{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Md(this._firestore,this._userDataWriter,r.key,r,new Fu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(u=>{const h=new Md(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Fu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Md(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Fu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return u.type!==0&&(d=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:Zz(u.type),doc:h,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Zz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(n){n=as(n,Gn);const e=as(n.firestore,Sc);return Mz(l0(e),n._key).then(t=>n3(e,n,t))}class tI extends Yz{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function Ro(n){n=as(n,bc);const e=as(n.firestore,Sc),t=l0(e),r=new tI(e);return Wz(n._query),Nz(t,n._query).then(i=>new Jz(e,r,n,i))}function e3(n,e,t,...r){n=as(n,Gn);const i=as(n.firestore,Sc),o=d0(i);let l;return l=typeof(e=Cn(e))=="string"||e instanceof tm?qz(o,"updateDoc",n._key,e,t,r):Fz(o,"updateDoc",n._key,e),E0(i,[l.toMutation(n._key,zr.exists(!0))])}function t3(n){return E0(as(n.firestore,Sc),[new $v(n._key,zr.none())])}function v0(n,e){const t=as(n.firestore,Sc),r=em(n),i=Xz(n.converter,e);return E0(t,[jz(d0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,zr.exists(!1))]).then(()=>r)}function E0(n,e){return function(r,i){const o=new ts;return r.asyncQueue.enqueueAndForget(async()=>bz(await Dz(r),i,o)),o.promise}(l0(n),e)}function n3(n,e,t){const r=t.docs.get(e._key),i=new tI(n);return new Zk(n,i,e._key,r,new Fu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){yc=i})(gc),sc(new Pa("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new Sc(new $U(r.getProvider("auth-internal")),new WU(l,r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ge(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dh(d.options.projectId,g)}(l,i),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),po(Cw,Aw,e),po(Cw,Aw,"esm2017")})();function b0(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function nI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r3=nI,rI=new Ah("auth","Firebase",nI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new Nv("@firebase/auth");function i3(n,...e){pp.logLevel<=je.WARN&&pp.warn(`Auth (${gc}): ${n}`,...e)}function Nd(n,...e){pp.logLevel<=je.ERROR&&pp.error(`Auth (${gc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(n,...e){throw T0(n,...e)}function Hr(n,...e){return T0(n,...e)}function S0(n,e,t){const r=Object.assign(Object.assign({},r3()),{[e]:t});return new Ah("auth","Firebase",r).create(e,{appName:n.name})}function ns(n){return S0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s3(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ir(n,"argument-error"),S0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function T0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return rI.create(n,...e)}function Ce(n,e,...t){if(!n)throw T0(e,...t)}function Yi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Nd(e),new Error(e)}function ls(n,e){n||Yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function o3(){return T1()==="http:"||T1()==="https:"}function T1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o3()||v4()||"connection"in navigator)?navigator.onLine:!0}function l3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=g4()||E4()}get(){return a3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(n,e){ls(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],h3=new Nh(3e4,6e4);function Mo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function No(n,e,t,r,i={}){return sI(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Rh(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:h},o);return _4()||(d.referrerPolicy="no-referrer"),iI.fetch()(await oI(n,n.config.apiHost,t,u),d)})}async function sI(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},c3),e);try{const i=new d3(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw vd(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw vd(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw vd(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw S0(n,g,d);Ir(n,g)}}catch(i){if(i instanceof us)throw i;Ir(n,"network-request-failed",{message:String(i)})}}async function Ph(n,e,t,r,i={}){const o=await No(n,e,t,r,i);return"mfaPendingCredential"in o&&Ir(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function oI(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?w0(n.config,i):`${n.config.apiScheme}://${i}`;return u3.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function f3(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Hr(this.auth,"network-request-failed")),h3.get())})}}function vd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Hr(n,e,r);return i.customData._tokenResponse=t,i}function w1(n){return n!==void 0&&n.enterprise!==void 0}class p3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return f3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function m3(n,e){return No(n,"GET","/v2/recaptchaConfig",Mo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(n,e){return No(n,"POST","/v1/accounts:delete",e)}async function mp(n,e){return No(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y3(n,e=!1){const t=Cn(n),r=await t.getIdToken(e),i=C0(r);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Xu(Fy(i.auth_time)),issuedAtTime:Xu(Fy(i.iat)),expirationTime:Xu(Fy(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Fy(n){return Number(n)*1e3}function C0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const i=dR(t);return i?JSON.parse(i):(Nd("Failed to decode base64 JWT payload"),null)}catch(i){return Nd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function C1(n){const e=C0(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof us&&_3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(n){var e;const t=n.auth,r=await n.getIdToken(),i=await yh(n,mp(t,{idToken:r}));Ce(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?aI(o.providerUserInfo):[],u=b3(n.providerData,l),h=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),g=h?d:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new W_(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function E3(n){const e=Cn(n);await gp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function b3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aI(n){return n.map(e=>{var{providerId:t}=e,r=b0(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S3(n,e){const t=await sI(n,{},async()=>{const r=Rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await oI(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",iI.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T3(n,e){return No(n,"POST","/v2/accounts:revokeToken",Mo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=C1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await S3(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new Wl;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ce(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Br{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=b0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new W_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await yh(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return y3(this,e)}reload(){return E3(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await gp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await yh(this,g3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,u,h,d,g;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,b=(l=t.photoURL)!==null&&l!==void 0?l:void 0,C=(u=t.tenantId)!==null&&u!==void 0?u:void 0,A=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,O=(d=t.createdAt)!==null&&d!==void 0?d:void 0,z=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:Q,emailVerified:F,isAnonymous:W,providerData:X,stsTokenManager:N}=t;Ce(Q&&N,e,"internal-error");const x=Wl.fromJSON(this.name,N);Ce(typeof Q=="string",e,"internal-error"),Ws(_,e.name),Ws(v,e.name),Ce(typeof F=="boolean",e,"internal-error"),Ce(typeof W=="boolean",e,"internal-error"),Ws(S,e.name),Ws(b,e.name),Ws(C,e.name),Ws(A,e.name),Ws(O,e.name),Ws(z,e.name);const k=new Br({uid:Q,auth:e,email:v,emailVerified:F,displayName:_,isAnonymous:W,photoURL:b,phoneNumber:S,tenantId:C,stsTokenManager:x,createdAt:O,lastLoginAt:z});return X&&Array.isArray(X)&&(k.providerData=X.map(D=>Object.assign({},D))),A&&(k._redirectEventId=A),k}static async _fromIdTokenResponse(e,t,r=!1){const i=new Wl;i.updateFromServerResponse(t);const o=new Br({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await gp(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ce(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?aI(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Wl;u.updateFromIdToken(r);const h=new Br({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new W_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new Map;function Xi(n){ls(n instanceof Function,"Expected a class definition");let e=A1.get(n);return e?(ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,A1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lI.type="NONE";const R1=lI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ql{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Pd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Pd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mp(this.auth,{idToken:e}).catch(()=>{});return t?Br._fromGetAccountInfoResponse(this.auth,t,e):null}return Br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ql(Xi(R1),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||Xi(R1);const l=Pd(r,e.config.apiKey,e.name);let u=null;for(const d of t)try{const g=await d._get(l);if(g){let _;if(typeof g=="string"){const v=await mp(e,{idToken:g}).catch(()=>{});if(!v)break;_=await Br._fromGetAccountInfoResponse(e,v,g)}else _=Br._fromJSON(e,g);d!==o&&(u=_),o=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ql(o,e,r):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new Ql(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pI(e))return"Blackberry";if(mI(e))return"Webos";if(uI(e))return"Safari";if((e.includes("chrome/")||hI(e))&&!e.includes("edge/"))return"Chrome";if(dI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cI(n=wn()){return/firefox\//i.test(n)}function uI(n=wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hI(n=wn()){return/crios\//i.test(n)}function fI(n=wn()){return/iemobile/i.test(n)}function dI(n=wn()){return/android/i.test(n)}function pI(n=wn()){return/blackberry/i.test(n)}function mI(n=wn()){return/webos/i.test(n)}function A0(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function w3(n=wn()){var e;return A0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C3(){return b4()&&document.documentMode===10}function gI(n=wn()){return A0(n)||dI(n)||mI(n)||pI(n)||/windows phone/i.test(n)||fI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(n,e=[]){let t;switch(n){case"Browser":t=k1(wn());break;case"Worker":t=`${k1(wn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R3(n,e={}){return No(n,"GET","/v2/passwordPolicy",Mo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=6;class I3{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:k3,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I1(this),this.idTokenSubscription=new I1(this),this.beforeStateQueue=new A3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xi(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mp(this,{idToken:e}),r=await Br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(rr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gp(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=l3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(ns(this));const t=e?Cn(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await R3(this),t=new I3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ah("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await T3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xi(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[Xi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&i3(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Po(n){return Cn(n)}class I1{constructor(e){this.auth=e,this.observer=null,this.addObserver=I4(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O3(n){im=n}function _I(n){return im.loadJS(n)}function D3(){return im.recaptchaEnterpriseScript}function M3(){return im.gapiScript}function N3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class P3{constructor(){this.enterprise=new V3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class V3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const L3="recaptcha-enterprise",vI="NO_RECAPTCHA";class U3{constructor(e){this.type=L3,this.auth=Po(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{m3(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new p3(h);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(h=>{u(h)})})}function i(o,l,u){const h=window.grecaptcha;w1(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(d=>{l(d)}).catch(()=>{l(vI)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P3().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&w1(window.grecaptcha))i(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=D3();h.length!==0&&(h+=u),_I(h).then(()=>{i(u,o,l)}).catch(d=>{l(d)})}}).catch(u=>{l(u)})})}}async function x1(n,e,t,r=!1,i=!1){const o=new U3(n);let l;if(i)l=vI;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Q_(n,e,t,r,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await x1(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await x1(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(n,e){const t=Vv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Na(o,e??{}))return i;Ir(i,"already-initialized")}return t.initialize({options:e})}function z3(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Xi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function H3(n,e,t){const r=Po(n);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=EI(e),{host:l,port:u}=j3(e),h=u===null?"":`:${u}`,d={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Na(d,r.config.emulator)&&Na(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,F3()}function EI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j3(n){const e=EI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:O1(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:O1(l)}}}function O1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function F3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yi("not implemented")}_getIdTokenResponse(e){return Yi("not implemented")}_linkToIdToken(e,t){return Yi("not implemented")}_getReauthenticationResolver(e){return Yi("not implemented")}}async function q3(n,e){return No(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(n,e){return Ph(n,"POST","/v1/accounts:signInWithPassword",Mo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(n,e){return Ph(n,"POST","/v1/accounts:signInWithEmailLink",Mo(n,e))}async function K3(n,e){return Ph(n,"POST","/v1/accounts:signInWithEmailLink",Mo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends R0{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new _h(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new _h(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Q_(e,t,"signInWithPassword",$3);case"emailLink":return G3(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Q_(e,r,"signUpPassword",q3);case"emailLink":return K3(e,{idToken:t,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(n,e){return Ph(n,"POST","/v1/accounts:signInWithIdp",Mo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="http://localhost";class La extends R0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new La(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=b0(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new La(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Yl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Yl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yl(e,t)}buildRequest(){const e={requestUri:W3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y3(n){const e=Uu(Bu(n)).link,t=e?Uu(Bu(e)).deep_link_id:null,r=Uu(Bu(n)).deep_link_id;return(r?Uu(Bu(r)).link:null)||r||t||e||n}class k0{constructor(e){var t,r,i,o,l,u;const h=Uu(Bu(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,_=Q3((i=h.mode)!==null&&i!==void 0?i:null);Ce(d&&g&&_,"argument-error"),this.apiKey=d,this.operation=_,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=Y3(e);try{return new k0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this.providerId=Tc.PROVIDER_ID}static credential(e,t){return _h._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=k0.parseLink(t);return Ce(r,"argument-error"),_h._fromEmailAndCode(e,r.code,r.tenantId)}}Tc.PROVIDER_ID="password";Tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends I0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Vh{constructor(){super("facebook.com")}static credential(e){return La._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Vh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return La._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Vr.credential(t,r)}catch{return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com";Vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Vh{constructor(){super("github.com")}static credential(e){return La._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.GITHUB_SIGN_IN_METHOD="github.com";eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Vh{constructor(){super("twitter.com")}static credential(e,t){return La._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return to.credential(t,r)}catch{return null}}}to.TWITTER_SIGN_IN_METHOD="twitter.com";to.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(n,e){return Ph(n,"POST","/v1/accounts:signUp",Mo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Br._fromIdTokenResponse(e,r,i),l=D1(r);return new Ua({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=D1(r);return new Ua({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function D1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends us{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,yp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new yp(e,t,r,i)}}function bI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?yp._fromErrorAndOperation(n,o,e,r):o})}async function J3(n,e,t=!1){const r=await yh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ua._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(n,e,t=!1){const{auth:r}=n;if(rr(r.app))return Promise.reject(ns(r));const i="reauthenticate";try{const o=await yh(n,bI(r,i,e,n),t);Ce(o.idToken,r,"internal-error");const l=C0(o.idToken);Ce(l,r,"internal-error");const{sub:u}=l;return Ce(n.uid===u,r,"user-mismatch"),Ua._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ir(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(n,e,t=!1){if(rr(n.app))return Promise.reject(ns(n));const r="signIn",i=await bI(n,r,e),o=await Ua._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function e5(n,e){return SI(Po(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(n){const e=Po(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function t5(n,e,t){if(rr(n.app))return Promise.reject(ns(n));const r=Po(n),l=await Q_(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",X3).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&TI(n),h}),u=await Ua._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function n5(n,e,t){return rr(n.app)?Promise.reject(ns(n)):e5(Cn(n),Tc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TI(n),r})}function r5(n,e,t,r){return Cn(n).onIdTokenChanged(e,t,r)}function i5(n,e,t){return Cn(n).beforeAuthStateChanged(e,t)}const _p="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_p,"1"),this.storage.removeItem(_p),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=1e3,o5=10;class CI extends wI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);C3()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,o5):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},s5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}CI.type="LOCAL";const a5=CI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI extends wI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}AI.type="SESSION";const RI=AI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new sm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async d=>d(t.origin,o)),h=await l5(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,h)=>{const d=x0("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(_){const v=_;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function u5(n){di().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function h5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function d5(){return kI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firebaseLocalStorageDb",p5=1,vp="firebaseLocalStorage",xI="fbase_key";class Lh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function om(n,e){return n.transaction([vp],e?"readwrite":"readonly").objectStore(vp)}function m5(){const n=indexedDB.deleteDatabase(II);return new Lh(n).toPromise()}function Y_(){const n=indexedDB.open(II,p5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vp,{keyPath:xI})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vp)?e(r):(r.close(),await m5(),e(await Y_()))})})}async function M1(n,e,t){const r=om(n,!0).put({[xI]:e,value:t});return new Lh(r).toPromise()}async function g5(n,e){const t=om(n,!1).get(e),r=await new Lh(t).toPromise();return r===void 0?null:r.value}function N1(n,e){const t=om(n,!0).delete(e);return new Lh(t).toPromise()}const y5=800,_5=3;class OI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>_5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sm._getInstance(d5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await h5(),!this.activeServiceWorker)return;this.sender=new c5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y_();return await M1(e,_p,"1"),await N1(e,_p),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>M1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>g5(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>N1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=om(i,!1).getAll();return new Lh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OI.type="LOCAL";const v5=OI;new Nh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(n,e){return e?Xi(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends R0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function E5(n){return SI(n.auth,new O0(n),n.bypassAuthState)}function b5(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Z3(t,new O0(n),n.bypassAuthState)}async function S5(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),J3(t,new O0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E5;case"linkViaPopup":case"linkViaRedirect":return S5;case"reauthViaPopup":case"reauthViaRedirect":return b5;default:Ir(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new Nh(2e3,1e4);async function w5(n,e,t){if(rr(n.app))return Promise.reject(Hr(n,"operation-not-supported-in-this-environment"));const r=Po(n);s3(n,e,I0);const i=DI(r,t);return new Sa(r,"signInViaPopup",e,i).executeNotNull()}class Sa extends MI{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Sa.currentPopupAction&&Sa.currentPopupAction.cancel(),Sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=x0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T5.get())};e()}}Sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="pendingRedirect",Vd=new Map;class A5 extends MI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Vd.get(this.auth._key());if(!e){try{const r=await R5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Vd.set(this.auth._key(),e)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R5(n,e){const t=x5(e),r=I5(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function k5(n,e){Vd.set(n._key(),e)}function I5(n){return Xi(n._redirectPersistence)}function x5(n){return Pd(C5,n.config.apiKey,n.name)}async function O5(n,e,t=!1){if(rr(n.app))return Promise.reject(ns(n));const r=Po(n),i=DI(r,e),l=await new A5(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=10*60*1e3;class M5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!NI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Hr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D5&&this.cachedEventUids.clear(),this.cachedEventUids.has(P1(e))}saveEventToCache(e){this.cachedEventUids.add(P1(e)),this.lastProcessedEventTime=Date.now()}}function P1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function NI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(n,e={}){return No(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L5=/^https?/;async function U5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await P5(n);for(const t of e)try{if(B5(t))return}catch{}Ir(n,"unauthorized-domain")}function B5(n){const e=K_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!L5.test(t))return!1;if(V5.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=new Nh(3e4,6e4);function V1(){const n=di().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function H5(n){return new Promise((e,t)=>{var r,i,o;function l(){V1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V1(),t(Hr(n,"network-request-failed"))},timeout:z5.get()})}if(!((i=(r=di().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=di().gapi)===null||o===void 0)&&o.load)l();else{const u=N3("iframefcb");return di()[u]=()=>{gapi.load?l():t(Hr(n,"network-request-failed"))},_I(`${M3()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function j5(n){return Ld=Ld||H5(n),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=new Nh(5e3,15e3),q5="__/auth/iframe",$5="emulator/auth/iframe",G5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W5(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?w0(e,$5):`https://${n.config.authDomain}/${q5}`,r={apiKey:e.apiKey,appName:n.name,v:gc},i=K5.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Rh(r).slice(1)}`}async function Q5(n){const e=await j5(n),t=di().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:W5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G5,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Hr(n,"network-request-failed"),u=di().setTimeout(()=>{o(l)},F5.get());function h(){di().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X5=500,J5=600,Z5="_blank",e6="http://localhost";class L1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t6(n,e,t,r=X5,i=J5){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},Y5),{width:r.toString(),height:i.toString(),top:o,left:l}),d=wn().toLowerCase();t&&(u=hI(d)?Z5:t),cI(d)&&(e=e||e6,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[S,b])=>`${v}${S}=${b},`,"");if(w3(d)&&u!=="_self")return n6(e||"",u),new L1(null);const _=window.open(e||"",u,g);Ce(_,n,"popup-blocked");try{_.focus()}catch{}return new L1(_)}function n6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="__/auth/handler",i6="emulator/auth/handler",s6=encodeURIComponent("fac");async function U1(n,e,t,r,i,o){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:gc,eventId:i};if(e instanceof I0){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",k4(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,_]of Object.entries({}))l[g]=_}if(e instanceof Vh){const g=e.getScopes().filter(_=>_!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),d=h?`#${s6}=${encodeURIComponent(h)}`:"";return`${o6(n)}?${Rh(u).slice(1)}${d}`}function o6({config:n}){return n.emulator?w0(n,i6):`https://${n.authDomain}/${r6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="webStorageSupport";class a6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RI,this._completeRedirectFn=O5,this._overrideRedirectResult=k5}async _openPopup(e,t,r,i){var o;ls((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await U1(e,t,r,K_(),i);return t6(e,l,x0())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await U1(e,t,r,K_(),i);return u5(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ls(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Q5(e),r=new M5(e);return t.register("authEvent",i=>(Ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qy,{type:qy},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[qy];l!==void 0&&t(!!l),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=U5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gI()||uI()||A0()}}const l6=a6;var B1="@firebase/auth",z1="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h6(n){sc(new Pa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Ce(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yI(n)},d=new x3(r,i,o,h);return z3(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),sc(new Pa("auth-internal",e=>{const t=Po(e.getProvider("auth").getImmediate());return(r=>new c6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),po(B1,z1,u6(n)),po(B1,z1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=5*60,d6=gR("authIdTokenMaxAge")||f6;let H1=null;const p6=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>d6)return;const i=t==null?void 0:t.token;H1!==i&&(H1=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function m6(n=ER()){const e=Vv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=B3(n,{popupRedirectResolver:l6,persistence:[v5,a5,RI]}),r=gR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=p6(o.toString());i5(t,l,()=>l(t.currentUser)),r5(t,u=>l(u))}}const i=pR("auth");return i&&H3(t,`http://${i}`),t}function g6(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}O3({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Hr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",g6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h6("Browser");const y6={apiKey:"AIzaSyBvowqkUUz1AUpeFfOk2pL3nFxbN-26Qwg",authDomain:"notes-app-90e9d.firebaseapp.com",projectId:"notes-app-90e9d",storageBucket:"notes-app-90e9d.firebasestorage.app",messagingSenderId:"252108934014",appId:"1:252108934014:web:d3ffdc34c70907e23ac12f",measurementId:"G-GE3JLPZD6W"},PI=vR(y6),Kn=Lz(PI),D0=m6(PI),_6=new Vr;jU("debug");const VI=async n=>{try{const e=Fa(qr(Kn,"users"),qa("email","==",n)),t=await Ro(e);if(t.docs.length>0)return console.log("User already exists"),t.docs[0].id;const r=await v0(qr(Kn,"users"),{email:n});return console.log("Document written with ID: ",r.id),r.id}catch(e){return console.error("Error adding document: ",e),null}},X_=async n=>{if(!n.id)return j1(n);try{const e=Fa(qr(Kn,"users"),qa("email","==",n.owner)),t=await Ro(e);if(t.empty)return console.error("User not found"),null;const r=t.docs[0].id,i=em(Kn,"users",r,"documents",n.id),o=await eI(i);if(o.exists()){const l=o.data(),u=l.history||[],h=new Date,d={day:h.getDate(),month:h.getMonth()+1,year:h.getFullYear()},g=l.content===n.content?[...u]:[...u,{date:d,content:n.content}];return await e3(i,{title:n.title,content:n.content,history:g,sharedWith:n.sharedWith||[]}),n.id}else return j1(n)}catch(e){return console.error("Error saving document: ",e),null}},j1=async n=>{try{if(!n.owner)return console.error("Cannot add document without an owner"),null;const e=Fa(qr(Kn,"users"),qa("email","==",n.owner)),t=await Ro(e);if(t.empty)return console.error("User not found"),null;const r=t.docs[0].id,i=await v0(qr(Kn,"users",r,"documents"),{owner:n.owner,title:n.title,content:n.content,history:n.history||[],sharedWith:n.sharedWith||[]});return console.log("Document written with ID: ",i.id),i.id}catch(e){return console.error("Error adding document: ",e),null}},v6=async(n,e)=>{try{if(!n.owner)return console.error("Cannot share document without an owner"),{success:!1,msg:"Need to log in first"};const t=Fa(qr(Kn,"users"),qa("email","==",e)),r=await Ro(t);if(r.empty)return console.error("User not found"),{success:!1,msg:"User not found"};const i=r.docs[0].id;return i===n.owner?(console.error("userID is the same as owner"),{success:!1,msg:"Cannot share document with yourself"}):(await v0(qr(Kn,"users",i,"documents"),{owner:n.owner,title:n.title,content:n.content,history:n.history||[],sharedWith:e}),console.log("Shared with: ",e),{success:!0,msg:"Shared successfully"})}catch(t){return console.error("Error sharing document: ",t),{success:!1,msg:t instanceof Error?t.message:"Unknown error"}}},LI=async n=>{if(n===null)return[];try{console.log("Getting documents for email:",n);const e=Fa(qr(Kn,"users"),qa("email","==",n)),t=await Ro(e);if(t.empty)return console.error("User not found for email:",n),[];const r=t.docs[0].id;console.log("Found user ID:",r);const i=await Ro(qr(Kn,"users",r,"documents"));return console.log("Found documents:",i.docs.length),i.docs.map(l=>new Cr(l.data().owner,l.data().title,l.data().content,l.data().history||[],l.id,l.data().sharedWith||[]))}catch(e){return console.error("Error getting docs from db:",e),[]}},E6=async(n,e)=>{if(n===null||!e.id)return{success:!1,msg:"No Email for document ID",doc:new Cr};try{const t=Fa(qr(Kn,"users"),qa("email","==",n)),r=await Ro(t);if(r.empty)return console.error("User not found"),{success:!1,msg:"User not found",doc:new Cr};const i=r.docs[0].id;console.log(i);const o=em(Kn,"users",i,"documents",e.id),l=await eI(o);if(console.log(o),l.exists()){const u=l.data();if(u)return{success:!0,msg:"Success",doc:new Cr(n,u.title,u.content,u.history||[],l.id,u.sharedWith||[])}}return{success:!1,msg:"No Doc exists, creating new one",doc:new Cr}}catch(t){return console.error("Error getting document: ",t),{success:!1,msg:t instanceof Error?t.message:"Unknown error",doc:new Cr}}},b6=async n=>{try{return console.log("Deleting document:",n.path),await t3(n),console.log("Document successfully deleted"),!0}catch(e){return console.error("Error deleting document:",e),!1}},S6=async()=>w5(D0,_6).then(n=>{if(!Vr.credentialFromResult(n))return null;const t=n.user;return console.log(t),t.email}).catch(n=>{const e=n.code,t=n.message,r=n.customData.email,i=Vr.credentialFromError(n);return console.error(e,t,r,i),null}),T6=async(n,e)=>t5(D0,n,e).then(t=>{const r=t.user;return console.log(r),{success:!0,msg:"User created successfully",user:r.email}}).catch(t=>{const r=t.code,i=t.message;return console.error(r,i),{success:!1,msg:i,user:null}}),w6=async(n,e)=>n5(D0,n,e).then(t=>{const r=t.user;return console.log(r),r}).catch(t=>{const r=t.code,i=t.message;return console.error(r,i),null}),C6=({document:n,onClose:e})=>{const[t,r]=G.useState(""),[i,o]=G.useState(n.sharedWith),[l,u]=G.useState(!1);G.useEffect(()=>{console.log(n)},[n]);const h=()=>{u(!0),setTimeout(()=>{e(),u(!1)},400)},d=async()=>{v6(n,t).then(_=>{_.success&&(n.sharedWith=[...n.sharedWith,t],X_(n),o(n.sharedWith),h()),alert(_.msg)})},g=_=>{n.sharedWith=n.sharedWith.filter(v=>v!==_),X_(n),o(n.sharedWith)};return ee.jsx("div",{className:"modal-overlay",onClick:h,children:ee.jsxs("div",{className:`modal-content ${l?"modal-disappear":"modal-appear"}`,onClick:_=>_.stopPropagation(),children:[ee.jsx("div",{className:"modal-close",onClick:h,children:"X"}),ee.jsx("p",{children:"Currently shared with"}),ee.jsx("ul",{children:i.map(_=>ee.jsxs(ee.Fragment,{children:[ee.jsx("li",{children:_}),ee.jsx("button",{onClick:()=>g(_),children:"Remove"})]}))}),ee.jsx("input",{placeholder:"Enter Email",onChange:_=>r(_.target.value)}),ee.jsx("button",{onClick:d,children:"Share"})]})})},A6=/^\s*>\s$/,R6=$r.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Un(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ch({find:A6,type:this.type})]}}),k6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,I6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,x6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,O6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,D6=vo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Un(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[rc({find:k6,type:this.type}),rc({find:x6,type:this.type})]},addPasteRules(){return[ic({find:I6,type:this.type}),ic({find:O6,type:this.type})]}}),M6="listItem",F1="textStyle",q1=/^\s*([-+*])\s$/,N6=$r.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Un(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(M6,this.editor.getAttributes(F1)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=ch({find:q1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ch({find:q1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(F1),editor:this.editor})),[n]}}),P6=/(^|[^`])`([^`]+)`(?!`)/,V6=/(^|[^`])`([^`]+)`(?!`)/g,L6=vo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Un(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[rc({find:P6,type:this.type})]},addPasteRules(){return[ic({find:V6,type:this.type})]}}),U6=/^```([a-z]+)?[\s\n]$/,B6=/^~~~([a-z]+)?[\s\n]$/,z6=$r.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Un(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:d})=>(d.setSelection(Pe.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[b_({find:U6,type:this.type,getAttributes:n=>({language:n[1]})}),b_({find:B6,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Wn({key:new vi("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!t||!o)return!1;const{tr:l,schema:u}=n.state,h=u.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},h)),l.selection.$from.parent.type!==this.type&&l.setSelection(Ie.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),H6=$r.create({name:"doc",topNode:!0,content:"block+"});function j6(n={}){return new Wn({view(e){return new F6(e,n)}})}class F6{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let u=e.nodeBefore,h=e.nodeAfter;if(u||h){let d=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(d){let g=d.getBoundingClientRect(),_=u?g.bottom:g.top;u&&h&&(_=(_+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:g.left,right:g.right,top:_-this.width/2,bottom:_+this.width/2}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos);r={left:u.left-this.width/2,right:u.left+this.width/2,top:u.top,bottom:u.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let o,l;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,l=-pageYOffset;else{let u=i.getBoundingClientRect();o=u.left-i.scrollLeft,l=u.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-l+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!o){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=ZC(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const q6=Bn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[j6(this.options)]}});class Tt extends Pe{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Tt.valid(r)?new Tt(r):Pe.near(r)}content(){return fe.empty}eq(e){return e instanceof Tt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Tt(e.resolve(t.pos))}getBookmark(){return new M0(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!$6(e)||!G6(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Tt.valid(e))return e;let i=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(t>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=t;let h=e.doc.resolve(i);if(Tt.valid(h))return h}for(;;){let l=t>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!Te.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=l,i+=t;let u=e.doc.resolve(i);if(Tt.valid(u))return u}return null}}}Tt.prototype.visible=!1;Tt.findFrom=Tt.findGapCursorFrom;Pe.jsonID("gapcursor",Tt);class M0{constructor(e){this.pos=e}map(e){return new M0(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Tt.valid(t)?new Tt(t):Pe.near(t)}}function $6(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function G6(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function K6(){return new Wn({props:{decorations:X6,createSelectionBetween(n,e,t){return e.pos==t.pos&&Tt.valid(t)?new Tt(t):null},handleClick:Q6,handleKeyDown:W6,handleDOMEvents:{beforeinput:Y6}}})}const W6=BA({ArrowLeft:Ed("horiz",-1),ArrowRight:Ed("horiz",1),ArrowUp:Ed("vert",-1),ArrowDown:Ed("vert",1)});function Ed(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let l=r.selection,u=e>0?l.$to:l.$from,h=l.empty;if(l instanceof Ie){if(!o.endOfTextblock(t)||u.depth==0)return!1;h=!1,u=r.doc.resolve(e>0?u.after():u.before())}let d=Tt.findGapCursorFrom(u,e,h);return d?(i&&i(r.tr.setSelection(new Tt(d))),!0):!1}}function Q6(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Tt.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Te.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Tt(r))),!0)}function Y6(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Tt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=ae.empty;for(let l=r.length-1;l>=0;l--)i=ae.from(r[l].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new fe(i,0,0));return o.setSelection(Ie.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function X6(n){if(!(n.selection instanceof Tt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",jt.create(n.doc,[Rr.widget(n.selection.head,e,{key:"gapcursor"})])}const J6=Bn.create({name:"gapCursor",addProseMirrorPlugins(){return[K6()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Le(_e(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),Z6=$r.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Un(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:o}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,h=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:g})=>{if(g&&h&&l){const _=h.filter(v=>u.includes(v.type.name));d.ensureMarks(_)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),eH=$r.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Un(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>b_({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Ep=200,tn=function(){};tn.prototype.append=function(e){return e.length?(e=tn.from(e),!this.length&&e||e.length<Ep&&this.leafAppend(e)||this.length<Ep&&e.leafPrepend(this)||this.appendInner(e)):this};tn.prototype.prepend=function(e){return e.length?tn.from(e).append(this):this};tn.prototype.appendInner=function(e){return new tH(this,e)};tn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?tn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};tn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};tn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};tn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},t,r),i};tn.from=function(e){return e instanceof tn?e:e&&e.length?new UI(e):tn.empty};var UI=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,u){for(var h=o;h<l;h++)if(i(this.values[h],u+h)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,u){for(var h=o-1;h>=l;h--)if(i(this.values[h],u+h)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Ep)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Ep)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(tn);tn.empty=new UI([]);var tH=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(i,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(tn);const nH=500;class Lr{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,u,h,d=[],g=[];return this.items.forEach((_,v)=>{if(!_.step){i||(i=this.remapping(r,v+1),o=i.maps.length),o--,g.push(_);return}if(i){g.push(new li(_.map));let S=_.step.map(i.slice(o)),b;S&&l.maybeStep(S).doc&&(b=l.mapping.maps[l.mapping.maps.length-1],d.push(new li(b,void 0,void 0,d.length+g.length))),o--,b&&i.appendMap(b,o)}else l.maybeStep(_.step);if(_.selection)return u=i?_.selection.map(i.slice(o)):_.selection,h=new Lr(this.items.slice(0,r).append(g.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:l,selection:u}}addTransform(e,t,r,i){let o=[],l=this.eventCount,u=this.items,h=!i&&u.length?u.get(u.length-1):null;for(let g=0;g<e.steps.length;g++){let _=e.steps[g].invert(e.docs[g]),v=new li(e.mapping.maps[g],_,t),S;(S=h&&h.merge(v))&&(v=S,g?o.pop():u=u.slice(0,u.length-1)),o.push(v),t&&(l++,t=void 0),i||(h=v)}let d=l-r.depth;return d>iH&&(u=rH(u,d),l-=d),new Lr(u.append(o),l)}remapping(e,t){let r=new rh;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new Lr(this.items.append(e.map(t=>new li(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},i);let h=t;this.items.forEach(v=>{let S=o.getMirror(--h);if(S==null)return;l=Math.min(l,S);let b=o.maps[S];if(v.step){let C=e.steps[S].invert(e.docs[S]),A=v.selection&&v.selection.map(o.slice(h+1,S));A&&u++,r.push(new li(b,C,A))}else r.push(new li(b))},i);let d=[];for(let v=t;v<l;v++)d.push(new li(o.maps[v]));let g=this.items.slice(0,i).append(d).append(r),_=new Lr(g,u);return _.emptyItemCount()>nH&&(_=_.compress(this.items.length-r.length)),_}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)i.push(l),l.selection&&o++;else if(l.step){let h=l.step.map(t.slice(r)),d=h&&h.getMap();if(r--,d&&t.appendMap(d,r),h){let g=l.selection&&l.selection.map(t.slice(r));g&&o++;let _=new li(d.invert(),h,g),v,S=i.length-1;(v=i.length&&i[S].merge(_))?i[S]=v:i.push(_)}}else l.map&&r--},this.items.length,0),new Lr(tn.from(i.reverse()),o)}}Lr.empty=new Lr(tn.empty,0);function rH(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class li{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new li(t.getMap().invert(),t,this.selection)}}}class Xs{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const iH=20;function sH(n,e,t,r){let i=t.getMeta(Ia),o;if(i)return i.historyState;t.getMeta(lH)&&(n=new Xs(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Ia))return l.getMeta(Ia).redo?new Xs(n.done.addTransform(t,void 0,r,Ud(e)),n.undone,$1(t.mapping.maps),n.prevTime,n.prevComposition):new Xs(n.done,n.undone.addTransform(t,void 0,r,Ud(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),h=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!oH(t,n.prevRanges)),d=l?$y(n.prevRanges,t.mapping):$1(t.mapping.maps);return new Xs(n.done.addTransform(t,h?e.selection.getBookmark():void 0,r,Ud(e)),Lr.empty,d,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new Xs(n.done.rebased(t,o),n.undone.rebased(t,o),$y(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Xs(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),$y(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function oH(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function $1(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,o,l)=>e.push(o,l));return e}function $y(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function aH(n,e,t){let r=Ud(e),i=Ia.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),h=new Xs(t?u:o.remaining,t?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Ia,{redo:t,historyState:h})}let Gy=!1,G1=null;function Ud(n){let e=n.plugins;if(G1!=e){Gy=!1,G1=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Gy=!0;break}}return Gy}const Ia=new vi("history"),lH=new vi("closeHistory");function cH(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Wn({key:Ia,state:{init(){return new Xs(Lr.empty,Lr.empty,null,0,-1)},apply(e,t,r){return sH(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?zI:r=="historyRedo"?HI:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function BI(n,e){return(t,r)=>{let i=Ia.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let o=aH(i,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const zI=BI(!1,!0),HI=BI(!0,!0),uH=Bn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>zI(n,e),redo:()=>({state:n,dispatch:e})=>HI(n,e)}},addProseMirrorPlugins(){return[cH(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),hH=$r.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Un(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,o=n();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):iL(t)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:l,dispatch:u})=>{var h;if(u){const{$to:d}=l.selection,g=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(Ie.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(Te.create(l.doc,d.pos)):l.setSelection(Ie.create(l.doc,d.pos));else{const _=(h=d.parent.type.contentMatch.defaultType)===null||h===void 0?void 0:h.create();_&&(l.insert(g,_),l.setSelection(Ie.create(l.doc,g+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[PL({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),fH=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,dH=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,pH=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,mH=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,gH=vo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Un(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[rc({find:fH,type:this.type}),rc({find:pH,type:this.type})]},addPasteRules(){return[ic({find:dH,type:this.type}),ic({find:mH,type:this.type})]}}),yH=$r.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Un(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_H="listItem",K1="textStyle",W1=/^(\d+)\.\s$/,vH=$r.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Un(this.options.HTMLAttributes,t),0]:["ol",Un(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(_H,this.editor.getAttributes(K1)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=ch({find:W1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ch({find:W1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(K1)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),EH=$r.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Un(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),bH=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,SH=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,TH=vo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Un(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[rc({find:bH,type:this.type})]},addPasteRules(){return[ic({find:SH,type:this.type})]}}),wH=$r.create({name:"text",group:"inline"}),CH=Bn.create({name:"starterKit",addExtensions(){var n,e,t,r,i,o,l,u,h,d,g,_,v,S,b,C,A,O;const z=[];return this.options.bold!==!1&&z.push(D6.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&z.push(R6.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&z.push(N6.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&z.push(L6.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&z.push(z6.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&z.push(H6.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&z.push(q6.configure((l=this.options)===null||l===void 0?void 0:l.dropcursor)),this.options.gapcursor!==!1&&z.push(J6.configure((u=this.options)===null||u===void 0?void 0:u.gapcursor)),this.options.hardBreak!==!1&&z.push(Z6.configure((h=this.options)===null||h===void 0?void 0:h.hardBreak)),this.options.heading!==!1&&z.push(eH.configure((d=this.options)===null||d===void 0?void 0:d.heading)),this.options.history!==!1&&z.push(uH.configure((g=this.options)===null||g===void 0?void 0:g.history)),this.options.horizontalRule!==!1&&z.push(hH.configure((_=this.options)===null||_===void 0?void 0:_.horizontalRule)),this.options.italic!==!1&&z.push(gH.configure((v=this.options)===null||v===void 0?void 0:v.italic)),this.options.listItem!==!1&&z.push(yH.configure((S=this.options)===null||S===void 0?void 0:S.listItem)),this.options.orderedList!==!1&&z.push(vH.configure((b=this.options)===null||b===void 0?void 0:b.orderedList)),this.options.paragraph!==!1&&z.push(EH.configure((C=this.options)===null||C===void 0?void 0:C.paragraph)),this.options.strike!==!1&&z.push(TH.configure((A=this.options)===null||A===void 0?void 0:A.strike)),this.options.text!==!1&&z.push(wH.configure((O=this.options)===null||O===void 0?void 0:O.text)),z}});function AH(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])}return n}function J_(n,e){return Array(e+1).join(n)}function RH(n){return n.replace(/^\n*/,"")}function kH(n){for(var e=n.length;e>0&&n[e-1]===`
`;)e--;return n.substring(0,e)}var IH=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function N0(n){return P0(n,IH)}var jI=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function FI(n){return P0(n,jI)}function xH(n){return $I(n,jI)}var qI=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function OH(n){return P0(n,qI)}function DH(n){return $I(n,qI)}function P0(n,e){return e.indexOf(n.nodeName)>=0}function $I(n,e){return n.getElementsByTagName&&e.some(function(t){return n.getElementsByTagName(t).length})}var Rn={};Rn.paragraph={filter:"p",replacement:function(n){return`

`+n+`

`}};Rn.lineBreak={filter:"br",replacement:function(n,e,t){return t.br+`
`}};Rn.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(n,e,t){var r=Number(e.nodeName.charAt(1));if(t.headingStyle==="setext"&&r<3){var i=J_(r===1?"=":"-",n.length);return`

`+n+`
`+i+`

`}else return`

`+J_("#",r)+" "+n+`

`}};Rn.blockquote={filter:"blockquote",replacement:function(n){return n=n.replace(/^\n+|\n+$/g,""),n=n.replace(/^/gm,"> "),`

`+n+`

`}};Rn.list={filter:["ul","ol"],replacement:function(n,e){var t=e.parentNode;return t.nodeName==="LI"&&t.lastElementChild===e?`
`+n:`

`+n+`

`}};Rn.listItem={filter:"li",replacement:function(n,e,t){n=n.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=t.bulletListMarker+"   ",i=e.parentNode;if(i.nodeName==="OL"){var o=i.getAttribute("start"),l=Array.prototype.indexOf.call(i.children,e);r=(o?Number(o)+l:l+1)+".  "}return r+n+(e.nextSibling&&!/\n$/.test(n)?`
`:"")}};Rn.indentedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="indented"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Rn.fencedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="fenced"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){for(var r=e.firstChild.getAttribute("class")||"",i=(r.match(/language-(\S+)/)||[null,""])[1],o=e.firstChild.textContent,l=t.fence.charAt(0),u=3,h=new RegExp("^"+l+"{3,}","gm"),d;d=h.exec(o);)d[0].length>=u&&(u=d[0].length+1);var g=J_(l,u);return`

`+g+i+`
`+o.replace(/\n$/,"")+`
`+g+`

`}};Rn.horizontalRule={filter:"hr",replacement:function(n,e,t){return`

`+t.hr+`

`}};Rn.inlineLink={filter:function(n,e){return e.linkStyle==="inlined"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e){var t=e.getAttribute("href");t&&(t=t.replace(/([()])/g,"\\$1"));var r=bp(e.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+n+"]("+t+r+")"}};Rn.referenceLink={filter:function(n,e){return e.linkStyle==="referenced"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e,t){var r=e.getAttribute("href"),i=bp(e.getAttribute("title"));i&&(i=' "'+i+'"');var o,l;switch(t.linkReferenceStyle){case"collapsed":o="["+n+"][]",l="["+n+"]: "+r+i;break;case"shortcut":o="["+n+"]",l="["+n+"]: "+r+i;break;default:var u=this.references.length+1;o="["+n+"]["+u+"]",l="["+u+"]: "+r+i}return this.references.push(l),o},references:[],append:function(n){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};Rn.emphasis={filter:["em","i"],replacement:function(n,e,t){return n.trim()?t.emDelimiter+n+t.emDelimiter:""}};Rn.strong={filter:["strong","b"],replacement:function(n,e,t){return n.trim()?t.strongDelimiter+n+t.strongDelimiter:""}};Rn.code={filter:function(n){var e=n.previousSibling||n.nextSibling,t=n.parentNode.nodeName==="PRE"&&!e;return n.nodeName==="CODE"&&!t},replacement:function(n){if(!n)return"";n=n.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(n)?" ":"",t="`",r=n.match(/`+/gm)||[];r.indexOf(t)!==-1;)t=t+"`";return t+e+n+e+t}};Rn.image={filter:"img",replacement:function(n,e){var t=bp(e.getAttribute("alt")),r=e.getAttribute("src")||"",i=bp(e.getAttribute("title")),o=i?' "'+i+'"':"";return r?"!["+t+"]("+r+o+")":""}};function bp(n){return n?n.replace(/(\n+\s*)+/g,`
`):""}function GI(n){this.options=n,this._keep=[],this._remove=[],this.blankRule={replacement:n.blankReplacement},this.keepReplacement=n.keepReplacement,this.defaultRule={replacement:n.defaultReplacement},this.array=[];for(var e in n.rules)this.array.push(n.rules[e])}GI.prototype={add:function(n,e){this.array.unshift(e)},keep:function(n){this._keep.unshift({filter:n,replacement:this.keepReplacement})},remove:function(n){this._remove.unshift({filter:n,replacement:function(){return""}})},forNode:function(n){if(n.isBlank)return this.blankRule;var e;return(e=Ky(this.array,n,this.options))||(e=Ky(this._keep,n,this.options))||(e=Ky(this._remove,n,this.options))?e:this.defaultRule},forEach:function(n){for(var e=0;e<this.array.length;e++)n(this.array[e],e)}};function Ky(n,e,t){for(var r=0;r<n.length;r++){var i=n[r];if(MH(i,e,t))return i}}function MH(n,e,t){var r=n.filter;if(typeof r=="string"){if(r===e.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(n,e,t))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function NH(n){var e=n.element,t=n.isBlock,r=n.isVoid,i=n.isPre||function(_){return _.nodeName==="PRE"};if(!(!e.firstChild||i(e))){for(var o=null,l=!1,u=null,h=Q1(u,e,i);h!==e;){if(h.nodeType===3||h.nodeType===4){var d=h.data.replace(/[ \r\n\t]+/g," ");if((!o||/ $/.test(o.data))&&!l&&d[0]===" "&&(d=d.substr(1)),!d){h=Wy(h);continue}h.data=d,o=h}else if(h.nodeType===1)t(h)||h.nodeName==="BR"?(o&&(o.data=o.data.replace(/ $/,"")),o=null,l=!1):r(h)||i(h)?(o=null,l=!0):o&&(l=!1);else{h=Wy(h);continue}var g=Q1(u,h,i);u=h,h=g}o&&(o.data=o.data.replace(/ $/,""),o.data||Wy(o))}}function Wy(n){var e=n.nextSibling||n.parentNode;return n.parentNode.removeChild(n),e}function Q1(n,e,t){return n&&n.parentNode===e||t(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var V0=typeof window<"u"?window:{};function PH(){var n=V0.DOMParser,e=!1;try{new n().parseFromString("","text/html")&&(e=!0)}catch{}return e}function VH(){var n=function(){};return LH()?n.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:n.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},n}function LH(){var n=!1;try{document.implementation.createHTMLDocument("").open()}catch{V0.ActiveXObject&&(n=!0)}return n}var UH=PH()?V0.DOMParser:VH();function BH(n,e){var t;if(typeof n=="string"){var r=zH().parseFromString('<x-turndown id="turndown-root">'+n+"</x-turndown>","text/html");t=r.getElementById("turndown-root")}else t=n.cloneNode(!0);return NH({element:t,isBlock:N0,isVoid:FI,isPre:e.preformattedCode?HH:null}),t}var Qy;function zH(){return Qy=Qy||new UH,Qy}function HH(n){return n.nodeName==="PRE"||n.nodeName==="CODE"}function jH(n,e){return n.isBlock=N0(n),n.isCode=n.nodeName==="CODE"||n.parentNode.isCode,n.isBlank=FH(n),n.flankingWhitespace=qH(n,e),n}function FH(n){return!FI(n)&&!OH(n)&&/^\s*$/i.test(n.textContent)&&!xH(n)&&!DH(n)}function qH(n,e){if(n.isBlock||e.preformattedCode&&n.isCode)return{leading:"",trailing:""};var t=$H(n.textContent);return t.leadingAscii&&Y1("left",n,e)&&(t.leading=t.leadingNonAscii),t.trailingAscii&&Y1("right",n,e)&&(t.trailing=t.trailingNonAscii),{leading:t.leading,trailing:t.trailing}}function $H(n){var e=n.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function Y1(n,e,t){var r,i,o;return n==="left"?(r=e.previousSibling,i=/ $/):(r=e.nextSibling,i=/^ /),r&&(r.nodeType===3?o=i.test(r.nodeValue):t.preformattedCode&&r.nodeName==="CODE"?o=!1:r.nodeType===1&&!N0(r)&&(o=i.test(r.textContent))),o}var GH=Array.prototype.reduce,KH=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Sp(n){if(!(this instanceof Sp))return new Sp(n);var e={rules:Rn,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,r){return r.isBlock?`

`:""},keepReplacement:function(t,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(t,r){return r.isBlock?`

`+t+`

`:t}};this.options=AH({},e,n),this.rules=new GI(this.options)}Sp.prototype={turndown:function(n){if(!YH(n))throw new TypeError(n+" is not a string, or an element/document/fragment node.");if(n==="")return"";var e=KI.call(this,new BH(n,this.options));return WH.call(this,e)},use:function(n){if(Array.isArray(n))for(var e=0;e<n.length;e++)this.use(n[e]);else if(typeof n=="function")n(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(n,e){return this.rules.add(n,e),this},keep:function(n){return this.rules.keep(n),this},remove:function(n){return this.rules.remove(n),this},escape:function(n){return KH.reduce(function(e,t){return e.replace(t[0],t[1])},n)}};function KI(n){var e=this;return GH.call(n.childNodes,function(t,r){r=new jH(r,e.options);var i="";return r.nodeType===3?i=r.isCode?r.nodeValue:e.escape(r.nodeValue):r.nodeType===1&&(i=QH.call(e,r)),WI(t,i)},"")}function WH(n){var e=this;return this.rules.forEach(function(t){typeof t.append=="function"&&(n=WI(n,t.append(e.options)))}),n.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function QH(n){var e=this.rules.forNode(n),t=KI.call(this,n),r=n.flankingWhitespace;return(r.leading||r.trailing)&&(t=t.trim()),r.leading+e.replacement(t,n,this.options)+r.trailing}function WI(n,e){var t=kH(n),r=RH(e),i=Math.max(n.length-t.length,e.length-r.length),o=`

`.substring(0,i);return t+o+r}function YH(n){return n!=null&&(typeof n=="string"||n.nodeType&&(n.nodeType===1||n.nodeType===9||n.nodeType===11))}const XH=()=>{const[n,e]=G.useState(!1),t=new Sp,{documentState:r,updateDocumentContent:i,updateTitle:o,loadDoc:l,updateID:u}=AC(),{currentUser:h,updateYourDocs:d}=Ap(),{shouldConnect:g,setShouldConnect:_,connectionStatus:v,reconnect:S}=zM(h),b=ZL({extensions:[CH],content:r.content,onUpdate:({editor:O})=>{const z=O.getHTML();i(z)}});G.useEffect(()=>{b&&r.content!==b.getHTML()&&b.commands.setContent(r.content)},[r.content,b]);const C=()=>g?h===""?ee.jsx("p",{children:"Not logged in"}):v==="Connected"?ee.jsxs("p",{children:["Logged in as ",h]}):v==="Disconnected"?ee.jsxs(ee.Fragment,{children:[ee.jsx("p",{children:v}),ee.jsx("button",{onClick:S,children:"Reconnect"})]}):ee.jsx("p",{children:v}):ee.jsx("p",{}),A=()=>{if(!b)return;const O=b.getHTML(),z=t.turndown(O),Q=new Blob([z],{type:"text/markdown"}),F=URL.createObjectURL(Q),W=document.createElement("a");W.href=F,W.download=`${r.title}.md`,W.click(),URL.revokeObjectURL(F)};return G.useEffect(()=>{(r.sharedWith.length>0||h&&r.sharedWith.includes(h))&&_(!0)},[r]),ee.jsxs("div",{id:"editor-container",children:[ee.jsx("div",{id:"connection-status",children:C()}),ee.jsxs("div",{className:"top-container",children:[ee.jsx("h2",{id:"document-title",contentEditable:"true",suppressContentEditableWarning:!0,onBlur:O=>o(O),children:r.title}),ee.jsxs("div",{id:"button-container",children:[ee.jsx("button",{id:"new-button",onClick:()=>{const O=new Cr(h,"New Document","",[],null,[]);l(O)},children:"New Doc"}),ee.jsx("button",{id:"save-button",onClick:()=>X_(r).then(O=>{console.log(O),u(O),LI(h).then(z=>{if(r.owner)return d(z,r.owner)})}),children:ee.jsx("img",{src:"/save-icon.png"})}),ee.jsx("button",{id:"share-button",onClick:()=>e(!0),children:ee.jsx("img",{src:"/share-icon.png"})}),ee.jsx("button",{id:"download-button",onClick:()=>A(),children:"Download"})]})]}),n&&ee.jsx(C6,{document:r,onClose:()=>e(!1)}),ee.jsx(i4,{editor:b})]})};var Yy={},bd={},Xy={exports:{}},Jy,X1;function JH(){if(X1)return Jy;X1=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Jy=n,Jy}var Zy,J1;function ZH(){if(J1)return Zy;J1=1;var n=JH();function e(){}function t(){}return t.resetWarningCache=e,Zy=function(){function r(l,u,h,d,g,_){if(_!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Zy}var Z1;function QI(){return Z1||(Z1=1,Xy.exports=ZH()()),Xy.exports}var Nu={},ln={},eC;function YI(){if(eC)return ln;eC=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.svgStyle=ln.lightStyle=ln.iconStyle=ln.hoverStyle=ln.disabledStyle=ln.disabledIconStyle=ln.darkStyle=void 0;function n(u){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},n(u)}function e(u,h){var d=Object.keys(u);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(u);h&&(g=g.filter(function(_){return Object.getOwnPropertyDescriptor(u,_).enumerable})),d.push.apply(d,g)}return d}function t(u){for(var h=1;h<arguments.length;h++){var d=arguments[h]!=null?arguments[h]:{};h%2?e(Object(d),!0).forEach(function(g){r(u,g,d[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(d)):e(Object(d)).forEach(function(g){Object.defineProperty(u,g,Object.getOwnPropertyDescriptor(d,g))})}return u}function r(u,h,d){return h=i(h),h in u?Object.defineProperty(u,h,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[h]=d,u}function i(u){var h=o(u,"string");return n(h)=="symbol"?h:h+""}function o(u,h){if(n(u)!="object"||!u)return u;var d=u[Symbol.toPrimitive];if(d!==void 0){var g=d.call(u,h);if(n(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(u)}var l={height:"50px",width:"240px",border:"none",textAlign:"center",verticalAlign:"center",boxShadow:"0 2px 4px 0 rgba(0,0,0,.25)",fontSize:"16px",lineHeight:"48px",display:"block",borderRadius:"1px",transition:"background-color .218s, border-color .218s, box-shadow .218s",fontFamily:"Roboto,arial,sans-serif",cursor:"pointer",userSelect:"none"};return ln.darkStyle=t({backgroundColor:"#4285f4",color:"#fff"},l),ln.lightStyle=t({backgroundColor:"#fff",color:"rgba(0,0,0,.54)"},l),ln.iconStyle={width:"48px",height:"48px",textAlign:"center",verticalAlign:"center",display:"block",marginTop:"1px",marginLeft:"1px",float:"left",backgroundColor:"#fff",borderRadius:"1px",whiteSpace:"nowrap"},ln.svgStyle={width:"48px",height:"48px",display:"block"},ln.hoverStyle={boxShadow:"0 0 3px 3px rgba(66,133,244,.3)",transition:"background-color .218s, border-color .218s, box-shadow .218s"},ln.disabledStyle={backgroundColor:"rgba(37, 5, 5, .08)",color:"rgba(0, 0, 0, .40)",cursor:"not-allowed"},ln.disabledIconStyle={backgroundColor:"transparent"},ln}var tC;function ej(){if(tC)return Nu;tC=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.GoogleIcon=void 0;var n=r(vh()),e=r(QI()),t=YI();function r(b){return b&&b.__esModule?b:{default:b}}function i(b){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},i(b)}function o(b,C){var A=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);C&&(O=O.filter(function(z){return Object.getOwnPropertyDescriptor(b,z).enumerable})),A.push.apply(A,O)}return A}function l(b){for(var C=1;C<arguments.length;C++){var A=arguments[C]!=null?arguments[C]:{};C%2?o(Object(A),!0).forEach(function(O){u(b,O,A[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(A)):o(Object(A)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(A,O))})}return b}function u(b,C,A){return C=h(C),C in b?Object.defineProperty(b,C,{value:A,enumerable:!0,configurable:!0,writable:!0}):b[C]=A,b}function h(b){var C=d(b,"string");return i(C)=="symbol"?C:C+""}function d(b,C){if(i(b)!="object"||!b)return b;var A=b[Symbol.toPrimitive];if(A!==void 0){var O=A.call(b,C);if(i(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(b)}var g=n.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"46px",height:"46px",viewBox:"0 0 46 46",style:t.svgStyle},n.default.createElement("defs",null,n.default.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},n.default.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),n.default.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),n.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),n.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),n.default.createElement("feMerge",null,n.default.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),n.default.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),n.default.createElement("feMergeNode",{in:"SourceGraphic"}))),n.default.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"}),n.default.createElement("rect",{id:"path-3",x:"5",y:"5",width:"38",height:"38",rx:"1"})),n.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.default.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -219.000000)"}),n.default.createElement("g",{id:"btn_google_dark_normal",transform:"translate(-1.000000, -1.000000)"},n.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},n.default.createElement("g",{id:"button-bg"},n.default.createElement("use",{fill:"#4285F4",fillRule:"evenodd"}),n.default.createElement("use",{fill:"none"}),n.default.createElement("use",{fill:"none"}),n.default.createElement("use",{fill:"none"}))),n.default.createElement("g",{id:"button-bg-copy"},n.default.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),n.default.createElement("use",{fill:"none"}),n.default.createElement("use",{fill:"none"}),n.default.createElement("use",{fill:"none"})),n.default.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},n.default.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),n.default.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),n.default.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),n.default.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),n.default.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),n.default.createElement("g",{id:"handles_square"})))),_=n.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"46px",height:"46px",viewBox:"0 0 46 46",style:t.svgStyle},n.default.createElement("defs",null,n.default.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},n.default.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),n.default.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),n.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),n.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),n.default.createElement("feMerge",null,n.default.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),n.default.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),n.default.createElement("feMergeNode",{in:"SourceGraphic"}))),n.default.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"})),n.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.default.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),n.default.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},n.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},n.default.createElement("g",{id:"button-bg"},n.default.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),n.default.createElement("use",{fill:"none"}),n.default.createElement("use",{fill:"none"}),n.default.createElement("use",{fill:"none"}))),n.default.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},n.default.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),n.default.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),n.default.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),n.default.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),n.default.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),n.default.createElement("g",{id:"handles_square"})))),v=n.default.createElement("svg",{width:"46px",height:"46px",viewBox:"0 0 46 46",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:t.svgStyle},n.default.createElement("defs",null,n.default.createElement("rect",{id:"path-1",x:"0",y:"0",width:"40",height:"40",rx:"2"})),n.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.default.createElement("g",{id:"9-PATCH",transform:"translate(-788.000000, -219.000000)"}),n.default.createElement("g",{id:"btn_google_dark_disabled",transform:"translate(-1.000000, -1.000000)"},n.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)"},n.default.createElement("g",{id:"button-bg"},n.default.createElement("use",{fillOpacity:"0.08",fill:"#000000",fillRule:"evenodd"}),n.default.createElement("use",{fill:"none"}),n.default.createElement("use",{fill:"none"}),n.default.createElement("use",{fill:"none"}))),n.default.createElement("path",{d:"M24.001,25.71 L24.001,22.362 L32.425,22.362 C32.551,22.929 32.65,23.46 32.65,24.207 C32.65,29.346 29.203,33 24.01,33 C19.042,33 15.01,28.968 15.01,24 C15.01,19.032 19.042,15 24.01,15 C26.44,15 28.474,15.891 30.031,17.349 L27.475,19.833 C26.827,19.221 25.693,18.501 24.01,18.501 C21.031,18.501 18.601,20.976 18.601,24.009 C18.601,27.042 21.031,29.517 24.01,29.517 C27.457,29.517 28.726,27.132 28.96,25.719 L24.001,25.719 L24.001,25.71 Z",id:"Shape-Copy",fillOpacity:"0.4",fill:"#000000"}),n.default.createElement("g",{id:"handles_square"})))),S=Nu.GoogleIcon=function(C){var A=C.disabled,O=C.type,z=O===void 0?"dark":O;return n.default.createElement("div",{style:A?l(l({},t.iconStyle),t.disabledIconStyle):t.iconStyle},A?v:z==="dark"?g:_)};return S.propTypes={disabled:e.default.bool,type:e.default.oneOf(["light","dark"])},Nu}var nC;function tj(){if(nC)return bd;nC=1;function n(F){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n(F)}Object.defineProperty(bd,"__esModule",{value:!0}),bd.default=Q;var e=u(vh()),t=o(QI()),r=ej(),i=YI();function o(F){return F&&F.__esModule?F:{default:F}}function l(F){if(typeof WeakMap!="function")return null;var W=new WeakMap,X=new WeakMap;return(l=function(x){return x?X:W})(F)}function u(F,W){if(F&&F.__esModule)return F;if(F===null||n(F)!="object"&&typeof F!="function")return{default:F};var X=l(W);if(X&&X.has(F))return X.get(F);var N={__proto__:null},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in F)if(k!=="default"&&{}.hasOwnProperty.call(F,k)){var D=x?Object.getOwnPropertyDescriptor(F,k):null;D&&(D.get||D.set)?Object.defineProperty(N,k,D):N[k]=F[k]}return N.default=F,X&&X.set(F,N),N}function h(F,W){var X=Object.keys(F);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(F);W&&(N=N.filter(function(x){return Object.getOwnPropertyDescriptor(F,x).enumerable})),X.push.apply(X,N)}return X}function d(F){for(var W=1;W<arguments.length;W++){var X=arguments[W]!=null?arguments[W]:{};W%2?h(Object(X),!0).forEach(function(N){g(F,N,X[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(X)):h(Object(X)).forEach(function(N){Object.defineProperty(F,N,Object.getOwnPropertyDescriptor(X,N))})}return F}function g(F,W,X){return W=_(W),W in F?Object.defineProperty(F,W,{value:X,enumerable:!0,configurable:!0,writable:!0}):F[W]=X,F}function _(F){var W=v(F,"string");return n(W)=="symbol"?W:W+""}function v(F,W){if(n(F)!="object"||!F)return F;var X=F[Symbol.toPrimitive];if(X!==void 0){var N=X.call(F,W);if(n(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(F)}function S(F,W){return z(F)||O(F,W)||C(F,W)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(F,W){if(F){if(typeof F=="string")return A(F,W);var X=Object.prototype.toString.call(F).slice(8,-1);if(X==="Object"&&F.constructor&&(X=F.constructor.name),X==="Map"||X==="Set")return Array.from(F);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return A(F,W)}}function A(F,W){(W==null||W>F.length)&&(W=F.length);for(var X=0,N=new Array(W);X<W;X++)N[X]=F[X];return N}function O(F,W){var X=F==null?null:typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(X!=null){var N,x,k,D,V=[],H=!0,P=!1;try{if(k=(X=X.call(F)).next,W!==0)for(;!(H=(N=k.call(X)).done)&&(V.push(N.value),V.length!==W);H=!0);}catch(ot){P=!0,x=ot}finally{try{if(!H&&X.return!=null&&(D=X.return(),Object(D)!==D))return}finally{if(P)throw x}}return V}}function z(F){if(Array.isArray(F))return F}function Q(F){var W=F.label,X=W===void 0?"Sign in with Google":W,N=F.disabled,x=N===void 0?!1:N,k=F.tabIndex,D=k===void 0?0:k,V=F.onClick,H=V===void 0?function(){}:V,P=F.type,ot=P===void 0?"dark":P,at=F.style,ne=(0,e.useState)(!1),pe=S(ne,2),ue=pe[0],He=pe[1],L=function(){x||He(!0)},le=function(){x||He(!1)},ve=function(){var Re=ot==="dark"?i.darkStyle:i.lightStyle;return d(ue?d(d({},Re),i.hoverStyle):x?d(d({},Re),i.disabledStyle):d({},Re),at)},de=function(Re){x||H(Re)};return e.default.createElement("div",{disabled:x,tabIndex:D,onClick:de,role:"button",style:ve(),onMouseOver:L,onMouseOut:le},e.default.createElement(r.GoogleIcon,{disabled:x,type:ot}),e.default.createElement("span",null,X))}return Q.propTypes={label:t.default.string,disabled:t.default.bool,tabIndex:t.default.number,onClick:t.default.func,type:t.default.oneOf(["light","dark"]),style:t.default.object},bd}var rC;function nj(){return rC||(rC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"GoogleButton",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.default}});var e=t(tj());function t(r){return r&&r.__esModule?r:{default:r}}}(Yy)),Yy}var rj=nj();const ij=Z_(rj),sj=({onClose:n})=>{const[e,t]=G.useState(""),[r,i]=G.useState(""),[o,l]=G.useState(""),[u,h]=G.useState(""),[d,g]=G.useState(!1),{setUser:_}=Ap();G.useEffect(()=>{h(r!==o?"Passwords do not match":"")},[r,o]);const v=()=>{g(!0),setTimeout(()=>{n(),g(!1)},400)},S=()=>{T6(e,r).then(b=>{b&&(b.success?(VI(e),_(b.user),v()):h(b.msg))})};return ee.jsx("div",{className:"modal-overlay",onClick:v,children:ee.jsxs("div",{className:`modal-content ${d?"modal-disappear":"modal-appear"}`,onClick:b=>b.stopPropagation(),children:[ee.jsx("div",{className:"modal-close",onClick:v,children:"X"}),ee.jsx("h1",{children:"Create Account"}),ee.jsx("input",{type:"text",placeholder:"Email",value:e,onChange:b=>t(b.target.value)}),ee.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:b=>i(b.target.value)}),ee.jsx("input",{type:"password",placeholder:"Confirm Password",value:o,onChange:b=>l(b.target.value)}),u?ee.jsx("p",{className:"errorText",children:u}):ee.jsx("p",{className:"errorText"}),ee.jsx("button",{onClick:S,children:"Create Account"})]})})},oj=()=>{const[n,e]=G.useState(!1),[t,r]=G.useState(!1),[i,o]=G.useState(!1),[l,u]=G.useState(!1),[h,d]=G.useState(""),[g,_]=G.useState(""),[v,S]=G.useState(!1),{currentUser:b,setUser:C,clearUser:A,yourDocs:O,sharedDocs:z,docHistory:Q,updateYourDocs:F,updateDocHistory:W}=Ap(),{updateOwner:X,loadDoc:N,updateDocumentContent:x,updateTitle:k}=AC(),D=()=>{e(ne=>!ne)},V=()=>{A(),N(new Cr(""))},H=(ne,pe)=>{ne.preventDefault(),ne.stopPropagation(),o(!0),E6(b,pe).then(ue=>{N(ue.doc),W(ue.doc.history)}).catch(ue=>{console.error("Error getting single doc: ",ue)})},P=(ne,pe)=>{ne.stopPropagation(),x(pe.content)},ot=async()=>{const ne=await S6();if(!ne)return;C(ne),VI(ne),X(ne);const pe=await LI(ne);pe&&F(pe,ne)},at=async(ne,pe)=>{if(ne.stopPropagation(),!(!b||!pe.id))try{const ue=Fa(qr(Kn,"users"),qa("email","==",b)),He=await Ro(ue);if(He.empty){console.error("User not found");return}const L=He.docs[0].id;await b6(em(Kn,"users",L,"documents",pe.id))&&O&&(F(O.filter(ve=>ve.id!==pe.id),b),x(new Cr(b,"New Document","",[],null,[]).content),k("New Document"))}catch(ue){console.error("Error in handleDelete:",ue)}};return ee.jsxs("div",{id:"sidebar-container",className:n?"sidebar-open":"",children:[ee.jsxs("div",{id:"sidebar-main",className:n?"sidebar-open":"",children:[ee.jsx("div",{id:""}),ee.jsxs("div",{id:"login-container",children:[v&&ee.jsx(sj,{onClose:()=>S(!1)}),b?ee.jsxs(ee.Fragment,{children:["Logged in as ",b,ee.jsx("button",{onClick:V,children:"Logout"}),ee.jsxs("div",{id:"history-container",onClick:()=>r(ne=>!ne),children:[ee.jsxs("h3",{children:["History ",ee.jsx("span",{id:"arrow",className:t?"arrow-open":"",children:ee.jsx("img",{src:"arrow.png"})})]}),ee.jsx("ul",{id:"history-list",className:t?"history-open":"",children:Q==null?void 0:Q.map((ne,pe)=>ee.jsxs("li",{id:"history-item",onClick:ue=>P(ue,ne),children:[ne.date.month,"/",ne.date.day,"/",ne.date.year]},pe))})]}),ee.jsxs("div",{id:"recent-container",onClick:()=>o(ne=>!ne),className:i?"recent-open":"",children:[ee.jsxs("h3",{children:["Your Documents ",ee.jsx("span",{id:"arrow",className:i?"arrow-open":"",children:ee.jsx("img",{src:"arrow.png"})})]}),ee.jsx("ul",{id:"recent-list",className:i?"recent-open":"",children:O==null?void 0:O.map((ne,pe)=>ee.jsxs("li",{children:[ee.jsx("span",{id:"recent-title",onClick:ue=>H(ue,ne),children:ne.title}),ee.jsx("span",{id:"delete-icon",onClick:ue=>at(ue,ne),children:ee.jsx("img",{src:"delete-icon.png"})})]},pe))})]}),ee.jsxs("div",{id:"shared-container",onClick:()=>u(ne=>!ne),className:l?"shared-open":"",children:[ee.jsxs("h3",{children:["Shared With You ",ee.jsx("span",{id:"arrow",className:l?"arrow-open":"",children:ee.jsx("img",{src:"arrow.png"})})]}),ee.jsx("ul",{id:"shared-list",className:l?"shared-open":"",children:z==null?void 0:z.map((ne,pe)=>ee.jsx("li",{children:ee.jsx("span",{id:"shared-item",onClick:ue=>H(ue,ne),children:ne.title})},pe))})]})]}):ee.jsxs(ee.Fragment,{children:[ee.jsx("input",{placeholder:"Email",onChange:ne=>d(ne.target.value)}),ee.jsx("input",{placeholder:"Password",onChange:ne=>_(ne.target.value),type:"password"}),ee.jsx("button",{onClick:()=>w6(h,g),children:"Login"}),ee.jsx("p",{onClick:()=>S(!0),children:"Create Account"}),ee.jsx(ij,{onClick:ot})]})]})]}),ee.jsx("button",{id:"hamburger",onClick:D,children:n?"":""})]})};function aj(){return ee.jsx("div",{id:"main-container",children:ee.jsx(GD,{children:ee.jsx(SD,{children:ee.jsx(gC,{path:"/",element:ee.jsxs(ee.Fragment,{children:[ee.jsx(oj,{}),ee.jsx(XH,{})]})})})})})}OO.createRoot(document.getElementById("root")).render(ee.jsx(G.StrictMode,{children:ee.jsx(HM,{children:ee.jsx(jM,{children:ee.jsx(aj,{})})})}));
